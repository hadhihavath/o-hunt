<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OKHOTA ‚Äî The Hunt</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&family=Share+Tech+Mono&family=Orbitron:wght@400;500;700;900&display=swap" rel="stylesheet">
<style>
:root {
  --cyan: #00FFC2;
  --gold: #F5BD19;
  --red: #FF3860;
  --dark: #050A0E;
  --dark2: #0A1520;
  --dark3: #0F1F30;
  --panel: rgba(0,255,194,0.04);
  --panel-border: rgba(0,255,194,0.15);
  --text: #C8E6F0;
  --text-dim: rgba(200,230,240,0.45);
  --font-hud: 'Orbitron', monospace;
  --font-body: 'Rajdhani', sans-serif;
  --font-mono: 'Share Tech Mono', monospace;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  background: var(--dark);
  color: var(--text);
  font-family: var(--font-body);
  overflow: hidden;
  height: 100vh;
  width: 100vw;
  cursor: crosshair;
}

/* ‚îÄ‚îÄ SCAN LINE OVERLAY ‚îÄ‚îÄ */
body::before {
  content: '';
  position: fixed; inset: 0;
  background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,255,194,0.015) 2px, rgba(0,255,194,0.015) 4px);
  pointer-events: none;
  z-index: 9998;
}

body::after {
  content: '';
  position: fixed; inset: 0;
  background: radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.7) 100%);
  pointer-events: none;
  z-index: 9997;
}

/* ‚îÄ‚îÄ NOISE TEXTURE ‚îÄ‚îÄ */
.noise {
  position: fixed; inset: 0;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size: 200px;
  pointer-events: none;
  z-index: 9999;
}

/* ‚îÄ‚îÄ BOOT SCREEN ‚îÄ‚îÄ */
#boot {
  position: fixed; inset: 0;
  background: var(--dark);
  z-index: 10000;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 24px;
  transition: opacity 0.8s ease;
}
#boot.hidden { opacity: 0; pointer-events: none; }

.boot-logo {
  font-family: var(--font-hud);
  font-size: clamp(48px, 8vw, 96px);
  font-weight: 900;
  color: var(--cyan);
  letter-spacing: 0.3em;
  text-shadow: 0 0 40px var(--cyan), 0 0 80px rgba(0,255,194,0.4);
  animation: pulse-logo 2s ease-in-out infinite;
}
@keyframes pulse-logo {
  0%,100% { text-shadow: 0 0 40px var(--cyan), 0 0 80px rgba(0,255,194,0.4); }
  50% { text-shadow: 0 0 80px var(--cyan), 0 0 160px rgba(0,255,194,0.6), 0 0 20px #fff; }
}

.boot-sub {
  font-family: var(--font-mono);
  font-size: 13px;
  color: var(--gold);
  letter-spacing: 0.4em;
  text-transform: uppercase;
}

.boot-bar-wrap {
  width: 320px;
  height: 3px;
  background: rgba(0,255,194,0.1);
  border: 1px solid rgba(0,255,194,0.2);
  position: relative;
  overflow: hidden;
}
.boot-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--cyan), var(--gold));
  box-shadow: 0 0 12px var(--cyan);
  animation: boot-load 2.5s cubic-bezier(0.4,0,0.2,1) forwards;
}
@keyframes boot-load { to { width: 100%; } }

.boot-status {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-dim);
  letter-spacing: 0.1em;
}

/* ‚îÄ‚îÄ APP SHELL ‚îÄ‚îÄ */
#app {
  display: grid;
  grid-template-rows: 56px 1fr 64px;
  grid-template-columns: 220px 1fr 280px;
  height: 100vh;
  opacity: 0;
  transition: opacity 1s ease 0.3s;
}
#app.visible { opacity: 1; }

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
header {
  grid-column: 1 / -1;
  grid-row: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  background: rgba(5,10,14,0.95);
  border-bottom: 1px solid var(--panel-border);
  backdrop-filter: blur(8px);
  z-index: 100;
}

.header-logo {
  font-family: var(--font-hud);
  font-size: 20px;
  font-weight: 700;
  color: var(--cyan);
  letter-spacing: 0.25em;
  text-shadow: 0 0 20px rgba(0,255,194,0.5);
}
.header-logo span { color: var(--gold); }

.header-center {
  display: flex;
  align-items: center;
  gap: 6px;
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-dim);
}

.status-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  background: var(--cyan);
  box-shadow: 0 0 8px var(--cyan);
  animation: blink 1.5s ease-in-out infinite;
}
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

.header-right {
  display: flex;
  align-items: center;
  gap: 20px;
}

.hdr-stat {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 1px;
}
.hdr-stat-val {
  font-family: var(--font-hud);
  font-size: 14px;
  font-weight: 700;
  color: var(--gold);
}
.hdr-stat-lbl {
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--text-dim);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.avatar {
  width: 32px; height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--cyan), var(--gold));
  display: flex; align-items: center; justify-content: center;
  font-family: var(--font-hud);
  font-size: 12px;
  font-weight: 700;
  color: var(--dark);
  border: 2px solid var(--cyan);
  box-shadow: 0 0 12px rgba(0,255,194,0.4);
}

/* ‚îÄ‚îÄ LEFT NAV ‚îÄ‚îÄ */
nav {
  grid-column: 1;
  grid-row: 2 / 4;
  background: rgba(5,10,14,0.9);
  border-right: 1px solid var(--panel-border);
  padding: 20px 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
  z-index: 50;
}

.nav-section {
  padding: 8px 16px 4px;
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--text-dim);
  letter-spacing: 0.2em;
  text-transform: uppercase;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 20px;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
  border-left: 2px solid transparent;
  font-family: var(--font-body);
  font-weight: 600;
  font-size: 14px;
  color: var(--text-dim);
  letter-spacing: 0.05em;
  text-transform: uppercase;
  user-select: none;
}
.nav-item:hover {
  color: var(--cyan);
  background: rgba(0,255,194,0.04);
  border-left-color: rgba(0,255,194,0.4);
}
.nav-item.active {
  color: var(--cyan);
  background: rgba(0,255,194,0.07);
  border-left-color: var(--cyan);
}
.nav-item.active .nav-icon { color: var(--cyan); filter: drop-shadow(0 0 6px var(--cyan)); }

.nav-icon { font-size: 16px; width: 20px; text-align: center; }
.nav-badge {
  margin-left: auto;
  font-family: var(--font-mono);
  font-size: 9px;
  background: var(--cyan);
  color: var(--dark);
  padding: 1px 5px;
  border-radius: 2px;
  font-weight: 700;
}
.nav-badge.gold { background: var(--gold); }
.nav-badge.red { background: var(--red); }

/* ‚îÄ‚îÄ MAIN CONTENT ‚îÄ‚îÄ */
main {
  grid-column: 2;
  grid-row: 2 / 4;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 24px;
  scrollbar-width: thin;
  scrollbar-color: var(--panel-border) transparent;
}

/* ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ */
.right-panel {
  grid-column: 3;
  grid-row: 2 / 4;
  background: rgba(5,10,14,0.9);
  border-left: 1px solid var(--panel-border);
  padding: 20px 16px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--panel-border) transparent;
}

/* ‚îÄ‚îÄ PANEL CARD ‚îÄ‚îÄ */
.panel-card {
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  padding: 16px;
  position: relative;
  overflow: hidden;
}
.panel-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--cyan), transparent);
  opacity: 0.5;
}
.panel-title {
  font-family: var(--font-hud);
  font-size: 10px;
  font-weight: 700;
  color: var(--cyan);
  letter-spacing: 0.2em;
  text-transform: uppercase;
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.panel-title::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--panel-border);
}

/* ‚îÄ‚îÄ SECTION VIEWS ‚îÄ‚îÄ */
.view { display: none; }
.view.active { display: block; animation: fadeIn 0.4s ease; }
@keyframes fadeIn { from { opacity:0; transform: translateY(8px); } to { opacity:1; transform: translateY(0); } }

.section-header {
  margin-bottom: 24px;
}
.section-title {
  font-family: var(--font-hud);
  font-size: clamp(18px, 2.5vw, 28px);
  font-weight: 900;
  color: var(--cyan);
  letter-spacing: 0.15em;
  text-transform: uppercase;
  text-shadow: 0 0 30px rgba(0,255,194,0.3);
}
.section-sub {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-dim);
  letter-spacing: 0.1em;
  margin-top: 4px;
}

/* ‚îÄ‚îÄ MAP VIEW ‚îÄ‚îÄ */
.map-container {
  position: relative;
  width: 100%;
  height: calc(100vh - 200px);
  min-height: 400px;
  background: var(--dark2);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  overflow: hidden;
}

.map-canvas {
  width: 100%;
  height: 100%;
  position: relative;
}

/* SVG MAP */
.map-svg {
  width: 100%; height: 100%;
  position: absolute; inset: 0;
}

/* MAP HUD OVERLAYS */
.map-hud {
  position: absolute;
  inset: 0;
  pointer-events: none;
}
.map-corner {
  position: absolute;
  width: 20px; height: 20px;
  border-color: var(--cyan);
  border-style: solid;
  opacity: 0.6;
}
.map-corner.tl { top: 12px; left: 12px; border-width: 2px 0 0 2px; }
.map-corner.tr { top: 12px; right: 12px; border-width: 2px 2px 0 0; }
.map-corner.bl { bottom: 12px; left: 12px; border-width: 0 0 2px 2px; }
.map-corner.br { bottom: 12px; right: 12px; border-width: 0 2px 2px 0; }

.map-coords {
  position: absolute;
  bottom: 16px;
  left: 16px;
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--cyan);
  opacity: 0.7;
}

.map-scale {
  position: absolute;
  bottom: 16px;
  right: 16px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--text-dim);
}
.scale-bar {
  width: 60px; height: 2px;
  background: var(--cyan);
  opacity: 0.5;
}

/* PLAYER DOT */
.player-dot {
  position: absolute;
  width: 14px; height: 14px;
  border-radius: 50%;
  background: var(--cyan);
  box-shadow: 0 0 0 4px rgba(0,255,194,0.2), 0 0 20px var(--cyan);
  transform: translate(-50%, -50%);
  z-index: 10;
}
.player-dot::after {
  content: '';
  position: absolute;
  inset: -8px;
  border-radius: 50%;
  border: 2px solid var(--cyan);
  opacity: 0.4;
  animation: ping 2s ease-out infinite;
}
@keyframes ping {
  0% { transform: scale(0.5); opacity: 0.8; }
  100% { transform: scale(2); opacity: 0; }
}

/* HUNT MARKERS */
.hunt-marker {
  position: absolute;
  transform: translate(-50%, -50%);
  z-index: 8;
  cursor: pointer;
  pointer-events: all;
}
.hunt-marker-inner {
  width: 24px; height: 24px;
  background: rgba(245,189,25,0.15);
  border: 2px solid var(--gold);
  border-radius: 4px;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px;
  box-shadow: 0 0 12px rgba(245,189,25,0.4);
  animation: float 3s ease-in-out infinite;
  transition: all 0.2s;
}
.hunt-marker:hover .hunt-marker-inner {
  background: rgba(245,189,25,0.3);
  transform: scale(1.2);
  box-shadow: 0 0 24px rgba(245,189,25,0.8);
}
@keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-4px)} }

/* USER MARKERS */
.user-marker {
  position: absolute;
  transform: translate(-50%, -50%);
  z-index: 9;
  cursor: pointer;
  pointer-events: all;
}
.user-marker-dot {
  width: 10px; height: 10px;
  border-radius: 50%;
  border: 2px solid var(--cyan);
}
.user-marker-dot.green { background: #00C878; border-color: #00C878; box-shadow: 0 0 8px #00C878; }
.user-marker-dot.yellow { background: var(--gold); border-color: var(--gold); box-shadow: 0 0 8px var(--gold); }
.user-marker-dot.red { background: var(--red); border-color: var(--red); box-shadow: 0 0 8px var(--red); }

/* HEATMAP ZONES */
.heatzone {
  position: absolute;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,56,96,0.25) 0%, transparent 70%);
  transform: translate(-50%, -50%);
  animation: heat-pulse 3s ease-in-out infinite;
  pointer-events: none;
}
@keyframes heat-pulse { 0%,100%{opacity:0.6} 50%{opacity:1} }

/* ‚îÄ‚îÄ HOT/COLD COMPASS ‚îÄ‚îÄ */
.compass-wrap {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 24px;
  padding: 40px 0;
}

.compass-outer {
  position: relative;
  width: 240px; height: 240px;
}

.compass-ring {
  position: absolute; inset: 0;
  border-radius: 50%;
  border: 2px solid;
  display: flex; align-items: center; justify-content: center;
}
.compass-ring-1 { border-color: rgba(0,255,194,0.15); }
.compass-ring-2 { inset: 20px; border-color: rgba(0,255,194,0.25); }
.compass-ring-3 { inset: 40px; border-color: rgba(0,255,194,0.4); }

.compass-center {
  position: absolute;
  inset: 60px;
  border-radius: 50%;
  background: var(--dark2);
  border: 2px solid var(--cyan);
  box-shadow: 0 0 20px rgba(0,255,194,0.3), inset 0 0 20px rgba(0,255,194,0.05);
  display: flex; align-items: center; justify-content: center;
  flex-direction: column;
  gap: 4px;
}
.compass-temp {
  font-family: var(--font-hud);
  font-size: 22px;
  font-weight: 900;
  color: var(--cyan);
  text-shadow: 0 0 20px var(--cyan);
}
.compass-label {
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--text-dim);
  letter-spacing: 0.1em;
}

.compass-needle {
  position: absolute;
  inset: 0;
  display: flex; align-items: center; justify-content: center;
  animation: rotate-needle 4s ease-in-out infinite alternate;
}
@keyframes rotate-needle { from{transform:rotate(0deg)} to{transform:rotate(45deg)} }

.needle-line {
  width: 2px;
  height: 100px;
  background: linear-gradient(to top, transparent, var(--gold));
  transform-origin: bottom;
  margin-bottom: 20px;
  box-shadow: 0 0 8px var(--gold);
  border-radius: 2px;
}

.compass-ticks {
  position: absolute; inset: 8px;
  border-radius: 50%;
}

.compass-dir {
  position: absolute;
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--text-dim);
  font-weight: 700;
}
.compass-dir.n { top: 4px; left: 50%; transform: translateX(-50%); color: var(--cyan); }
.compass-dir.s { bottom: 4px; left: 50%; transform: translateX(-50%); }
.compass-dir.e { right: 4px; top: 50%; transform: translateY(-50%); }
.compass-dir.w { left: 4px; top: 50%; transform: translateY(-50%); }

.pulse-ring {
  position: absolute;
  inset: -10px;
  border-radius: 50%;
  border: 2px solid rgba(0,255,194,0.3);
  animation: expand-ring 2s ease-out infinite;
}
.pulse-ring:nth-child(2) { animation-delay: 0.7s; }
.pulse-ring:nth-child(3) { animation-delay: 1.4s; }
@keyframes expand-ring { 0%{inset:-10px;opacity:0.8} 100%{inset:-50px;opacity:0} }

/* PROXIMITY BAR */
.proximity-meter {
  width: 100%;
  max-width: 300px;
}
.prox-label {
  display: flex;
  justify-content: space-between;
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--text-dim);
  margin-bottom: 6px;
}
.prox-bar {
  height: 6px;
  background: rgba(0,255,194,0.1);
  border-radius: 2px;
  overflow: hidden;
}
.prox-fill {
  height: 100%;
  width: 68%;
  background: linear-gradient(90deg, #0080FF, var(--cyan), var(--gold), var(--red));
  background-size: 300%;
  background-position: 68%;
  border-radius: 2px;
  box-shadow: 0 0 8px var(--cyan);
  transition: width 0.5s ease;
}

/* ‚îÄ‚îÄ AR SCANNER VIEW ‚îÄ‚îÄ */
.ar-viewport {
  position: relative;
  width: 100%;
  height: 380px;
  background: #000;
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  overflow: hidden;
  display: flex; align-items: center; justify-content: center;
}

.ar-camera-sim {
  position: absolute; inset: 0;
  background: 
    linear-gradient(rgba(0,30,20,0.6), rgba(0,30,20,0.6)),
    repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(0,255,194,0.03) 40px, rgba(0,255,194,0.03) 41px),
    repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(0,255,194,0.03) 40px, rgba(0,255,194,0.03) 41px);
}

.ar-scan-line {
  position: absolute;
  left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--cyan), transparent);
  box-shadow: 0 0 12px var(--cyan);
  animation: scan-down 3s linear infinite;
}
@keyframes scan-down { 0%{top:0} 100%{top:100%} }

.ar-target-box {
  position: absolute;
  width: 160px; height: 160px;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%);
}
.ar-target-box::before, .ar-target-box::after,
.ar-corner-br, .ar-corner-bl {
  content: '';
  position: absolute;
  width: 24px; height: 24px;
  border-color: var(--cyan);
  border-style: solid;
}
.ar-target-box::before { top: 0; left: 0; border-width: 2px 0 0 2px; }
.ar-target-box::after { top: 0; right: 0; border-width: 2px 2px 0 0; }
.ar-corner-br { bottom: 0; right: 0; border-width: 0 2px 2px 0; }
.ar-corner-bl { bottom: 0; left: 0; border-width: 0 0 2px 2px; }

.ar-crate {
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%);
  width: 80px; height: 80px;
  perspective: 200px;
}

.crate-3d {
  width: 60px; height: 60px;
  position: relative;
  transform-style: preserve-3d;
  animation: crate-spin 8s linear infinite;
  margin: 10px auto;
}
@keyframes crate-spin { to { transform: rotateY(360deg) rotateX(15deg); } }

.crate-face {
  position: absolute;
  width: 60px; height: 60px;
  background: rgba(245,189,25,0.1);
  border: 1px solid rgba(245,189,25,0.6);
  display: flex; align-items: center; justify-content: center;
  font-size: 20px;
  box-shadow: inset 0 0 20px rgba(245,189,25,0.2);
}
.crate-face.front { transform: translateZ(30px); }
.crate-face.back { transform: rotateY(180deg) translateZ(30px); }
.crate-face.left { transform: rotateY(-90deg) translateZ(30px); }
.crate-face.right { transform: rotateY(90deg) translateZ(30px); }
.crate-face.top { transform: rotateX(90deg) translateZ(30px); }
.crate-face.bottom { transform: rotateX(-90deg) translateZ(30px); }

.ar-detect-label {
  position: absolute;
  top: calc(50% + 95px);
  left: 50%; transform: translateX(-50%);
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--gold);
  letter-spacing: 0.15em;
  text-transform: uppercase;
  animation: flicker 0.5s ease-in-out infinite alternate;
  white-space: nowrap;
}
@keyframes flicker { from{opacity:1} to{opacity:0.7} }

.ar-hud-data {
  position: absolute;
  left: 16px; top: 16px;
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--cyan);
  opacity: 0.8;
  line-height: 1.8;
}
.ar-hud-data-r {
  position: absolute;
  right: 16px; top: 16px;
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--gold);
  opacity: 0.8;
  line-height: 1.8;
  text-align: right;
}

.ar-btn {
  margin-top: 16px;
  display: flex;
  gap: 12px;
  justify-content: center;
}

/* ‚îÄ‚îÄ RIDDLES ‚îÄ‚îÄ */
.riddle-chain {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.riddle-node {
  display: flex;
  gap: 16px;
  align-items: flex-start;
}
.riddle-connector {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
}
.riddle-num {
  width: 32px; height: 32px;
  border-radius: 50%;
  border: 2px solid;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--font-hud);
  font-size: 12px;
  font-weight: 700;
  flex-shrink: 0;
}
.riddle-num.done { border-color: var(--cyan); color: var(--cyan); background: rgba(0,255,194,0.1); }
.riddle-num.active { border-color: var(--gold); color: var(--gold); background: rgba(245,189,25,0.1); box-shadow: 0 0 12px rgba(245,189,25,0.4); }
.riddle-num.locked { border-color: rgba(200,230,240,0.2); color: var(--text-dim); }

.riddle-line {
  width: 2px;
  height: 20px;
  background: var(--panel-border);
  margin: 4px 0;
}
.riddle-line.done { background: var(--cyan); box-shadow: 0 0 4px var(--cyan); }

.riddle-content {
  flex: 1;
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  padding: 12px 16px;
  margin-bottom: 4px;
}
.riddle-content.active-riddle { border-color: rgba(245,189,25,0.4); background: rgba(245,189,25,0.04); }
.riddle-content.locked-riddle { opacity: 0.4; filter: blur(0.5px); }

.riddle-content h4 {
  font-family: var(--font-hud);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: 0.1em;
  margin-bottom: 6px;
}
.riddle-content.active-riddle h4 { color: var(--gold); }
.riddle-content.done-riddle h4 { color: var(--cyan); }

.riddle-text {
  font-family: var(--font-body);
  font-size: 14px;
  color: var(--text);
  line-height: 1.5;
}
.riddle-answer-box {
  margin-top: 10px;
  display: flex;
  gap: 8px;
}

/* ‚îÄ‚îÄ SOCIAL/MAP STATUS ‚îÄ‚îÄ */
.status-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-bottom: 16px;
}
.status-card {
  padding: 12px;
  border: 2px solid;
  border-radius: 4px;
  cursor: pointer;
  text-align: center;
  transition: all 0.2s;
  user-select: none;
}
.status-card.lfg { border-color: #00C878; background: rgba(0,200,120,0.07); }
.status-card.chat { border-color: var(--gold); background: rgba(245,189,25,0.07); }
.status-card.ghost { border-color: var(--red); background: rgba(255,56,96,0.07); }
.status-card:hover { transform: translateY(-2px); }
.status-card.selected { box-shadow: 0 0 16px currentColor; }
.status-card .s-icon { font-size: 22px; }
.status-card .s-label { font-family: var(--font-hud); font-size: 10px; font-weight: 700; letter-spacing: 0.1em; margin-top: 4px; }
.status-card.lfg .s-label { color: #00C878; }
.status-card.chat .s-label { color: var(--gold); }
.status-card.ghost .s-label { color: var(--red); }

/* CHAT BOX */
.chat-box {
  background: var(--dark2);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  height: 200px;
  overflow-y: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 8px;
  scrollbar-width: thin;
  scrollbar-color: var(--panel-border) transparent;
}

.chat-msg {
  display: flex;
  gap: 8px;
  align-items: flex-start;
  animation: slideIn 0.3s ease;
}
@keyframes slideIn { from{opacity:0;transform:translateY(4px)} to{opacity:1;transform:translateY(0)} }

.chat-avatar {
  width: 24px; height: 24px;
  border-radius: 50%;
  flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 10px;
  font-weight: 700;
  font-family: var(--font-hud);
}

.chat-bubble {
  background: rgba(0,255,194,0.05);
  border: 1px solid rgba(0,255,194,0.1);
  border-radius: 2px 6px 6px 6px;
  padding: 6px 10px;
  font-family: var(--font-body);
  font-size: 13px;
  color: var(--text);
  flex: 1;
}
.chat-bubble.mine {
  background: rgba(0,255,194,0.08);
  border-color: rgba(0,255,194,0.2);
  border-radius: 6px 2px 6px 6px;
}

.chat-name {
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--text-dim);
  margin-bottom: 2px;
}

.chat-input-row {
  display: flex;
  gap: 8px;
}

/* ‚îÄ‚îÄ VAULT / ECONOMY ‚îÄ‚îÄ */
.coin-display {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 20px;
  background: linear-gradient(135deg, rgba(245,189,25,0.1), rgba(245,189,25,0.03));
  border: 1px solid rgba(245,189,25,0.3);
  border-radius: 4px;
  margin-bottom: 20px;
}
.coin-icon {
  width: 56px; height: 56px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--gold), #C8960F);
  display: flex; align-items: center; justify-content: center;
  font-size: 28px;
  box-shadow: 0 0 24px rgba(245,189,25,0.5);
  animation: coin-glow 2s ease-in-out infinite;
}
@keyframes coin-glow { 0%,100%{box-shadow:0 0 24px rgba(245,189,25,0.5)} 50%{box-shadow:0 0 48px rgba(245,189,25,0.9)} }
.coin-amount {
  font-family: var(--font-hud);
  font-size: 42px;
  font-weight: 900;
  color: var(--gold);
  line-height: 1;
}
.coin-sub { font-family: var(--font-mono); font-size: 10px; color: var(--text-dim); }

.bazaar-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 12px;
  margin-bottom: 20px;
}
.bazaar-item {
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  padding: 16px 12px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
  overflow: hidden;
}
.bazaar-item:hover {
  border-color: var(--gold);
  background: rgba(245,189,25,0.07);
  transform: translateY(-2px);
}
.bazaar-item::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--gold), transparent);
  opacity: 0;
  transition: opacity 0.2s;
}
.bazaar-item:hover::before { opacity: 1; }
.bazaar-emoji { font-size: 32px; }
.bazaar-name { font-family: var(--font-body); font-size: 13px; font-weight: 600; color: var(--text); margin-top: 8px; }
.bazaar-price { font-family: var(--font-hud); font-size: 14px; font-weight: 700; color: var(--gold); margin-top: 4px; }
.bazaar-place { font-family: var(--font-mono); font-size: 9px; color: var(--text-dim); margin-top: 2px; }

/* REDEMPTION MODAL */
.modal {
  display: none;
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.85);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(4px);
}
.modal.open { display: flex; }

.modal-box {
  width: 340px;
  background: var(--dark2);
  border: 1px solid var(--gold);
  border-radius: 4px;
  padding: 32px;
  text-align: center;
  box-shadow: 0 0 60px rgba(245,189,25,0.3);
  animation: modal-in 0.3s cubic-bezier(0.34,1.56,0.64,1);
  position: relative;
  overflow: hidden;
}
@keyframes modal-in { from{transform:scale(0.7);opacity:0} to{transform:scale(1);opacity:1} }

.modal-shimmer {
  position: absolute;
  top: -100%;
  left: -100%;
  width: 300%;
  height: 300%;
  background: linear-gradient(45deg, transparent 40%, rgba(245,189,25,0.1) 50%, transparent 60%);
  animation: shimmer 2s linear infinite;
}
@keyframes shimmer { to{transform:translateX(50%) translateY(50%)} }

.modal-qr {
  width: 120px; height: 120px;
  background: #fff;
  border-radius: 4px;
  margin: 16px auto;
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  grid-template-rows: repeat(7, 1fr);
  padding: 8px;
  gap: 2px;
}
.qr-cell {
  border-radius: 1px;
  background: #000;
}

.modal-code {
  font-family: var(--font-hud);
  font-size: 24px;
  font-weight: 900;
  color: var(--gold);
  letter-spacing: 0.3em;
  text-shadow: 0 0 20px var(--gold);
  margin: 8px 0;
}
.modal-timer {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--red);
}
.modal-anti-fraud {
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--text-dim);
  margin-top: 8px;
  letter-spacing: 0.05em;
}

/* LEADERBOARD */
.leaderboard {
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.lb-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  transition: all 0.2s;
}
.lb-row:hover { border-color: rgba(0,255,194,0.3); background: rgba(0,255,194,0.04); }
.lb-row.top1 { border-color: var(--gold); background: rgba(245,189,25,0.07); }
.lb-row.top2 { border-color: rgba(192,192,192,0.4); }
.lb-row.top3 { border-color: rgba(184,115,51,0.4); }

.lb-rank {
  font-family: var(--font-hud);
  font-size: 16px;
  font-weight: 900;
  width: 28px;
  text-align: center;
}
.lb-row.top1 .lb-rank { color: var(--gold); text-shadow: 0 0 12px var(--gold); }
.lb-row.top2 .lb-rank { color: #C0C0C0; }
.lb-row.top3 .lb-rank { color: #B8733B; }

.lb-avatar {
  width: 28px; height: 28px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--font-hud);
  font-size: 10px;
  font-weight: 700;
}

.lb-info { flex: 1; }
.lb-name { font-family: var(--font-body); font-size: 14px; font-weight: 600; color: var(--text); }
.lb-area { font-family: var(--font-mono); font-size: 9px; color: var(--text-dim); }

.lb-score {
  font-family: var(--font-hud);
  font-size: 14px;
  font-weight: 700;
  color: var(--cyan);
}

/* BADGES */
.badge-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  gap: 10px;
}
.badge-item {
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  padding: 10px;
  cursor: pointer;
  transition: all 0.2s;
}
.badge-item.earned { border-color: var(--gold); background: rgba(245,189,25,0.07); }
.badge-item.earned:hover { transform: scale(1.05); box-shadow: 0 0 16px rgba(245,189,25,0.4); }
.badge-item.locked-b { opacity: 0.3; filter: grayscale(1); }
.badge-emoji { font-size: 24px; }
.badge-name { font-family: var(--font-mono); font-size: 8px; color: var(--text-dim); text-align: center; }

/* ‚îÄ‚îÄ ADMIN PANEL ‚îÄ‚îÄ */
.admin-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.admin-map-tool {
  position: relative;
  height: 300px;
  background: var(--dark2);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  overflow: hidden;
  cursor: crosshair;
}

.drop-indicator {
  position: absolute;
  width: 16px; height: 16px;
  border-radius: 50%;
  background: var(--gold);
  transform: translate(-50%, -50%);
  box-shadow: 0 0 12px var(--gold);
  pointer-events: none;
  animation: drop-pulse 1s ease-in-out infinite;
  display: none;
}
@keyframes drop-pulse { 0%,100%{transform:translate(-50%,-50%) scale(1)} 50%{transform:translate(-50%,-50%) scale(1.5);opacity:0.5} }

/* ‚îÄ‚îÄ SAFETY VIEW ‚îÄ‚îÄ */
.sos-btn {
  width: 160px; height: 160px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,56,96,0.3), rgba(255,56,96,0.1));
  border: 3px solid var(--red);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  margin: 0 auto;
  box-shadow: 0 0 40px rgba(255,56,96,0.3);
  transition: all 0.2s;
  user-select: none;
}
.sos-btn:hover {
  background: radial-gradient(circle, rgba(255,56,96,0.5), rgba(255,56,96,0.2));
  box-shadow: 0 0 60px rgba(255,56,96,0.6);
  transform: scale(1.05);
}
.sos-btn:active { transform: scale(0.97); }
.sos-text { font-family: var(--font-hud); font-size: 28px; font-weight: 900; color: var(--red); text-shadow: 0 0 20px var(--red); }
.sos-sub { font-family: var(--font-mono); font-size: 9px; color: rgba(255,56,96,0.7); }

.guard-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
}
.toggle-switch {
  width: 48px; height: 26px;
  background: var(--panel-border);
  border-radius: 13px;
  position: relative;
  cursor: pointer;
  transition: background 0.3s;
}
.toggle-switch.on { background: var(--cyan); box-shadow: 0 0 12px rgba(0,255,194,0.5); }
.toggle-knob {
  position: absolute;
  width: 20px; height: 20px;
  border-radius: 50%;
  background: white;
  top: 3px; left: 3px;
  transition: transform 0.3s;
}
.toggle-switch.on .toggle-knob { transform: translateX(22px); }

/* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
.btn {
  font-family: var(--font-hud);
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  padding: 10px 20px;
  border: 1px solid;
  border-radius: 2px;
  cursor: pointer;
  transition: all 0.2s;
  background: transparent;
  user-select: none;
}
.btn-cyan { border-color: var(--cyan); color: var(--cyan); }
.btn-cyan:hover { background: rgba(0,255,194,0.1); box-shadow: 0 0 16px rgba(0,255,194,0.3); }
.btn-gold { border-color: var(--gold); color: var(--gold); }
.btn-gold:hover { background: rgba(245,189,25,0.1); box-shadow: 0 0 16px rgba(245,189,25,0.3); }
.btn-red { border-color: var(--red); color: var(--red); }
.btn-red:hover { background: rgba(255,56,96,0.1); box-shadow: 0 0 16px rgba(255,56,96,0.3); }
.btn-sm { padding: 6px 14px; font-size: 10px; }

/* INPUT */
.input-field {
  background: rgba(0,255,194,0.03);
  border: 1px solid var(--panel-border);
  border-radius: 2px;
  padding: 8px 12px;
  color: var(--text);
  font-family: var(--font-mono);
  font-size: 12px;
  outline: none;
  transition: border-color 0.2s;
  width: 100%;
}
.input-field:focus { border-color: var(--cyan); box-shadow: 0 0 8px rgba(0,255,194,0.2); }
.input-field::placeholder { color: var(--text-dim); }

/* TEXTAREA */
textarea.input-field { resize: none; height: 80px; }

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast {
  position: fixed;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--dark2);
  border: 1px solid var(--cyan);
  border-radius: 4px;
  padding: 10px 20px;
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--cyan);
  box-shadow: 0 0 24px rgba(0,255,194,0.3);
  z-index: 5000;
  opacity: 0;
  transition: opacity 0.3s;
  white-space: nowrap;
  pointer-events: none;
}
.toast.visible { opacity: 1; }

/* ‚îÄ‚îÄ GYRO ANIMATION ‚îÄ‚îÄ */
.gyro-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  padding: 24px 0;
}
.phone-icon {
  font-size: 64px;
  animation: shake 0.5s ease-in-out infinite;
  display: none;
}
@keyframes shake {
  0%,100%{transform:rotate(-5deg) translate(-2px,-2px)}
  25%{transform:rotate(5deg) translate(2px,-2px)}
  50%{transform:rotate(-3deg) translate(2px,2px)}
  75%{transform:rotate(3deg) translate(-2px,2px)}
}
.phone-icon.shaking { display: block; }

.gyro-text {
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--text-dim);
  text-align: center;
}

/* ‚îÄ‚îÄ OFFLINE PACKS ‚îÄ‚îÄ */
.pack-list { display: flex; flex-direction: column; gap: 10px; }
.pack-item {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 16px;
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  transition: all 0.2s;
}
.pack-item:hover { border-color: var(--cyan); }
.pack-icon { font-size: 28px; }
.pack-info { flex: 1; }
.pack-name { font-family: var(--font-body); font-size: 15px; font-weight: 600; color: var(--text); }
.pack-meta { font-family: var(--font-mono); font-size: 10px; color: var(--text-dim); }
.pack-progress {
  width: 80px;
}
.pack-bar {
  height: 4px;
  background: rgba(0,255,194,0.1);
  border-radius: 2px;
  overflow: hidden;
  margin-top: 4px;
}
.pack-fill {
  height: 100%;
  background: var(--cyan);
  box-shadow: 0 0 6px var(--cyan);
  border-radius: 2px;
  transition: width 0.4s ease;
}
.pack-size { font-family: var(--font-mono); font-size: 10px; color: var(--text-dim); text-align: right; }

/* ‚îÄ‚îÄ ADMIN BROADCAST ‚îÄ‚îÄ */
.broadcast-box {
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.radius-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 4px;
  background: var(--panel-border);
  border-radius: 2px;
  outline: none;
}
.radius-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px; height: 16px;
  border-radius: 50%;
  background: var(--cyan);
  cursor: pointer;
  box-shadow: 0 0 8px var(--cyan);
}

/* ‚îÄ‚îÄ BOTTOM BAR ‚îÄ‚îÄ */
.bottom-bar {
  display: none;
}

/* ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--panel-border); border-radius: 2px; }

/* GRID GAP */
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.mb-12 { margin-bottom: 12px; }
.mb-20 { margin-bottom: 20px; }
.flex-center { display: flex; align-items: center; justify-content: center; }
.flex-between { display: flex; align-items: center; justify-content: space-between; }
.gap-8 { gap: 8px; }
.gap-12 { gap: 12px; }

/* ‚îÄ‚îÄ LIVE FEED RIGHT PANEL ‚îÄ‚îÄ */
.feed-item {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  padding: 8px 0;
  border-bottom: 1px solid var(--panel-border);
}
.feed-item:last-child { border-bottom: none; }
.feed-dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; margin-top: 5px; }
.feed-text { font-family: var(--font-mono); font-size: 10px; color: var(--text-dim); line-height: 1.5; }
.feed-text strong { color: var(--cyan); }
.feed-time { font-size: 9px; color: rgba(200,230,240,0.3); }

/* MINI STAT */
.mini-stats { display: flex; gap: 8px; flex-wrap: wrap; }
.mini-stat {
  flex: 1;
  min-width: 80px;
  background: var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 4px;
  padding: 10px;
  text-align: center;
}
.mini-stat-val {
  font-family: var(--font-hud);
  font-size: 20px;
  font-weight: 700;
  color: var(--cyan);
}
.mini-stat-lbl {
  font-family: var(--font-mono);
  font-size: 9px;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 0.1em;
}
</style>
</head>
<body>

<div class="noise"></div>

<!-- BOOT SCREEN -->
<div id="boot">
  <div class="boot-logo">OKHOTA</div>
  <div class="boot-sub">‚óà Tactical Urban Hunt Platform ‚óà</div>
  <div class="boot-bar-wrap"><div class="boot-bar"></div></div>
  <div class="boot-status" id="bootStatus">INITIALIZING TACTICAL SYSTEMS...</div>
</div>

<!-- REDEMPTION MODAL -->
<div class="modal" id="redeemModal">
  <div class="modal-box">
    <div class="modal-shimmer"></div>
    <div style="font-family:var(--font-hud);font-size:11px;color:var(--gold);letter-spacing:0.2em;text-transform:uppercase;">‚óà Bazaar Redemption ‚óà</div>
    <div style="font-size:32px;margin:8px 0;">üßã</div>
    <div style="font-family:var(--font-body);font-size:14px;color:var(--text);margin-bottom:4px;" id="redeemItemName">Kada Chai ‚Äî SM Street</div>
    <div class="modal-code" id="redeemCode">HNT-4X7K</div>
    <div class="modal-qr" id="qrGrid"></div>
    <div class="modal-timer" id="redeemTimer">‚è± Expires in: 04:59</div>
    <div class="modal-anti-fraud">üîí Anti-fraud verified ¬∑ Single use ¬∑ Server-signed</div>
    <div style="display:flex;gap:8px;justify-content:center;margin-top:16px;">
      <button class="btn btn-gold btn-sm" onclick="closeModal()">CLOSE</button>
    </div>
  </div>
</div>

<!-- SOS BROADCAST MODAL -->
<div class="modal" id="sosModal">
  <div class="modal-box" style="border-color:var(--red);box-shadow:0 0 60px rgba(255,56,96,0.5);">
    <div style="font-family:var(--font-hud);font-size:11px;color:var(--red);letter-spacing:0.2em;">‚ö† SOS BROADCAST ACTIVE</div>
    <div style="font-size:48px;margin:16px 0;">üÜò</div>
    <div style="font-family:var(--font-body);font-size:14px;color:var(--text);">Live location broadcasting to<br><strong style="color:var(--cyan);">3 trusted contacts</strong></div>
    <div style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);margin-top:8px;">üìç 11.2588¬∞ N, 75.7804¬∞ E ¬∑ Calicut Beach</div>
    <div style="font-family:var(--font-mono);font-size:9px;color:rgba(255,56,96,0.7);margin-top:4px;" id="sosTimer">Broadcasting for: 00:05</div>
    <div style="display:flex;gap:8px;justify-content:center;margin-top:20px;">
      <button class="btn btn-red btn-sm" onclick="closeSosModal()">CANCEL SOS</button>
    </div>
  </div>
</div>

<!-- APP -->
<div id="app">
  <!-- HEADER -->
  <header>
    <div class="header-logo">OKH<span>‚óà</span>TA</div>
    <div class="header-center">
      <div class="status-dot"></div>
      <span>LIVE ¬∑ CALICUT ZONE-7</span>
    </div>
    <div class="header-right">
      <div class="hdr-stat">
        <div class="hdr-stat-val" id="headerCoins">2,840</div>
        <div class="hdr-stat-lbl">O-Coins</div>
      </div>
      <div class="hdr-stat">
        <div class="hdr-stat-val" style="color:var(--cyan);">47</div>
        <div class="hdr-stat-lbl">Rank</div>
      </div>
      <div class="avatar">AX</div>
    </div>
  </header>

  <!-- LEFT NAV -->
  <nav>
    <div class="nav-section">Hunt Engine</div>
    <div class="nav-item active" data-view="map">
      <span class="nav-icon">‚¨°</span> Live Map
      <span class="nav-badge red">3</span>
    </div>
    <div class="nav-item" data-view="ar">
      <span class="nav-icon">‚óé</span> AR Scanner
    </div>
    <div class="nav-item" data-view="compass">
      <span class="nav-icon">‚óâ</span> Hot/Cold
    </div>
    <div class="nav-item" data-view="riddles">
      <span class="nav-icon">‚¨ó</span> Riddles
      <span class="nav-badge gold">1</span>
    </div>
    <div class="nav-item" data-view="offline">
      <span class="nav-icon">‚¨°</span> Offline Packs
    </div>

    <div class="nav-section">Social</div>
    <div class="nav-item" data-view="social">
      <span class="nav-icon">‚¨ü</span> Proximity Chat
      <span class="nav-badge">5</span>
    </div>

    <div class="nav-section">Economy</div>
    <div class="nav-item" data-view="vault">
      <span class="nav-icon">‚óÜ</span> Vault & Bazaar
    </div>
    <div class="nav-item" data-view="leaderboard">
      <span class="nav-icon">‚ñ≤</span> Leaderboard
    </div>

    <div class="nav-section">Safety</div>
    <div class="nav-item" data-view="safety">
      <span class="nav-icon">‚äï</span> The Shield
    </div>

    <div class="nav-section">Admin</div>
    <div class="nav-item" data-view="admin">
      <span class="nav-icon">‚¨õ</span> Command Center
    </div>
  </nav>

  <!-- MAIN -->
  <main>

    <!-- MAP VIEW -->
    <div class="view active" id="view-map">
      <div class="section-header">
        <div class="section-title">Live Tactical Map</div>
        <div class="section-sub">CALICUT CITY ¬∑ 23 HUNTERS ACTIVE ¬∑ ZONE-7 HOT</div>
      </div>
      <div class="map-container">
        <svg class="map-svg" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
          <!-- Base grid -->
          <defs>
            <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
              <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(0,255,194,0.06)" stroke-width="1"/>
            </pattern>
            <radialGradient id="heatGrad1" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#FF3860" stop-opacity="0.3"/>
              <stop offset="100%" stop-color="#FF3860" stop-opacity="0"/>
            </radialGradient>
            <radialGradient id="heatGrad2" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#FF3860" stop-opacity="0.2"/>
              <stop offset="100%" stop-color="#FF3860" stop-opacity="0"/>
            </radialGradient>
            <filter id="glow">
              <feGaussianBlur stdDeviation="2" result="blur"/>
              <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>

          <!-- Background -->
          <rect width="800" height="500" fill="#070F18"/>
          <rect width="800" height="500" fill="url(#grid)"/>

          <!-- Roads - Main arteries -->
          <line x1="0" y1="250" x2="800" y2="250" stroke="rgba(0,255,194,0.12)" stroke-width="12"/>
          <line x1="400" y1="0" x2="400" y2="500" stroke="rgba(0,255,194,0.12)" stroke-width="12"/>
          <line x1="0" y1="150" x2="800" y2="150" stroke="rgba(0,255,194,0.07)" stroke-width="6"/>
          <line x1="0" y1="380" x2="800" y2="380" stroke="rgba(0,255,194,0.07)" stroke-width="6"/>
          <line x1="200" y1="0" x2="200" y2="500" stroke="rgba(0,255,194,0.07)" stroke-width="6"/>
          <line x1="600" y1="0" x2="600" y2="500" stroke="rgba(0,255,194,0.07)" stroke-width="6"/>

          <!-- Diagonal roads -->
          <line x1="0" y1="0" x2="300" y2="300" stroke="rgba(0,255,194,0.05)" stroke-width="4"/>
          <line x1="800" y1="0" x2="500" y2="300" stroke="rgba(0,255,194,0.05)" stroke-width="4"/>
          <line x1="100" y1="500" x2="400" y2="250" stroke="rgba(0,255,194,0.05)" stroke-width="4"/>

          <!-- Road labels -->
          <text x="410" y="245" fill="rgba(0,255,194,0.3)" font-family="Share Tech Mono" font-size="10">SM STREET</text>
          <text x="205" y="245" fill="rgba(0,255,194,0.3)" font-family="Share Tech Mono" font-size="9">BEACH RD</text>
          <text x="150" y="245" fill="rgba(0,255,194,0.2)" font-family="Share Tech Mono" font-size="8" transform="rotate(-90,150,245)">MAVOOR RD</text>

          <!-- Buildings -->
          <rect x="50" y="80" width="60" height="50" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="130" y="60" width="40" height="70" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="450" y="80" width="80" height="50" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="550" y="50" width="50" height="80" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="50" y="290" width="70" height="60" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="140" y="310" width="40" height="50" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="450" y="280" width="90" height="70" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="650" y="290" width="60" height="60" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="280" y="60" width="80" height="60" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="280" y="390" width="80" height="60" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="630" y="160" width="70" height="50" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>
          <rect x="650" y="80" width="50" height="60" fill="rgba(0,255,194,0.04)" stroke="rgba(0,255,194,0.1)" stroke-width="1"/>

          <!-- POI Labels -->
          <text x="73" y="108" fill="rgba(200,230,240,0.3)" font-family="Share Tech Mono" font-size="7">MANANCHIRA</text>
          <text x="465" y="108" fill="rgba(200,230,240,0.3)" font-family="Share Tech Mono" font-size="7">BEACH PARK</text>
          <text x="295" y="92" fill="rgba(200,230,240,0.3)" font-family="Share Tech Mono" font-size="7">SWEET MEAT</text>
          <text x="462" y="308" fill="rgba(200,230,240,0.3)" font-family="Share Tech Mono" font-size="7">TOWN HALL</text>

          <!-- Heatmap zones -->
          <ellipse cx="400" cy="250" rx="100" ry="80" fill="url(#heatGrad1)"/>
          <ellipse cx="180" cy="200" rx="70" ry="55" fill="url(#heatGrad2)"/>
          <ellipse cx="620" cy="320" rx="60" ry="50" fill="url(#heatGrad2)"/>

          <!-- Zone border polygon -->
          <polygon points="150,100 650,100 700,400 100,400" 
            fill="none" stroke="rgba(0,255,194,0.15)" stroke-width="1" stroke-dasharray="8,4"/>
          <text x="155" y="118" fill="rgba(0,255,194,0.3)" font-family="Share Tech Mono" font-size="9">‚óà ACTIVE ZONE ¬∑ CALICUT-7</text>

          <!-- Water (beach) -->
          <rect x="720" y="0" width="80" height="500" fill="rgba(0,100,200,0.06)" stroke="rgba(0,150,255,0.15)" stroke-width="1"/>
          <text x="730" y="50" fill="rgba(0,150,255,0.3)" font-family="Share Tech Mono" font-size="9" transform="rotate(90,730,50)">ARABIAN SEA</text>

          <!-- Player position -->
          <circle cx="400" cy="250" r="8" fill="#00FFC2" opacity="0.9" filter="url(#glow)">
            <animate attributeName="r" values="8;14;8" dur="2s" repeatCount="indefinite"/>
            <animate attributeName="opacity" values="0.9;0.5;0.9" dur="2s" repeatCount="indefinite"/>
          </circle>
          <circle cx="400" cy="250" r="6" fill="#00FFC2"/>
          <text x="408" y="242" fill="rgba(0,255,194,0.8)" font-family="Share Tech Mono" font-size="8">YOU</text>

          <!-- Other players -->
          <circle cx="230" cy="180" r="5" fill="#00C878" filter="url(#glow)"/>
          <circle cx="310" cy="300" r="5" fill="#F5BD19" filter="url(#glow)"/>
          <circle cx="520" cy="200" r="5" fill="#00C878" filter="url(#glow)"/>
          <circle cx="550" cy="320" r="5" fill="#FF3860" filter="url(#glow)"/>
          <circle cx="170" cy="340" r="5" fill="#00C878" filter="url(#glow)"/>
          <circle cx="660" cy="200" r="5" fill="#F5BD19" filter="url(#glow)"/>
          <circle cx="470" cy="420" r="5" fill="#00C878" filter="url(#glow)"/>

          <!-- Loot crates -->
          <rect x="148" y="268" width="14" height="14" fill="rgba(245,189,25,0.2)" stroke="#F5BD19" stroke-width="1.5" rx="1">
            <animate attributeName="opacity" values="0.6;1;0.6" dur="1.5s" repeatCount="indefinite"/>
          </rect>
          <text x="152" y="279" fill="#F5BD19" font-family="Share Tech Mono" font-size="8">üì¶</text>

          <rect x="498" y="138" width="14" height="14" fill="rgba(245,189,25,0.2)" stroke="#F5BD19" stroke-width="1.5" rx="1">
            <animate attributeName="opacity" values="0.6;1;0.6" dur="2s" repeatCount="indefinite"/>
          </rect>
          <text x="502" y="149" fill="#F5BD19" font-family="Share Tech Mono" font-size="8">üì¶</text>

          <rect x="338" y="368" width="14" height="14" fill="rgba(245,189,25,0.2)" stroke="#F5BD19" stroke-width="1.5" rx="1">
            <animate attributeName="opacity" values="0.6;1;0.6" dur="2.5s" repeatCount="indefinite"/>
          </rect>
          <text x="342" y="379" fill="#F5BD19" font-family="Share Tech Mono" font-size="8">üì¶</text>

          <!-- Riddle anchor -->
          <circle cx="600" cy="150" r="10" fill="none" stroke="rgba(0,255,194,0.6)" stroke-width="2" stroke-dasharray="4,2">
            <animateTransform attributeName="transform" type="rotate" values="0 600 150;360 600 150" dur="5s" repeatCount="indefinite"/>
          </circle>
          <text x="594" y="154" fill="var(--cyan)" font-family="Share Tech Mono" font-size="10">‚ùì</text>
          <text x="615" y="148" fill="rgba(0,255,194,0.6)" font-family="Share Tech Mono" font-size="7">RIDDLE-3</text>
        </svg>

        <!-- HUD overlay -->
        <div class="map-hud">
          <div class="map-corner tl"></div>
          <div class="map-corner tr"></div>
          <div class="map-corner bl"></div>
          <div class="map-corner br"></div>
          <div class="map-coords">11.2588¬∞ N ¬∑ 75.7804¬∞ E</div>
          <div class="map-scale">
            <span>500m</span>
            <div class="scale-bar"></div>
          </div>
        </div>
      </div>

      <!-- Legend -->
      <div class="mini-stats" style="margin-top:12px;">
        <div class="mini-stat">
          <div class="mini-stat-val">23</div>
          <div class="mini-stat-lbl">Active Hunters</div>
        </div>
        <div class="mini-stat">
          <div class="mini-stat-val" style="color:var(--gold);">3</div>
          <div class="mini-stat-lbl">Loot Drops</div>
        </div>
        <div class="mini-stat">
          <div class="mini-stat-val" style="color:var(--red);">HOT</div>
          <div class="mini-stat-lbl">Zone Status</div>
        </div>
        <div class="mini-stat">
          <div class="mini-stat-val">1.2km</div>
          <div class="mini-stat-lbl">Nearest Crate</div>
        </div>
      </div>
    </div>

    <!-- AR SCANNER -->
    <div class="view" id="view-ar">
      <div class="section-header">
        <div class="section-title">AR Scanner</div>
        <div class="section-sub">ARCORE SIMULATION ¬∑ CRATE DETECTED ¬∑ 48M NE</div>
      </div>
      <div class="ar-viewport">
        <div class="ar-camera-sim"></div>
        <div class="ar-scan-line"></div>
        <div class="ar-hud-data">
          ALT: 12.4m<br>
          AZM: 047¬∞<br>
          DIST: 48.2m<br>
          CONF: 94%
        </div>
        <div class="ar-hud-data-r">
          CRATE #A7<br>
          TIER: GOLD<br>
          O-COINS: √ó120<br>
          DESPAWN: 08:42
        </div>
        <div class="ar-target-box">
          <div class="ar-corner-br"></div>
          <div class="ar-corner-bl"></div>
          <div class="ar-crate">
            <div class="crate-3d">
              <div class="crate-face front">üì¶</div>
              <div class="crate-face back">üì¶</div>
              <div class="crate-face left"></div>
              <div class="crate-face right"></div>
              <div class="crate-face top"></div>
              <div class="crate-face bottom"></div>
            </div>
          </div>
        </div>
        <div class="ar-detect-label">‚óà CRATE DETECTED ‚Äî TAP TO CLAIM ‚óà</div>
      </div>
      <div class="ar-btn">
        <button class="btn btn-gold" onclick="claimCrate()">‚ö° CLAIM CRATE</button>
        <button class="btn btn-cyan" onclick="showToast('Scanning area for more loot...')">‚óé DEEP SCAN</button>
      </div>
    </div>

    <!-- HOT/COLD COMPASS -->
    <div class="view" id="view-compass">
      <div class="section-header">
        <div class="section-title">Hot/Cold Navigator</div>
        <div class="section-sub">SENSORY PROXIMITY SYSTEM ¬∑ NO EXACT PINS</div>
      </div>
      <div class="compass-wrap">
        <div class="compass-outer">
          <div class="pulse-ring"></div>
          <div class="pulse-ring"></div>
          <div class="pulse-ring"></div>
          <div class="compass-ring compass-ring-1">
            <div class="compass-ring compass-ring-2">
              <div class="compass-ring compass-ring-3">
                <div class="compass-center">
                  <div class="compass-temp" id="compassTemp">üå° WARM</div>
                  <div class="compass-label" id="compassDist">~140M</div>
                </div>
              </div>
            </div>
          </div>
          <div class="compass-dir n">N</div>
          <div class="compass-dir s">S</div>
          <div class="compass-dir e">E</div>
          <div class="compass-dir w">W</div>
          <div class="compass-needle">
            <div class="needle-line"></div>
          </div>
        </div>

        <div class="proximity-meter">
          <div class="prox-label">
            <span>‚ùÑ COLD</span>
            <span>üî• HOT</span>
          </div>
          <div class="prox-bar">
            <div class="prox-fill" id="proxFill"></div>
          </div>
          <div style="display:flex;justify-content:center;gap:16px;margin-top:12px;">
            <button class="btn btn-cyan btn-sm" onclick="simulateProximity()">SIMULATE MOVEMENT</button>
          </div>
        </div>

        <div class="panel-card" style="max-width:320px;width:100%;">
          <div class="panel-title">Navigation Intel</div>
          <div style="font-family:var(--font-mono);font-size:11px;color:var(--text-dim);line-height:2;">
            TARGET: Crate #B3 ¬∑ Gold Tier<br>
            STATUS: <span style="color:var(--gold);">WARM ‚Äî GETTING CLOSER</span><br>
            HAPTIC: <span style="color:var(--cyan);">MEDIUM PULSE</span><br>
            ZONE: SM Street / Calicut Town
          </div>
        </div>
      </div>
    </div>

    <!-- RIDDLES -->
    <div class="view" id="view-riddles">
      <div class="section-header">
        <div class="section-title">Riddle Chain</div>
        <div class="section-sub">SEQUENTIAL PUZZLE HUNT ¬∑ CHAIN #7 ¬∑ CALICUT HERITAGE</div>
      </div>
      <div class="riddle-chain">
        <!-- Done -->
        <div class="riddle-node">
          <div class="riddle-connector">
            <div class="riddle-num done">‚úì</div>
            <div class="riddle-line done"></div>
          </div>
          <div class="riddle-content done-riddle">
            <h4>CLUE 1 ‚Äî COMPLETED ‚óà</h4>
            <div class="riddle-text" style="color:var(--text-dim);">"Where the coconut trees watch the fishermen return, a clock tower stands since before independence."</div>
            <div style="font-family:var(--font-mono);font-size:10px;color:var(--cyan);margin-top:6px;">‚úì Solved: Mananchira Square Clock Tower ¬∑ +50 O-Coins</div>
          </div>
        </div>
        <!-- Done -->
        <div class="riddle-node">
          <div class="riddle-connector">
            <div class="riddle-num done">‚úì</div>
            <div class="riddle-line done"></div>
          </div>
          <div class="riddle-content done-riddle">
            <h4>CLUE 2 ‚Äî COMPLETED ‚óà</h4>
            <div class="riddle-text" style="color:var(--text-dim);">"The street that smells of cardamom and cashew. Find the arch where the old traders gathered."</div>
            <div style="font-family:var(--font-mono);font-size:10px;color:var(--cyan);margin-top:6px;">‚úì Solved: SM Street Heritage Arch ¬∑ +80 O-Coins</div>
          </div>
        </div>
        <!-- ACTIVE -->
        <div class="riddle-node">
          <div class="riddle-connector">
            <div class="riddle-num active">3</div>
            <div class="riddle-line"></div>
          </div>
          <div class="riddle-content active-riddle">
            <h4>CLUE 3 ‚Äî ACTIVE üîì</h4>
            <div class="riddle-text">"I connect two districts across water that is neither river nor sea. My iron ribs have echoed the footsteps of a thousand years of trade. Find me where the salt wind meets the bridge."</div>
            <div class="riddle-answer-box">
              <input class="input-field" id="riddleInput" placeholder="Enter location name..." style="flex:1;" />
              <button class="btn btn-gold btn-sm" onclick="checkRiddle()">SUBMIT</button>
            </div>
            <div style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);margin-top:6px;">üèÜ Reward: 150 O-Coins + Rare Badge</div>
          </div>
        </div>
        <!-- Locked -->
        <div class="riddle-node">
          <div class="riddle-connector">
            <div class="riddle-num locked">4</div>
            <div class="riddle-line"></div>
          </div>
          <div class="riddle-content locked-riddle">
            <h4>CLUE 4 ‚Äî LOCKED üîí</h4>
            <div class="riddle-text">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</div>
          </div>
        </div>
        <div class="riddle-node">
          <div class="riddle-connector">
            <div class="riddle-num locked">5</div>
          </div>
          <div class="riddle-content locked-riddle">
            <h4>CLUE 5 ‚Äî LOCKED üîí</h4>
            <div class="riddle-text">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</div>
          </div>
        </div>
      </div>
    </div>

    <!-- OFFLINE PACKS -->
    <div class="view" id="view-offline">
      <div class="section-header">
        <div class="section-title">Offline Region Packs</div>
        <div class="section-sub">DOWNLOAD ZONES FOR PATCHY NETWORKS ¬∑ HIVE LOCAL STORE</div>
      </div>
      <div class="pack-list">
        <div class="pack-item">
          <div class="pack-icon">üèñ</div>
          <div class="pack-info">
            <div class="pack-name">Calicut Beach Zone</div>
            <div class="pack-meta">OSM tiles ¬∑ 3 active hunts ¬∑ Last updated 2h ago</div>
            <div class="pack-bar"><div class="pack-fill" style="width:100%"></div></div>
          </div>
          <div class="pack-progress" style="text-align:right;">
            <div class="pack-size">4.8 MB</div>
            <div style="font-family:var(--font-mono);font-size:9px;color:var(--cyan);margin-top:4px;">‚úì CACHED</div>
          </div>
        </div>
        <div class="pack-item">
          <div class="pack-icon">üèô</div>
          <div class="pack-info">
            <div class="pack-name">SM Street District</div>
            <div class="pack-meta">OSM tiles ¬∑ 7 active hunts ¬∑ Last updated 1h ago</div>
            <div class="pack-bar"><div class="pack-fill" style="width:60%" id="smFill"></div></div>
          </div>
          <div class="pack-progress" style="text-align:right;">
            <div class="pack-size">3.2 MB</div>
            <div style="font-family:var(--font-mono);font-size:9px;color:var(--gold);margin-top:4px;" id="smStatus">DOWNLOADING...</div>
          </div>
        </div>
        <div class="pack-item">
          <div class="pack-icon">üïå</div>
          <div class="pack-info">
            <div class="pack-name">Kuttichira Heritage</div>
            <div class="pack-meta">OSM tiles ¬∑ 2 active hunts</div>
            <div class="pack-bar"><div class="pack-fill" style="width:0%"></div></div>
          </div>
          <div class="pack-progress" style="text-align:right;">
            <div class="pack-size">2.1 MB</div>
            <button class="btn btn-cyan btn-sm" style="margin-top:4px;" onclick="simulateDownload(this)">DOWNLOAD</button>
          </div>
        </div>
        <div class="pack-item">
          <div class="pack-icon">üåø</div>
          <div class="pack-info">
            <div class="pack-name">Thali Temple Zone</div>
            <div class="pack-meta">OSM tiles ¬∑ 1 active hunt</div>
            <div class="pack-bar"><div class="pack-fill" style="width:0%"></div></div>
          </div>
          <div class="pack-progress" style="text-align:right;">
            <div class="pack-size">1.9 MB</div>
            <button class="btn btn-cyan btn-sm" style="margin-top:4px;" onclick="simulateDownload(this)">DOWNLOAD</button>
          </div>
        </div>
      </div>
    </div>

    <!-- SOCIAL -->
    <div class="view" id="view-social">
      <div class="section-header">
        <div class="section-title">Proximity Comms</div>
        <div class="section-sub">ACTIVE GEOFENCED ROOM ¬∑ SM STREET POLYGON ¬∑ 8 HUNTERS PRESENT</div>
      </div>

      <div class="panel-card mb-20">
        <div class="panel-title">Tactical Status</div>
        <div class="status-grid">
          <div class="status-card lfg selected" onclick="selectStatus(this)" id="statusLFG">
            <div class="s-icon">üü¢</div>
            <div class="s-label">LFG</div>
          </div>
          <div class="status-card chat" onclick="selectStatus(this)">
            <div class="s-icon">üü°</div>
            <div class="s-label">OPEN TO CHAT</div>
          </div>
          <div class="status-card ghost" onclick="selectStatus(this)">
            <div class="s-icon">üî¥</div>
            <div class="s-label">GHOST MODE</div>
          </div>
        </div>
      </div>

      <div class="panel-card">
        <div class="panel-title">Ephemeral Zone Chat <span style="font-size:9px;color:var(--red);font-weight:normal;letter-spacing:normal;">‚óè LIVE</span></div>
        <div class="chat-box" id="chatBox">
          <div class="chat-msg">
            <div class="chat-avatar" style="background:rgba(0,200,120,0.2);border:1px solid #00C878;color:#00C878;">RK</div>
            <div>
              <div class="chat-name">RaiderKnight ¬∑ LFG</div>
              <div class="chat-bubble">Anyone near SM Street? Found a riddle anchor at the old arch üëÄ</div>
            </div>
          </div>
          <div class="chat-msg">
            <div class="chat-avatar" style="background:rgba(245,189,25,0.2);border:1px solid #F5BD19;color:#F5BD19;">NX</div>
            <div>
              <div class="chat-name">NightFoxKL ¬∑ Open to Chat</div>
              <div class="chat-bubble">There's 3 crates near the beach road junction. Be careful ‚Äî ShadowReed is camping.</div>
            </div>
          </div>
          <div class="chat-msg">
            <div class="chat-avatar" style="background:rgba(255,56,96,0.2);border:1px solid #FF3860;color:#FF3860;">SR</div>
            <div>
              <div class="chat-name">ShadowReed ¬∑ Ghost Mode</div>
              <div class="chat-bubble">Not camping. Just observing üòà</div>
            </div>
          </div>
          <div class="chat-msg">
            <div class="chat-avatar" style="background:rgba(0,255,194,0.2);border:1px solid #00FFC2;color:#00FFC2;">AX</div>
            <div>
              <div class="chat-name">You ¬∑ LFG</div>
              <div class="chat-bubble mine">On my way to SM Street. Anyone want to group up?</div>
            </div>
          </div>
        </div>
        <div class="chat-input-row">
          <input class="input-field" id="chatInput" placeholder="Message this zone... (auto-deletes when you leave)" style="flex:1;" onkeydown="if(event.key==='Enter') sendChat()" />
          <button class="btn btn-cyan btn-sm" onclick="sendChat()">SEND</button>
        </div>
        <div style="font-family:var(--font-mono);font-size:9px;color:var(--text-dim);margin-top:8px;">‚ö° Ephemeral ¬∑ Messages delete on zone exit ¬∑ No server storage</div>
      </div>
    </div>

    <!-- VAULT -->
    <div class="view" id="view-vault">
      <div class="section-header">
        <div class="section-title">The Vault</div>
        <div class="section-sub">O-COIN ECONOMY ¬∑ CLOSED-LOOP ¬∑ NON-CASHABLE</div>
      </div>

      <div class="coin-display">
        <div class="coin-icon">ü™ô</div>
        <div>
          <div class="coin-amount" id="vaultCoins">2,840</div>
          <div class="coin-sub">O-COINS BALANCE</div>
          <div style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);margin-top:2px;">+120 today ¬∑ +380 this week</div>
        </div>
        <div style="margin-left:auto;">
          <div style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);text-align:right;">RANK</div>
          <div style="font-family:var(--font-hud);font-size:28px;font-weight:900;color:var(--gold);">#47</div>
          <div style="font-family:var(--font-mono);font-size:9px;color:var(--text-dim);">CALICUT DISTRICT</div>
        </div>
      </div>

      <div class="panel-card mb-20">
        <div class="panel-title">The Bazaar ‚Äî Local Vouchers</div>
        <div class="bazaar-grid">
          <div class="bazaar-item" onclick="openRedeem('Kada Chai','SM Street',80)">
            <div class="bazaar-emoji">üßã</div>
            <div class="bazaar-name">Kada Chai</div>
            <div class="bazaar-price">80 O‚óà</div>
            <div class="bazaar-place">SM Street Stall</div>
          </div>
          <div class="bazaar-item" onclick="openRedeem('Calicut Biryani','Hotel Sagar',350)">
            <div class="bazaar-emoji">üçö</div>
            <div class="bazaar-name">Biryani Meal</div>
            <div class="bazaar-price">350 O‚óà</div>
            <div class="bazaar-place">Hotel Sagar</div>
          </div>
          <div class="bazaar-item" onclick="openRedeem('Ice Cream','Mittai Kada',120)">
            <div class="bazaar-emoji">üç¶</div>
            <div class="bazaar-name">Ice Cream</div>
            <div class="bazaar-price">120 O‚óà</div>
            <div class="bazaar-place">Mittai Kada</div>
          </div>
          <div class="bazaar-item" onclick="openRedeem('Halwa Box','Sweet Corner',200)">
            <div class="bazaar-emoji">üü´</div>
            <div class="bazaar-name">Halwa Box</div>
            <div class="bazaar-price">200 O‚óà</div>
            <div class="bazaar-place">Sweet Corner</div>
          </div>
          <div class="bazaar-item" onclick="openRedeem('Fish Fry','Beach Kada',280)">
            <div class="bazaar-emoji">üêü</div>
            <div class="bazaar-name">Fish Fry</div>
            <div class="bazaar-price">280 O‚óà</div>
            <div class="bazaar-place">Beach Kada</div>
          </div>
          <div class="bazaar-item" onclick="openRedeem('Coconut Water','Beach Vendor',50)">
            <div class="bazaar-emoji">ü••</div>
            <div class="bazaar-name">Coconut Water</div>
            <div class="bazaar-price">50 O‚óà</div>
            <div class="bazaar-place">Beach Vendor</div>
          </div>
        </div>
      </div>
    </div>

    <!-- LEADERBOARD -->
    <div class="view" id="view-leaderboard">
      <div class="section-header">
        <div class="section-title">King of the Hill</div>
        <div class="section-sub">CALICUT DISTRICT LEADERBOARD ¬∑ UPDATED LIVE</div>
      </div>

      <div class="panel-card mb-20">
        <div class="panel-title">Weekly Badges</div>
        <div class="badge-grid">
          <div class="badge-item earned">
            <div class="badge-emoji">üèÜ</div>
            <div class="badge-name">Street King</div>
          </div>
          <div class="badge-item earned">
            <div class="badge-emoji">üîç</div>
            <div class="badge-name">Riddle Lord</div>
          </div>
          <div class="badge-item earned">
            <div class="badge-emoji">‚ö°</div>
            <div class="badge-name">Speed Hunter</div>
          </div>
          <div class="badge-item earned">
            <div class="badge-emoji">üåô</div>
            <div class="badge-name">Night Owl</div>
          </div>
          <div class="badge-item locked-b">
            <div class="badge-emoji">üëë</div>
            <div class="badge-name">Zone Master</div>
          </div>
          <div class="badge-item locked-b">
            <div class="badge-emoji">üó∫</div>
            <div class="badge-name">Cartographer</div>
          </div>
          <div class="badge-item locked-b">
            <div class="badge-emoji">üíé</div>
            <div class="badge-name">Diamond</div>
          </div>
          <div class="badge-item locked-b">
            <div class="badge-emoji">üî±</div>
            <div class="badge-name">Legend</div>
          </div>
        </div>
      </div>

      <div class="panel-card">
        <div class="panel-title">Top Hunters ‚Äî Calicut</div>
        <div class="leaderboard">
          <div class="lb-row top1">
            <div class="lb-rank">1</div>
            <div class="lb-avatar" style="background:rgba(245,189,25,0.2);border:1px solid var(--gold);color:var(--gold);">NK</div>
            <div class="lb-info">
              <div class="lb-name">NightKingKozhikode</div>
              <div class="lb-area">SM Street ¬∑ Beach Zone</div>
            </div>
            <div class="lb-score">9,840</div>
            <span style="font-size:16px;">üëë</span>
          </div>
          <div class="lb-row top2">
            <div class="lb-rank">2</div>
            <div class="lb-avatar" style="background:rgba(192,192,192,0.1);border:1px solid #C0C0C0;color:#C0C0C0;">SF</div>
            <div class="lb-info">
              <div class="lb-name">ShadowFox_KL</div>
              <div class="lb-area">Kuttichira ¬∑ Old Town</div>
            </div>
            <div class="lb-score">8,320</div>
          </div>
          <div class="lb-row top3">
            <div class="lb-rank">3</div>
            <div class="lb-avatar" style="background:rgba(184,115,51,0.1);border:1px solid #B8733B;color:#B8733B;">RH</div>
            <div class="lb-info">
              <div class="lb-name">RaiderHawk22</div>
              <div class="lb-area">Mananchira ¬∑ Town</div>
            </div>
            <div class="lb-score">7,100</div>
          </div>
          <div class="lb-row">
            <div class="lb-rank" style="color:var(--text-dim)">4</div>
            <div class="lb-avatar" style="background:rgba(0,255,194,0.1);border:1px solid var(--cyan);color:var(--cyan);">NX</div>
            <div class="lb-info">
              <div class="lb-name">NightFoxKL</div>
              <div class="lb-area">All Zones</div>
            </div>
            <div class="lb-score">6,880</div>
          </div>
          <div class="lb-row" style="border-color:var(--cyan);background:rgba(0,255,194,0.05);">
            <div class="lb-rank" style="color:var(--text-dim)">47</div>
            <div class="lb-avatar" style="background:rgba(0,255,194,0.2);border:1px solid var(--cyan);color:var(--cyan);">AX</div>
            <div class="lb-info">
              <div class="lb-name">You (Archer_X)</div>
              <div class="lb-area">Zone-7 ¬∑ SM Street</div>
            </div>
            <div class="lb-score">2,840</div>
          </div>
        </div>
      </div>
    </div>

    <!-- SAFETY -->
    <div class="view" id="view-safety">
      <div class="section-header">
        <div class="section-title">The Shield</div>
        <div class="section-sub">SAFETY INFRASTRUCTURE ¬∑ ALL FEATURES ACTIVE</div>
      </div>

      <div class="grid-2 mb-20">
        <div class="panel-card" style="text-align:center;">
          <div class="panel-title" style="justify-content:center;">Panic Gyro ‚Äî SOS</div>
          <div class="gyro-display">
            <div style="font-family:var(--font-mono);font-size:11px;color:var(--text-dim);">Shake your phone violently to trigger</div>
            <div class="phone-icon" id="phoneIcon">üì±</div>
            <div class="sos-btn" onclick="triggerSOS()">
              <div class="sos-text">SOS</div>
              <div class="sos-sub">HOLD 3s ¬∑ AUTO-BROADCAST</div>
            </div>
          </div>
          <div style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);margin-top:8px;">üì° Live location ‚Üí 3 trusted contacts</div>
        </div>

        <div class="panel-card">
          <div class="panel-title">Lady-Guard Mode</div>
          <div style="display:flex;flex-direction:column;gap:12px;margin-top:8px;">
            <div class="guard-toggle">
              <div>
                <div style="font-family:var(--font-body);font-size:14px;font-weight:600;color:var(--text);">Invisible to male accounts</div>
                <div style="font-family:var(--font-mono);font-size:9px;color:var(--text-dim);">Database-level filter ¬∑ Server enforced</div>
              </div>
              <div class="toggle-switch on" onclick="toggleSwitch(this)" id="ladyGuard">
                <div class="toggle-knob"></div>
              </div>
            </div>
            <div class="guard-toggle">
              <div>
                <div style="font-family:var(--font-body);font-size:14px;font-weight:600;color:var(--text);">Hide on heatmaps</div>
                <div style="font-family:var(--font-mono);font-size:9px;color:var(--text-dim);">Exclude from density aggregation</div>
              </div>
              <div class="toggle-switch on" onclick="toggleSwitch(this)">
                <div class="toggle-knob"></div>
              </div>
            </div>
            <div class="guard-toggle">
              <div>
                <div style="font-family:var(--font-body);font-size:14px;font-weight:600;color:var(--text);">Trusted contacts only</div>
                <div style="font-family:var(--font-mono);font-size:9px;color:var(--text-dim);">Chat restricted to verified contacts</div>
              </div>
              <div class="toggle-switch" onclick="toggleSwitch(this)">
                <div class="toggle-knob"></div>
              </div>
            </div>
          </div>
          <div style="margin-top:12px;padding:10px;background:rgba(255,56,96,0.05);border:1px solid rgba(255,56,96,0.2);border-radius:4px;font-family:var(--font-mono);font-size:9px;color:rgba(255,56,96,0.7);">
            üîí Lady-Guard is enforced server-side. Client cannot bypass.
          </div>
        </div>
      </div>

      <div class="panel-card">
        <div class="panel-title">Identity Verification Tiers</div>
        <div style="display:flex;flex-direction:column;gap:8px;">
          <div style="display:flex;align-items:center;gap:12px;padding:10px 12px;background:rgba(0,255,194,0.05);border:1px solid rgba(0,255,194,0.2);border-radius:4px;">
            <div style="font-size:20px;">üì±</div>
            <div style="flex:1;">
              <div style="font-family:var(--font-body);font-size:13px;font-weight:600;color:var(--text);">Tier 1 ‚Äî Phone OTP</div>
              <div style="font-family:var(--font-mono);font-size:9px;color:var(--text-dim);">MSG91 / Twilio ¬∑ Required for all users</div>
            </div>
            <div style="font-family:var(--font-hud);font-size:11px;color:var(--cyan);">VERIFIED ‚úì</div>
          </div>
          <div style="display:flex;align-items:center;gap:12px;padding:10px 12px;background:rgba(245,189,25,0.04);border:1px solid rgba(245,189,25,0.2);border-radius:4px;">
            <div style="font-size:20px;">ü™™</div>
            <div style="flex:1;">
              <div style="font-family:var(--font-body);font-size:13px;font-weight:600;color:var(--text);">Tier 2 ‚Äî Govt ID (DigiLocker)</div>
              <div style="font-family:var(--font-mono);font-size:9px;color:var(--text-dim);">Aadhaar / Voter ID ¬∑ Unlocks advanced zones</div>
            </div>
            <button class="btn btn-gold btn-sm" onclick="showToast('DigiLocker API would open here')">VERIFY</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ADMIN -->
    <div class="view" id="view-admin">
      <div class="section-header">
        <div class="section-title">Command Center</div>
        <div class="section-sub">ADMIN ACCESS ¬∑ CALICUT DISTRICT OPERATOR</div>
      </div>

      <div class="admin-grid mb-20">
        <div>
          <div class="panel-card mb-12">
            <div class="panel-title">Map Dropper</div>
            <div style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);margin-bottom:10px;">Click on the map to drop a loot crate</div>
            <div class="admin-map-tool" id="adminMap" onclick="dropLoot(event)">
              <svg width="100%" height="100%" viewBox="0 0 400 300">
                <rect width="400" height="300" fill="#070F18"/>
                <defs>
                  <pattern id="agrid" width="30" height="30" patternUnits="userSpaceOnUse">
                    <path d="M 30 0 L 0 0 0 30" fill="none" stroke="rgba(0,255,194,0.06)" stroke-width="1"/>
                  </pattern>
                </defs>
                <rect width="400" height="300" fill="url(#agrid)"/>
                <line x1="0" y1="150" x2="400" y2="150" stroke="rgba(0,255,194,0.1)" stroke-width="6"/>
                <line x1="200" y1="0" x2="200" y2="300" stroke="rgba(0,255,194,0.1)" stroke-width="6"/>
                <text x="10" y="20" fill="rgba(0,255,194,0.4)" font-family="Share Tech Mono" font-size="9">‚óà CALICUT GRID ¬∑ CLICK TO DROP</text>
              </svg>
              <div class="drop-indicator" id="dropIndicator"></div>
            </div>
          </div>
          <div class="panel-card">
            <div class="panel-title">Drop Configuration</div>
            <div style="display:flex;flex-direction:column;gap:8px;">
              <div style="display:flex;gap:8px;align-items:center;">
                <span style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);width:80px;">Tier</span>
                <select class="input-field" style="flex:1;cursor:pointer;">
                  <option>ü•â Bronze ‚Äî 20 O-Coins</option>
                  <option selected>ü•á Gold ‚Äî 120 O-Coins</option>
                  <option>üíé Diamond ‚Äî 500 O-Coins</option>
                </select>
              </div>
              <div style="display:flex;gap:8px;align-items:center;">
                <span style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);width:80px;">Despawn</span>
                <input class="input-field" style="flex:1;" value="30 minutes" />
              </div>
              <button class="btn btn-gold" onclick="showToast('‚úì Loot drop queued for placement')">QUEUE DROP</button>
            </div>
          </div>
        </div>

        <div>
          <div class="panel-card mb-12">
            <div class="panel-title">Geo-Broadcast</div>
            <div class="broadcast-box">
              <div>
                <div style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);margin-bottom:4px;">Broadcast Radius: <span style="color:var(--cyan);" id="radiusVal">2.0 km</span></div>
                <input type="range" class="radius-slider" min="1" max="10" value="2" oninput="document.getElementById('radiusVal').textContent=this.value+'.0 km'">
              </div>
              <input class="input-field" placeholder="Broadcast title..." value="‚ö° DOUBLE LOOT EVENT ‚Äî 30 MIN!" />
              <textarea class="input-field" placeholder="Message...">Hunters! A rare Diamond crate has been dropped near SM Street. First to solve the riddle wins 1000 O-Coins. Hunt starts NOW.</textarea>
              <button class="btn btn-cyan" onclick="showToast('üì° Geo-broadcast sent to 847 hunters in range')">BROADCAST TO ZONE</button>
            </div>
          </div>

          <div class="panel-card">
            <div class="panel-title">Riddle Writer</div>
            <div style="display:flex;flex-direction:column;gap:8px;">
              <input class="input-field" placeholder="Riddle text..." value="I stand where the salt wind meets the iron bridge..." />
              <input class="input-field" placeholder="Answer (hashed server-side)..." value="callicut bridge" />
              <div style="display:flex;gap:8px;">
                <input class="input-field" style="flex:1;" placeholder="Reward O-Coins" value="150" />
                <button class="btn btn-cyan btn-sm" onclick="showToast('‚úì Riddle published to Chain #7')">PUBLISH</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Live stats -->
      <div class="panel-card">
        <div class="panel-title">Live District Stats</div>
        <div class="mini-stats">
          <div class="mini-stat">
            <div class="mini-stat-val">23</div>
            <div class="mini-stat-lbl">Online Now</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-val" style="color:var(--gold);">3</div>
            <div class="mini-stat-lbl">Active Drops</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-val">847</div>
            <div class="mini-stat-lbl">Zone Subs</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-val" style="color:var(--red);">2</div>
            <div class="mini-stat-lbl">SOS Events</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-val">18.4K</div>
            <div class="mini-stat-lbl">O-Coins Circulating</div>
          </div>
        </div>
      </div>
    </div>

  </main>

  <!-- RIGHT PANEL -->
  <div class="right-panel">
    <!-- Live Feed -->
    <div class="panel-card">
      <div class="panel-title">Live Activity Feed</div>
      <div id="liveFeed">
        <div class="feed-item">
          <div class="feed-dot" style="background:var(--gold)"></div>
          <div>
            <div class="feed-text"><strong>RaiderKnight</strong> claimed Gold Crate #A7 near SM Street</div>
            <div class="feed-time">just now</div>
          </div>
        </div>
        <div class="feed-item">
          <div class="feed-dot" style="background:var(--cyan)"></div>
          <div>
            <div class="feed-text"><strong>NightFoxKL</strong> solved Riddle #2 in Chain 7</div>
            <div class="feed-time">1m ago</div>
          </div>
        </div>
        <div class="feed-item">
          <div class="feed-dot" style="background:var(--red)"></div>
          <div>
            <div class="feed-text"><strong>ShadowReed</strong> entered Ghost Mode in Zone-7</div>
            <div class="feed-time">3m ago</div>
          </div>
        </div>
        <div class="feed-item">
          <div class="feed-dot" style="background:var(--gold)"></div>
          <div>
            <div class="feed-text">New <strong>Bronze Crate</strong> dropped at Kuttichira</div>
            <div class="feed-time">5m ago</div>
          </div>
        </div>
        <div class="feed-item">
          <div class="feed-dot" style="background:var(--cyan)"></div>
          <div>
            <div class="feed-text"><strong>ViperDash</strong> redeemed Kada Chai voucher</div>
            <div class="feed-time">7m ago</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Your Zone -->
    <div class="panel-card">
      <div class="panel-title">Your Zone Status</div>
      <div style="display:flex;flex-direction:column;gap:8px;font-family:var(--font-mono);font-size:11px;">
        <div class="flex-between"><span style="color:var(--text-dim)">Zone</span><span style="color:var(--cyan)">SM Street ‚Äî Zone 7</span></div>
        <div class="flex-between"><span style="color:var(--text-dim)">Nearby hunters</span><span style="color:var(--text)">8 within 200m</span></div>
        <div class="flex-between"><span style="color:var(--text-dim)">Nearest crate</span><span style="color:var(--gold)">48m NE</span></div>
        <div class="flex-between"><span style="color:var(--text-dim)">Active riddle</span><span style="color:var(--gold)">#3 of 5</span></div>
        <div class="flex-between"><span style="color:var(--text-dim)">Status</span><span style="color:#00C878">‚óè LFG</span></div>
        <div class="flex-between"><span style="color:var(--text-dim)">Signal</span><span style="color:var(--cyan)">4G ¬∑ Good</span></div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="panel-card">
      <div class="panel-title">Quick Actions</div>
      <div style="display:flex;flex-direction:column;gap:8px;">
        <button class="btn btn-cyan" style="width:100%;text-align:left;" onclick="navigate('ar')">‚óé Open AR Scanner</button>
        <button class="btn btn-gold" style="width:100%;text-align:left;" onclick="navigate('compass')">‚óâ Hot/Cold Navigator</button>
        <button class="btn btn-red" style="width:100%;text-align:left;" onclick="triggerSOS()">‚ö† PANIC SOS</button>
      </div>
    </div>

    <!-- Gyro hint -->
    <div class="panel-card" style="border-color:rgba(255,56,96,0.2);background:rgba(255,56,96,0.03);">
      <div class="panel-title" style="color:var(--red);">Shield Status</div>
      <div style="font-family:var(--font-mono);font-size:10px;color:var(--text-dim);line-height:1.8;">
        üü¢ Panic Gyro: <span style="color:#00C878;">Armed</span><br>
        üü¢ Lady-Guard: <span style="color:#00C878;">Active</span><br>
        üü¢ ID Verified: <span style="color:#00C878;">Tier 1</span><br>
        üü° Tier 2 ID: <span style="color:var(--gold);">Pending</span>
      </div>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ BOOT SEQUENCE ‚îÄ‚îÄ
const bootMessages = [
  'LOADING SPATIAL DATABASE...',
  'CONNECTING REDIS GEO CLUSTER...',
  'CALIBRATING AR ANCHOR SYSTEM...',
  'ESTABLISHING WEBSOCKET TUNNELS...',
  'LOADING CALICUT ZONE DATA...',
  'ENGAGING HUNT ENGINE v2.4.1...',
  'SYSTEMS NOMINAL. WELCOME, HUNTER.'
];

let msgIdx = 0;
const bootStatus = document.getElementById('bootStatus');
const bootInterval = setInterval(() => {
  msgIdx++;
  if (msgIdx < bootMessages.length) {
    bootStatus.textContent = bootMessages[msgIdx];
  }
}, 340);

setTimeout(() => {
  clearInterval(bootInterval);
  document.getElementById('boot').classList.add('hidden');
  document.getElementById('app').classList.add('visible');
  startLiveFeed();
  simulateSMStreetDownload();
}, 2800);

// ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ
function navigate(viewName) {
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
  const navEl = document.querySelector(`[data-view="${viewName}"]`);
  if (navEl) navEl.classList.add('active');
  const viewEl = document.getElementById(`view-${viewName}`);
  if (viewEl) viewEl.classList.add('active');
}

document.querySelectorAll('.nav-item').forEach(item => {
  item.addEventListener('click', () => {
    const view = item.dataset.view;
    navigate(view);
  });
});

// ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ
let toastTimeout;
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('visible');
  clearTimeout(toastTimeout);
  toastTimeout = setTimeout(() => t.classList.remove('visible'), 2800);
}

// ‚îÄ‚îÄ AR CRATE CLAIM ‚îÄ‚îÄ
function claimCrate() {
  const coins = 120;
  let current = parseInt(document.getElementById('headerCoins').textContent.replace(',',''));
  current += coins;
  document.getElementById('headerCoins').textContent = current.toLocaleString();
  document.getElementById('vaultCoins').textContent = current.toLocaleString();
  showToast(`‚ö° Crate claimed! +${coins} O-Coins ¬∑ Total: ${current.toLocaleString()}`);
  addFeedItem('gold', `<strong>You</strong> claimed Gold Crate #A7 near SM Street`, 'just now');
}

// ‚îÄ‚îÄ HOT/COLD SIMULATION ‚îÄ‚îÄ
const tempStates = [
  {label:'‚ùÑ FREEZING', dist:'~500M', fill:'10%', css:'#4488FF'},
  {label:'üå° COLD', dist:'~350M', fill:'30%', css:'#44AAFF'},
  {label:'üå° COOL', dist:'~250M', fill:'45%', css:'#44FFDD'},
  {label:'üå° WARM', dist:'~140M', fill:'68%', css:'var(--cyan)'},
  {label:'üî• HOT', dist:'~60M', fill:'85%', css:'var(--gold)'},
  {label:'üî• BURNING', dist:'~15M', fill:'96%', css:'var(--red)'},
];
let tempIdx = 3;

function simulateProximity() {
  tempIdx = (tempIdx + 1) % tempStates.length;
  const s = tempStates[tempIdx];
  document.getElementById('compassTemp').textContent = s.label;
  document.getElementById('compassDist').textContent = s.dist;
  document.getElementById('proxFill').style.width = s.fill;
  document.getElementById('proxFill').style.boxShadow = `0 0 8px ${s.css}`;
}

// ‚îÄ‚îÄ RIDDLE CHECK ‚îÄ‚îÄ
function checkRiddle() {
  const val = document.getElementById('riddleInput').value.toLowerCase().trim();
  const answers = ['calicut bridge', 'kallai bridge', 'kallai', 'bridge'];
  if (answers.some(a => val.includes(a.split(' ')[0]))) {
    showToast('üéâ CORRECT! +150 O-Coins ¬∑ Clue 4 unlocked!');
    addFeedItem('cyan', `<strong>You</strong> solved Riddle #3 in Chain 7`, 'just now');
    let c = parseInt(document.getElementById('headerCoins').textContent.replace(',',''));
    c += 150;
    document.getElementById('headerCoins').textContent = c.toLocaleString();
    document.getElementById('vaultCoins').textContent = c.toLocaleString();
  } else {
    showToast('‚úó Incorrect. Try again ‚Äî think of bridges near the sea.');
  }
}

// ‚îÄ‚îÄ STATUS SELECTION ‚îÄ‚îÄ
function selectStatus(el) {
  document.querySelectorAll('.status-card').forEach(s => s.classList.remove('selected'));
  el.classList.add('selected');
  const label = el.querySelector('.s-label').textContent;
  showToast(`Status updated: ${label}`);
}

// ‚îÄ‚îÄ CHAT ‚îÄ‚îÄ
const chatColors = ['#00C878','#F5BD19','#FF3860','#00FFC2','#AA44FF'];
function sendChat() {
  const input = document.getElementById('chatInput');
  const msg = input.value.trim();
  if (!msg) return;
  const box = document.getElementById('chatBox');
  const div = document.createElement('div');
  div.className = 'chat-msg';
  div.innerHTML = `
    <div class="chat-avatar" style="background:rgba(0,255,194,0.2);border:1px solid var(--cyan);color:var(--cyan);">AX</div>
    <div>
      <div class="chat-name">You ¬∑ LFG</div>
      <div class="chat-bubble mine">${msg}</div>
    </div>`;
  box.appendChild(div);
  box.scrollTop = box.scrollHeight;
  input.value = '';

  // Simulate reply
  setTimeout(() => {
    const replies = [
      ['RK','RaiderKnight','LFG','#00C878','On my way! Meet at the arch?'],
      ['NX','NightFoxKL','Chat','#F5BD19','Roger that hunter ü´°'],
      ['VD','ViperDash','LFG','#00C878','Incoming from the north side!'],
    ];
    const r = replies[Math.floor(Math.random()*replies.length)];
    const replyDiv = document.createElement('div');
    replyDiv.className = 'chat-msg';
    replyDiv.innerHTML = `
      <div class="chat-avatar" style="background:rgba(0,0,0,0.3);border:1px solid ${r[3]};color:${r[3]};">${r[0]}</div>
      <div>
        <div class="chat-name">${r[1]} ¬∑ ${r[2]}</div>
        <div class="chat-bubble">${r[4]}</div>
      </div>`;
    box.appendChild(replyDiv);
    box.scrollTop = box.scrollHeight;
  }, 1200 + Math.random()*800);
}

// ‚îÄ‚îÄ BAZAAR REDEEM ‚îÄ‚îÄ
let redeemTimer;
function openRedeem(name, place, cost) {
  let balance = parseInt(document.getElementById('headerCoins').textContent.replace(',',''));
  if (balance < cost) { showToast(`‚úó Insufficient O-Coins. Need ${cost}, have ${balance}.`); return; }
  balance -= cost;
  document.getElementById('headerCoins').textContent = balance.toLocaleString();
  document.getElementById('vaultCoins').textContent = balance.toLocaleString();

  document.getElementById('redeemItemName').textContent = `${name} ‚Äî ${place}`;
  const code = 'HNT-' + Math.random().toString(36).toUpperCase().substr(2,4);
  document.getElementById('redeemCode').textContent = code;

  // Generate QR pattern
  const qr = document.getElementById('qrGrid');
  qr.innerHTML = '';
  for (let i=0; i<49; i++) {
    const cell = document.createElement('div');
    const isCorner = (i<8 && (i<3||i>4)) || (i>=42 && (i%7<3||i%7>4));
    cell.className = 'qr-cell';
    cell.style.background = (isCorner || Math.random() > 0.5) ? '#000' : '#fff';
    qr.appendChild(cell);
  }

  let secs = 299;
  clearInterval(redeemTimer);
  function tick() {
    const m = Math.floor(secs/60).toString().padStart(2,'0');
    const s = (secs%60).toString().padStart(2,'0');
    document.getElementById('redeemTimer').textContent = `‚è± Expires in: ${m}:${s}`;
    if(secs-- <= 0) clearInterval(redeemTimer);
  }
  tick();
  redeemTimer = setInterval(tick, 1000);
  document.getElementById('redeemModal').classList.add('open');
  addFeedItem('cyan', `<strong>You</strong> redeemed ${name} voucher at ${place}`, 'just now');
}

function closeModal() {
  document.getElementById('redeemModal').classList.remove('open');
  clearInterval(redeemTimer);
}

// ‚îÄ‚îÄ SOS ‚îÄ‚îÄ
let sosTimerI;
function triggerSOS() {
  document.getElementById('phoneIcon').classList.add('shaking');
  document.getElementById('sosModal').classList.add('open');
  let sec = 0;
  clearInterval(sosTimerI);
  sosTimerI = setInterval(() => {
    sec++;
    const m = Math.floor(sec/60).toString().padStart(2,'0');
    const s = (sec%60).toString().padStart(2,'0');
    document.getElementById('sosTimer').textContent = `Broadcasting for: ${m}:${s}`;
  }, 1000);
  addFeedItem('red', `<strong>SOS BROADCAST</strong> active ‚Äî location shared with 3 contacts`, 'just now');
}
function closeSosModal() {
  document.getElementById('sosModal').classList.remove('open');
  clearInterval(sosTimerI);
  document.getElementById('phoneIcon').classList.remove('shaking');
  showToast('‚úì SOS cancelled. Stay safe, hunter.');
}

// ‚îÄ‚îÄ TOGGLE SWITCH ‚îÄ‚îÄ
function toggleSwitch(el) {
  el.classList.toggle('on');
  const label = el.previousElementSibling?.querySelector('div')?.textContent || 'Setting';
  showToast(`${el.classList.contains('on')?'‚úì Enabled':'‚úó Disabled'}: ${label.trim()}`);
}

// ‚îÄ‚îÄ ADMIN MAP DROP ‚îÄ‚îÄ
function dropLoot(e) {
  const rect = e.currentTarget.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  const d = document.getElementById('dropIndicator');
  d.style.left = x + 'px';
  d.style.top = y + 'px';
  d.style.display = 'block';
  showToast(`üì¶ Loot marked at grid position (${Math.round(x)}, ${Math.round(y)})`);
  addFeedItem('gold', `Admin dropped <strong>Gold Crate</strong> at new position`, 'just now');
  setTimeout(() => d.style.display = 'none', 3000);
}

// ‚îÄ‚îÄ OFFLINE DOWNLOAD SIMULATION ‚îÄ‚îÄ
function simulateSMStreetDownload() {
  let pct = 60;
  const fill = document.getElementById('smFill');
  const status = document.getElementById('smStatus');
  const i = setInterval(() => {
    pct += Math.random() * 8;
    if (pct >= 100) {
      pct = 100;
      fill.style.width = '100%';
      status.textContent = '‚úì CACHED';
      status.style.color = 'var(--cyan)';
      clearInterval(i);
    } else {
      fill.style.width = pct + '%';
    }
  }, 300);
}

function simulateDownload(btn) {
  const item = btn.closest('.pack-item');
  const fill = item.querySelector('.pack-fill');
  btn.textContent = 'DOWNLOADING...';
  btn.style.opacity = '0.5';
  let p = 0;
  const i = setInterval(() => {
    p += Math.random() * 12;
    if (p >= 100) {
      p = 100;
      fill.style.width = '100%';
      btn.textContent = '‚úì CACHED';
      btn.style.color = 'var(--cyan)';
      btn.style.borderColor = 'var(--cyan)';
      clearInterval(i);
    } else {
      fill.style.width = p + '%';
    }
  }, 250);
}

// ‚îÄ‚îÄ LIVE FEED ‚îÄ‚îÄ
const feedEvents = [
  ['gold', '<strong>ViperDash</strong> claimed Bronze Crate at Kuttichira'],
  ['cyan', '<strong>ShadowReed</strong> solved Riddle #1 in Chain 8'],
  ['gold', 'New <strong>Gold Crate</strong> spawned near Mananchira'],
  ['cyan', '<strong>RaiderHawk</strong> entered SM Street zone'],
  ['red', '<strong>NightFoxKL</strong> activated Ghost Mode'],
  ['gold', '<strong>Archer_X</strong> (You) appeared on leaderboard #47'],
  ['cyan', '<strong>ZephyrKL</strong> completed Chain 6 ‚Äî Full clear!'],
];

function addFeedItem(color, text, time='just now') {
  const feed = document.getElementById('liveFeed');
  const colorMap = {gold:'var(--gold)',cyan:'var(--cyan)',red:'var(--red)'};
  const div = document.createElement('div');
  div.className = 'feed-item';
  div.style.animation = 'slideIn 0.3s ease';
  div.innerHTML = `
    <div class="feed-dot" style="background:${colorMap[color]}"></div>
    <div>
      <div class="feed-text">${text}</div>
      <div class="feed-time">${time}</div>
    </div>`;
  feed.insertBefore(div, feed.firstChild);
  if (feed.children.length > 8) feed.removeChild(feed.lastChild);
}

function startLiveFeed() {
  setInterval(() => {
    const evt = feedEvents[Math.floor(Math.random()*feedEvents.length)];
    addFeedItem(evt[0], evt[1]);
    // Update active hunters count randomly
    const base = 23;
    const delta = Math.floor(Math.random()*5)-2;
    const newVal = Math.max(18, base + delta);
  }, 4500);
}

// Close modals on bg click
document.querySelectorAll('.modal').forEach(m => {
  m.addEventListener('click', e => {
    if (e.target === m) {
      if (m.id === 'redeemModal') closeModal();
      if (m.id === 'sosModal') closeSosModal();
    }
  });
});

// Keyboard shortcuts
document.addEventListener('keydown', e => {
  if (e.key === 'Escape') { closeModal(); closeSosModal(); }
  if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') return;
});
</script>
</body>
</html>
