<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OKHOTA ‚Äî Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500;700&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
<style>
/* ‚îÄ‚îÄ TOKENS ‚îÄ‚îÄ */
:root {
  --cyan:       #00FFC2;
  --cyan-dim:   rgba(0,255,194,0.12);
  --cyan-glow:  rgba(0,255,194,0.25);
  --gold:       #F5BD19;
  --gold-dim:   rgba(245,189,25,0.12);
  --red:        #FF4466;
  --red-dim:    rgba(255,68,102,0.12);
  --green:      #00E676;

  /* Bento depth layers */
  --bg:         #06090F;
  --glass-1:    rgba(255,255,255,0.028);
  --glass-2:    rgba(255,255,255,0.048);
  --glass-3:    rgba(255,255,255,0.07);
  --border:     rgba(255,255,255,0.07);
  --border-hi:  rgba(0,255,194,0.22);

  --text:       #D4E8F0;
  --text-2:     rgba(212,232,240,0.55);
  --text-3:     rgba(212,232,240,0.28);

  --f-display:  'Orbitron', monospace;
  --f-body:     'Syne', sans-serif;
  --f-mono:     'JetBrains Mono', monospace;

  --r:          14px;
  --r-sm:       10px;
  --gap:        12px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { font-size: 14px; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--f-body);
  min-height: 100vh;
  overflow-x: hidden;
  cursor: default;
}

/* ‚îÄ‚îÄ MESH BACKGROUND ‚îÄ‚îÄ */
body::before {
  content: '';
  position: fixed; inset: 0;
  background:
    radial-gradient(ellipse 80% 60% at 15% 20%, rgba(0,255,194,0.06) 0%, transparent 60%),
    radial-gradient(ellipse 60% 50% at 85% 75%, rgba(245,189,25,0.05) 0%, transparent 55%),
    radial-gradient(ellipse 50% 40% at 50% 50%, rgba(0,80,60,0.04) 0%, transparent 70%);
  pointer-events: none; z-index: 0;
}

/* Grain overlay */
body::after {
  content: '';
  position: fixed; inset: 0;
  opacity: 0.025;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  pointer-events: none; z-index: 0;
}

/* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
.shell {
  position: relative; z-index: 1;
  max-width: 1340px;
  margin: 0 auto;
  padding: 20px 20px 32px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* ‚îÄ‚îÄ GLASS CARD ‚îÄ‚îÄ */
.card {
  background: var(--glass-1);
  border: 1px solid var(--border);
  border-radius: var(--r);
  backdrop-filter: blur(16px) saturate(1.4);
  -webkit-backdrop-filter: blur(16px) saturate(1.4);
  position: relative;
  overflow: hidden;
  transition: border-color 0.25s, box-shadow 0.25s;
}
.card::before {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(255,255,255,0.04) 0%, transparent 50%);
  pointer-events: none;
  border-radius: inherit;
}
.card:hover {
  border-color: rgba(255,255,255,0.12);
  box-shadow: 0 0 0 1px rgba(0,255,194,0.06), 0 8px 32px rgba(0,0,0,0.4);
}
.card.accent-cyan {
  border-color: var(--border-hi);
  box-shadow: 0 0 0 1px rgba(0,255,194,0.08) inset, 0 0 40px rgba(0,255,194,0.04);
}
.card.accent-gold { border-color: rgba(245,189,25,0.25); }
.card.accent-red  { border-color: rgba(255,68,102,0.22); }

/* ‚îÄ‚îÄ TOPBAR ‚îÄ‚îÄ */
.topbar {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 14px 22px;
  background: var(--glass-2);
  border: 1px solid var(--border);
  border-radius: var(--r);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
}

.logo {
  font-family: var(--f-display);
  font-size: 18px;
  font-weight: 900;
  letter-spacing: 0.28em;
  color: var(--cyan);
  text-shadow: 0 0 24px rgba(0,255,194,0.45);
  flex-shrink: 0;
}
.logo em { color: var(--gold); font-style: normal; }

.divider-v {
  width: 1px; height: 28px;
  background: var(--border);
  flex-shrink: 0;
}

.pulse-dot {
  width: 7px; height: 7px;
  border-radius: 50%;
  background: var(--cyan);
  box-shadow: 0 0 0 3px rgba(0,255,194,0.18), 0 0 12px var(--cyan);
  animation: pulse-d 2s ease-in-out infinite;
  flex-shrink: 0;
}
@keyframes pulse-d { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(.8)} }

.zone-label {
  font-family: var(--f-mono);
  font-size: 11px;
  color: var(--text-2);
  letter-spacing: 0.08em;
}
.zone-label strong { color: var(--cyan); font-weight: 500; }

.topbar-right {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 24px;
}

.stat-pill {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}
.stat-pill-val {
  font-family: var(--f-display);
  font-size: 15px;
  font-weight: 700;
  line-height: 1;
  color: var(--gold);
}
.stat-pill-val.cyan { color: var(--cyan); }
.stat-pill-lbl {
  font-family: var(--f-mono);
  font-size: 9px;
  color: var(--text-3);
  letter-spacing: 0.12em;
  text-transform: uppercase;
  margin-top: 2px;
}

.avatar-ring {
  width: 36px; height: 36px;
  border-radius: 50%;
  background: linear-gradient(135deg, rgba(0,255,194,0.3), rgba(245,189,25,0.3));
  border: 1.5px solid var(--border-hi);
  display: flex; align-items: center; justify-content: center;
  font-family: var(--f-display);
  font-size: 12px;
  font-weight: 700;
  color: var(--cyan);
  box-shadow: 0 0 16px rgba(0,255,194,0.2);
}

/* ‚îÄ‚îÄ BENTO GRID ‚îÄ‚îÄ */
.bento {
  display: grid;
  grid-template-columns: 2.4fr 1fr 1fr 1.2fr;
  grid-template-rows: auto;
  gap: var(--gap);
}

/* ‚îÄ‚îÄ CARD LABEL ‚îÄ‚îÄ */
.card-label {
  font-family: var(--f-mono);
  font-size: 9.5px;
  font-weight: 500;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: var(--text-3);
  display: flex;
  align-items: center;
  gap: 7px;
  margin-bottom: 12px;
}
.card-label::before {
  content: '';
  width: 14px; height: 1.5px;
  background: currentColor;
  border-radius: 1px;
}
.card-label.c-cyan { color: var(--cyan); opacity: 0.7; }
.card-label.c-gold { color: var(--gold); opacity: 0.7; }
.card-label.c-red  { color: var(--red); opacity: 0.7; }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CELL 1 ‚Äî MAP (tall, span 1 col, 2 rows)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.cell-map {
  grid-column: 1;
  grid-row: 1 / 3;
  padding: 18px;
  min-height: 480px;
}

.map-wrap {
  position: relative;
  width: 100%;
  height: calc(100% - 32px);
  border-radius: var(--r-sm);
  overflow: hidden;
  background: #050c14;
}

.map-svg { width: 100%; height: 100%; }

.map-hud-corner {
  position: absolute;
  width: 16px; height: 16px;
  border-color: rgba(0,255,194,0.5);
  border-style: solid;
  pointer-events: none;
}
.c-tl { top:10px; left:10px; border-width:2px 0 0 2px; }
.c-tr { top:10px; right:10px; border-width:2px 2px 0 0; }
.c-bl { bottom:10px; left:10px; border-width:0 0 2px 2px; }
.c-br { bottom:10px; right:10px; border-width:0 2px 2px 0; }

.map-coords-hud {
  position: absolute; bottom: 10px; left: 12px;
  font-family: var(--f-mono); font-size: 9px;
  color: rgba(0,255,194,0.5); pointer-events: none;
}

.map-chips {
  display: flex; gap: 8px; flex-wrap: wrap;
  margin-top: 10px;
}
.map-chip {
  font-family: var(--f-mono); font-size: 9.5px;
  padding: 4px 10px;
  border-radius: 20px;
  border: 1px solid;
  letter-spacing: 0.06em;
}
.map-chip.cy { border-color: rgba(0,255,194,0.3); color: var(--cyan); background: rgba(0,255,194,0.07); }
.map-chip.go { border-color: rgba(245,189,25,0.3); color: var(--gold); background: rgba(245,189,25,0.07); }
.map-chip.rd { border-color: rgba(255,68,102,0.3); color: var(--red); background: rgba(255,68,102,0.07); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CELL 2 ‚Äî O-COINS HERO
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.cell-coins {
  grid-column: 2;
  grid-row: 1;
  padding: 20px 22px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.coins-big {
  font-family: var(--f-display);
  font-size: 40px;
  font-weight: 900;
  color: var(--gold);
  line-height: 1;
  text-shadow: 0 0 40px rgba(245,189,25,0.35);
  letter-spacing: -0.02em;
}
.coins-unit {
  font-family: var(--f-mono);
  font-size: 10px;
  color: var(--text-3);
  letter-spacing: 0.15em;
  margin-top: 4px;
}
.coins-delta {
  display: inline-flex; align-items: center; gap: 5px;
  font-family: var(--f-mono); font-size: 11px;
  color: var(--green);
  background: rgba(0,230,118,0.1);
  border: 1px solid rgba(0,230,118,0.2);
  border-radius: 20px;
  padding: 3px 10px;
  margin-top: 10px;
  width: fit-content;
}

/* Mini sparkline */
.sparkline {
  display: flex; align-items: flex-end;
  gap: 3px; height: 32px; margin-top: 12px;
}
.spark-bar {
  flex: 1;
  background: rgba(245,189,25,0.25);
  border-radius: 3px 3px 0 0;
  transition: background 0.3s;
  cursor: pointer;
}
.spark-bar:hover { background: rgba(245,189,25,0.6); }
.spark-bar.peak { background: rgba(245,189,25,0.5); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CELL 3 ‚Äî RANK
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.cell-rank {
  grid-column: 3;
  grid-row: 1;
  padding: 20px 22px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.rank-num {
  font-family: var(--f-display);
  font-size: 56px;
  font-weight: 900;
  color: var(--cyan);
  line-height: 1;
  text-shadow: 0 0 40px rgba(0,255,194,0.3);
  letter-spacing: -0.04em;
}
.rank-hash { font-size: 24px; color: var(--text-3); }

.rank-bar-wrap {
  margin-top: 12px;
}
.rank-bar-label {
  display: flex; justify-content: space-between;
  font-family: var(--f-mono); font-size: 9px;
  color: var(--text-3); margin-bottom: 5px;
}
.rank-track {
  height: 4px;
  background: rgba(255,255,255,0.07);
  border-radius: 2px; overflow: hidden;
}
.rank-fill {
  height: 100%; width: 34%;
  background: linear-gradient(90deg, var(--cyan), rgba(0,255,194,0.4));
  border-radius: 2px;
  box-shadow: 0 0 8px rgba(0,255,194,0.4);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CELL 4 ‚Äî LIVE FEED (tall)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.cell-feed {
  grid-column: 4;
  grid-row: 1 / 3;
  padding: 20px;
  display: flex;
  flex-direction: column;
}

.feed-scroll {
  flex: 1;
  overflow-y: auto;
  scrollbar-width: none;
  display: flex;
  flex-direction: column;
  gap: 1px;
  margin-top: 4px;
}
.feed-scroll::-webkit-scrollbar { display: none; }

.feed-row {
  display: flex; gap: 10px; align-items: flex-start;
  padding: 9px 10px;
  border-radius: var(--r-sm);
  transition: background 0.2s;
  cursor: default;
}
.feed-row:hover { background: rgba(255,255,255,0.04); }

.feed-pip {
  width: 6px; height: 6px;
  border-radius: 50%;
  flex-shrink: 0; margin-top: 4px;
}
.feed-pip.cy { background: var(--cyan); box-shadow: 0 0 6px var(--cyan); }
.feed-pip.go { background: var(--gold); box-shadow: 0 0 6px var(--gold); }
.feed-pip.rd { background: var(--red); box-shadow: 0 0 6px var(--red); }

.feed-text {
  font-family: var(--f-mono); font-size: 10.5px;
  color: var(--text-2); line-height: 1.55; flex: 1;
}
.feed-text strong { color: var(--text); font-weight: 500; }
.feed-ago {
  font-family: var(--f-mono); font-size: 9px;
  color: var(--text-3); flex-shrink: 0;
  padding-top: 1px;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ROW 2  ‚Äî  cols 2, 3
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.cell-compass {
  grid-column: 2 / 4;
  grid-row: 2;
  padding: 20px 22px;
  display: flex;
  gap: 20px;
  align-items: center;
}

/* Compass dial */
.dial-outer {
  position: relative;
  width: 120px; height: 120px;
  flex-shrink: 0;
}
.dial-ring {
  position: absolute; inset: 0;
  border-radius: 50%;
  border: 1.5px solid rgba(0,255,194,0.15);
}
.dial-ring-2 { inset: 12px; border-color: rgba(0,255,194,0.22); }
.dial-ring-3 { inset: 24px; border-color: rgba(0,255,194,0.32); }

.dial-center {
  position: absolute; inset: 34px;
  border-radius: 50%;
  background: rgba(0,255,194,0.05);
  border: 1.5px solid var(--cyan);
  box-shadow: 0 0 16px rgba(0,255,194,0.2), inset 0 0 12px rgba(0,255,194,0.05);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
}
.dial-temp {
  font-family: var(--f-display); font-size: 10px; font-weight: 700;
  color: var(--cyan); line-height: 1;
}
.dial-dist {
  font-family: var(--f-mono); font-size: 8px; color: var(--text-3);
  margin-top: 2px;
}

.dial-needle {
  position: absolute; inset: 0;
  display: flex; justify-content: center;
  animation: spin-needle 5s ease-in-out infinite alternate;
  pointer-events: none;
}
@keyframes spin-needle { from{transform:rotate(-20deg)} to{transform:rotate(30deg)} }

.needle-svg { width: 100%; height: 100%; }

.dial-dirs span {
  position: absolute;
  font-family: var(--f-mono); font-size: 9px; color: var(--text-3);
}
.d-n { top: 2px; left: 50%; transform: translateX(-50%); color: var(--cyan) !important; }
.d-s { bottom: 2px; left: 50%; transform: translateX(-50%); }
.d-e { right: 3px; top: 50%; transform: translateY(-50%); }
.d-w { left: 3px; top: 50%; transform: translateY(-50%); }

.compass-meta {
  flex: 1;
  display: flex; flex-direction: column; gap: 12px;
}
.prox-track {
  height: 5px;
  background: rgba(255,255,255,0.07);
  border-radius: 3px; overflow: hidden;
}
.prox-fill-bar {
  height: 100%; width: 68%;
  background: linear-gradient(90deg, #0055FF, var(--cyan), var(--gold));
  background-size: 200%; background-position: 60%;
  border-radius: 3px;
  box-shadow: 0 0 8px rgba(0,255,194,0.4);
  transition: width 0.6s cubic-bezier(0.34,1.56,0.64,1);
}
.prox-labels {
  display: flex; justify-content: space-between;
  font-family: var(--f-mono); font-size: 9px; color: var(--text-3);
}

.meta-row {
  display: flex; justify-content: space-between; align-items: center;
  font-family: var(--f-mono); font-size: 10.5px;
}
.meta-key { color: var(--text-3); }
.meta-val { color: var(--text); font-weight: 500; }
.meta-val.cy { color: var(--cyan); }
.meta-val.go { color: var(--gold); }

.sim-btn {
  font-family: var(--f-mono); font-size: 10px; font-weight: 500;
  letter-spacing: 0.08em; text-transform: uppercase;
  padding: 7px 14px;
  border-radius: 8px;
  border: 1px solid rgba(0,255,194,0.3);
  color: var(--cyan); background: rgba(0,255,194,0.07);
  cursor: pointer; transition: all 0.2s;
  width: fit-content;
}
.sim-btn:hover { background: rgba(0,255,194,0.14); box-shadow: 0 0 16px rgba(0,255,194,0.2); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ROW 3 ‚Äî 4 equal stats
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.bento-row3 {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--gap);
}

.stat-card {
  padding: 18px 20px;
  display: flex; flex-direction: column;
  justify-content: space-between;
  min-height: 120px;
}
.stat-big {
  font-family: var(--f-display); font-size: 36px; font-weight: 900;
  line-height: 1; letter-spacing: -0.03em;
}
.stat-sub {
  font-family: var(--f-mono); font-size: 9px;
  color: var(--text-3); letter-spacing: 0.1em;
  text-transform: uppercase; margin-top: 4px;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ROW 4 ‚Äî AR + Riddle + Chat (3 col)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.bento-row4 {
  display: grid;
  grid-template-columns: 1.1fr 1.3fr 1fr;
  gap: var(--gap);
}

/* AR cell */
.cell-ar {
  padding: 0;
  overflow: hidden;
}
.ar-viewport {
  position: relative; height: 220px;
  background: #020810;
  overflow: hidden;
}
.ar-grid-bg {
  position: absolute; inset: 0;
  background:
    repeating-linear-gradient(0deg, transparent, transparent 28px, rgba(0,255,194,0.04) 28px, rgba(0,255,194,0.04) 29px),
    repeating-linear-gradient(90deg, transparent, transparent 28px, rgba(0,255,194,0.04) 28px, rgba(0,255,194,0.04) 29px);
}
.ar-scan {
  position: absolute; left: 0; right: 0; height: 1.5px;
  background: linear-gradient(90deg, transparent, var(--cyan), transparent);
  box-shadow: 0 0 10px var(--cyan);
  animation: ar-scan-down 3s linear infinite;
}
@keyframes ar-scan-down { 0%{top:0%} 100%{top:100%} }

.ar-bracket {
  position: absolute;
  left: 50%; top: 50%;
  width: 100px; height: 100px;
  transform: translate(-50%, -50%);
}
.ar-bracket::before, .ar-bracket::after,
.ar-b3, .ar-b4 {
  content: '';
  position: absolute;
  width: 18px; height: 18px;
  border-color: var(--cyan);
  border-style: solid;
  opacity: 0.8;
}
.ar-bracket::before { top:0; left:0; border-width:2px 0 0 2px; }
.ar-bracket::after  { top:0; right:0; border-width:2px 2px 0 0; }
.ar-b3 { bottom:0; right:0; border-width:0 2px 2px 0; }
.ar-b4 { bottom:0; left:0; border-width:0 0 2px 2px; }

.crate-wrap {
  position: absolute; left: 50%; top: 50%;
  transform: translate(-50%,-50%);
  perspective: 120px;
}
.crate-3d {
  width: 44px; height: 44px;
  transform-style: preserve-3d;
  animation: crate-rot 8s linear infinite;
}
@keyframes crate-rot { to { transform: rotateY(360deg) rotateX(12deg); } }
.face {
  position: absolute; width: 44px; height: 44px;
  background: rgba(245,189,25,0.08);
  border: 1px solid rgba(245,189,25,0.5);
  display: flex; align-items: center; justify-content: center;
  font-size: 16px;
}
.face.fr { transform: translateZ(22px); }
.face.bk { transform: rotateY(180deg) translateZ(22px); }
.face.lt { transform: rotateY(-90deg) translateZ(22px); }
.face.rt { transform: rotateY(90deg) translateZ(22px); }
.face.tp { transform: rotateX(90deg) translateZ(22px); }
.face.bt { transform: rotateX(-90deg) translateZ(22px); }

.ar-hud-tl { position: absolute; top:10px; left:12px; font-family:var(--f-mono); font-size:8.5px; color:var(--cyan); opacity:.75; line-height:1.7; }
.ar-hud-tr { position: absolute; top:10px; right:12px; font-family:var(--f-mono); font-size:8.5px; color:var(--gold); opacity:.75; line-height:1.7; text-align:right; }
.ar-detect { position:absolute; bottom:10px; left:50%; transform:translateX(-50%); font-family:var(--f-mono); font-size:9px; color:var(--gold); letter-spacing:0.12em; white-space:nowrap; animation:blink-slow 1.2s ease-in-out infinite alternate; }
@keyframes blink-slow { from{opacity:1} to{opacity:.5} }

.ar-actions {
  display: flex; gap: 8px;
  padding: 12px 14px;
}

/* ‚îÄ‚îÄ RIDDLE CHAIN CELL ‚îÄ‚îÄ */
.cell-riddle {
  padding: 18px 20px;
  display: flex; flex-direction: column;
}

.chain-steps {
  flex: 1;
  display: flex; flex-direction: column; gap: 6px;
  margin-top: 4px;
}
.chain-step {
  display: flex; gap: 10px; align-items: flex-start;
}
.step-col { display: flex; flex-direction: column; align-items: center; }
.step-num {
  width: 26px; height: 26px; border-radius: 50%;
  border: 1.5px solid; display: flex; align-items: center; justify-content: center;
  font-family: var(--f-mono); font-size: 10px; font-weight: 700;
  flex-shrink: 0;
}
.step-num.done { border-color: var(--cyan); color: var(--cyan); background: rgba(0,255,194,0.08); }
.step-num.active { border-color: var(--gold); color: var(--gold); background: rgba(245,189,25,0.08); box-shadow: 0 0 12px rgba(245,189,25,0.3); }
.step-num.lock { border-color: var(--text-3); color: var(--text-3); }
.step-line { width: 1.5px; height: 14px; background: var(--border); margin: 2px 0; border-radius: 1px; }
.step-line.done { background: var(--cyan); box-shadow: 0 0 4px var(--cyan); }

.step-body {
  flex: 1; padding: 8px 12px;
  background: rgba(255,255,255,0.025);
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
  margin-bottom: 6px;
  transition: border-color 0.2s;
}
.step-body.done { border-color: rgba(0,255,194,0.12); }
.step-body.active { border-color: rgba(245,189,25,0.2); background: rgba(245,189,25,0.03); }
.step-body.locked { opacity: 0.35; }

.step-title { font-family: var(--f-mono); font-size: 9.5px; font-weight: 500; letter-spacing: 0.08em; margin-bottom: 3px; }
.step-body.done .step-title { color: var(--cyan); }
.step-body.active .step-title { color: var(--gold); }
.step-body.locked .step-title { color: var(--text-3); }

.step-text { font-family: var(--f-body); font-size: 11.5px; color: var(--text-2); line-height: 1.45; }
.step-body.locked .step-text { filter: blur(3px); }

.riddle-input-row { display: flex; gap: 6px; margin-top: 4px; }
.r-input {
  flex: 1;
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 7px 12px;
  font-family: var(--f-mono); font-size: 11px;
  color: var(--text); outline: none;
  transition: border-color 0.2s;
}
.r-input::placeholder { color: var(--text-3); }
.r-input:focus { border-color: rgba(245,189,25,0.4); }

/* ‚îÄ‚îÄ CHAT CELL ‚îÄ‚îÄ */
.cell-chat {
  padding: 18px 20px;
  display: flex; flex-direction: column;
}
.chat-msgs {
  flex: 1; overflow-y: auto; scrollbar-width: none;
  display: flex; flex-direction: column; gap: 8px;
  margin-top: 4px; padding-right: 2px;
  min-height: 0;
  max-height: 200px;
}
.chat-msgs::-webkit-scrollbar { display: none; }
.chat-m {
  display: flex; gap: 8px; align-items: flex-start;
  animation: msg-in 0.25s ease;
}
@keyframes msg-in { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
.chat-av {
  width: 22px; height: 22px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--f-mono); font-size: 8.5px; font-weight: 700;
  flex-shrink: 0; border: 1px solid;
}
.chat-body { flex: 1; }
.chat-name-row { font-family: var(--f-mono); font-size: 8.5px; color: var(--text-3); margin-bottom: 2px; }
.chat-bubble {
  font-family: var(--f-body); font-size: 12.5px; color: var(--text-2);
  background: rgba(255,255,255,0.035);
  border: 1px solid var(--border);
  border-radius: 4px 10px 10px 10px;
  padding: 6px 10px; line-height: 1.4;
}
.chat-bubble.mine {
  background: rgba(0,255,194,0.07);
  border-color: rgba(0,255,194,0.15);
  border-radius: 10px 4px 10px 10px;
}

.chat-input-wrap {
  display: flex; gap: 6px; margin-top: 10px;
}
.c-input {
  flex: 1;
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 8px 12px;
  font-family: var(--f-mono); font-size: 11px;
  color: var(--text); outline: none;
  transition: border-color 0.2s;
}
.c-input::placeholder { color: var(--text-3); }
.c-input:focus { border-color: rgba(0,255,194,0.3); }
.chat-note { font-family: var(--f-mono); font-size: 8.5px; color: var(--text-3); margin-top: 5px; letter-spacing: 0.05em; }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ROW 5 ‚Äî Bazaar + Leaderboard + Safety
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.bento-row5 {
  display: grid;
  grid-template-columns: 1.4fr 1.2fr 1fr;
  gap: var(--gap);
}

/* BAZAAR */
.cell-bazaar { padding: 18px 20px; }
.bazaar-items {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: 7px; margin-top: 8px;
}
.bz-item {
  background: rgba(255,255,255,0.025);
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
  padding: 12px 8px;
  text-align: center; cursor: pointer;
  transition: all 0.2s; position: relative; overflow: hidden;
}
.bz-item::before {
  content: '';
  position: absolute; top:0; left:0; right:0; height:1px;
  background: linear-gradient(90deg, transparent, rgba(245,189,25,0.4), transparent);
  opacity: 0; transition: opacity 0.2s;
}
.bz-item:hover { border-color: rgba(245,189,25,0.25); transform: translateY(-2px); }
.bz-item:hover::before { opacity: 1; }
.bz-emoji { font-size: 22px; }
.bz-name { font-family: var(--f-body); font-size: 10.5px; font-weight: 600; color: var(--text); margin-top: 5px; line-height: 1.2; }
.bz-price { font-family: var(--f-display); font-size: 11px; font-weight: 700; color: var(--gold); margin-top: 3px; }
.bz-place { font-family: var(--f-mono); font-size: 8px; color: var(--text-3); margin-top: 1px; }

/* LEADERBOARD */
.cell-lb { padding: 18px 20px; }
.lb-rows { display: flex; flex-direction: column; gap: 4px; margin-top: 8px; }
.lb-r {
  display: flex; align-items: center; gap: 9px;
  padding: 8px 10px;
  border-radius: var(--r-sm);
  background: rgba(255,255,255,0.02);
  border: 1px solid transparent;
  transition: all 0.2s;
}
.lb-r:hover { background: rgba(255,255,255,0.04); border-color: var(--border); }
.lb-r.r1 { border-color: rgba(245,189,25,0.2); background: rgba(245,189,25,0.04); }
.lb-r.you { border-color: rgba(0,255,194,0.18); background: rgba(0,255,194,0.03); }

.lb-rank-n { font-family: var(--f-display); font-size: 13px; font-weight: 700; width: 22px; text-align: center; }
.lb-r.r1 .lb-rank-n { color: var(--gold); }
.lb-r.r2 .lb-rank-n { color: #A8A8A8; }
.lb-r.r3 .lb-rank-n { color: #9B7040; }
.lb-r .lb-rank-n { color: var(--text-3); }

.lb-av {
  width: 24px; height: 24px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--f-mono); font-size: 8.5px; font-weight: 700; border: 1px solid;
}
.lb-info { flex: 1; }
.lb-n { font-family: var(--f-body); font-size: 12px; font-weight: 600; color: var(--text); }
.lb-z { font-family: var(--f-mono); font-size: 8.5px; color: var(--text-3); }
.lb-sc { font-family: var(--f-display); font-size: 12px; font-weight: 700; color: var(--cyan); }

/* SAFETY */
.cell-safety { padding: 18px 20px; display: flex; flex-direction: column; gap: 10px; }

.sos-ring {
  position: relative;
  width: 88px; height: 88px; margin: 0 auto;
  cursor: pointer;
}
.sos-ring-outer {
  position: absolute; inset: 0;
  border-radius: 50%;
  border: 2px solid rgba(255,68,102,0.4);
  animation: sos-pulse 2s ease-in-out infinite;
}
@keyframes sos-pulse {
  0%,100%{transform:scale(1);opacity:.8}
  50%{transform:scale(1.08);opacity:.4}
}
.sos-ring-inner {
  position: absolute; inset: 10px;
  border-radius: 50%;
  background: rgba(255,68,102,0.1);
  border: 2px solid var(--red);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  transition: all 0.2s;
  box-shadow: 0 0 20px rgba(255,68,102,0.2);
}
.sos-ring:hover .sos-ring-inner {
  background: rgba(255,68,102,0.2);
  box-shadow: 0 0 32px rgba(255,68,102,0.5);
}
.sos-ring:active .sos-ring-inner { transform: scale(0.96); }
.sos-label { font-family: var(--f-display); font-size: 14px; font-weight: 900; color: var(--red); }
.sos-sub-l { font-family: var(--f-mono); font-size: 7px; color: rgba(255,68,102,0.6); }

.shield-rows { display: flex; flex-direction: column; gap: 5px; }
.shield-r {
  display: flex; align-items: center; justify-content: space-between;
  padding: 7px 10px;
  background: rgba(255,255,255,0.025);
  border: 1px solid var(--border);
  border-radius: var(--r-sm);
}
.shield-r-label { font-family: var(--f-mono); font-size: 10px; color: var(--text-2); }
.shield-badge {
  font-family: var(--f-mono); font-size: 8.5px;
  padding: 2px 8px; border-radius: 20px;
}
.badge-ok { background: rgba(0,230,118,0.12); border: 1px solid rgba(0,230,118,0.25); color: var(--green); }
.badge-warn { background: rgba(245,189,25,0.12); border: 1px solid rgba(245,189,25,0.25); color: var(--gold); }

.toggle-mini {
  display: flex; align-items: center; gap: 7px;
  font-family: var(--f-mono); font-size: 9.5px; color: var(--text-2);
  cursor: pointer;
}
.t-sw {
  width: 32px; height: 18px; border-radius: 9px;
  background: rgba(255,255,255,0.07);
  border: 1px solid var(--border);
  position: relative; transition: all 0.3s; cursor: pointer; flex-shrink: 0;
}
.t-sw.on { background: rgba(0,255,194,0.2); border-color: rgba(0,255,194,0.4); }
.t-sw::after {
  content: '';
  position: absolute;
  width: 12px; height: 12px; border-radius: 50%;
  background: var(--text-3); top: 2px; left: 2px;
  transition: all 0.3s;
}
.t-sw.on::after { background: var(--cyan); transform: translateX(14px); box-shadow: 0 0 6px var(--cyan); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ADMIN ROW
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.bento-row6 {
  display: grid;
  grid-template-columns: 1.6fr 1fr 1fr;
  gap: var(--gap);
}

.cell-admin-map {
  padding: 18px 20px;
  display: flex; flex-direction: column;
}
.admin-map-view {
  flex: 1; min-height: 160px;
  border-radius: var(--r-sm);
  background: #030810;
  border: 1px solid var(--border);
  position: relative; overflow: hidden; cursor: crosshair;
}
.admin-drop-dot {
  position: absolute; width: 10px; height: 10px;
  border-radius: 50%; background: var(--gold);
  box-shadow: 0 0 10px var(--gold);
  transform: translate(-50%,-50%);
  pointer-events: none; display: none;
  animation: drop-pop 0.4s ease;
}
@keyframes drop-pop { from{transform:translate(-50%,-50%) scale(0);opacity:1} to{transform:translate(-50%,-50%) scale(1.2)} }

.admin-tools-row { display: flex; gap: 8px; margin-top: 10px; align-items: center; flex-wrap: wrap; }
.tier-select {
  background: rgba(255,255,255,0.04); border: 1px solid var(--border);
  border-radius: 8px; padding: 6px 10px;
  font-family: var(--f-mono); font-size: 10px; color: var(--text); outline: none; cursor: pointer;
}

.cell-broadcast { padding: 18px 20px; display: flex; flex-direction: column; gap: 10px; }
.r-slider {
  -webkit-appearance: none; appearance: none;
  width: 100%; height: 3px;
  background: rgba(255,255,255,0.07);
  border-radius: 2px; outline: none; cursor: pointer;
}
.r-slider::-webkit-slider-thumb {
  -webkit-appearance: none; width: 14px; height: 14px;
  border-radius: 50%; background: var(--cyan); cursor: pointer;
  box-shadow: 0 0 8px var(--cyan);
}

.cell-riddle-write { padding: 18px 20px; display: flex; flex-direction: column; gap: 8px; }
.a-input {
  background: rgba(255,255,255,0.04); border: 1px solid var(--border);
  border-radius: 8px; padding: 8px 12px;
  font-family: var(--f-mono); font-size: 10.5px;
  color: var(--text); outline: none; width: 100%;
  transition: border-color 0.2s;
}
.a-input:focus { border-color: rgba(0,255,194,0.3); }
.a-input::placeholder { color: var(--text-3); }
textarea.a-input { resize: none; height: 60px; }

/* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
.btn {
  font-family: var(--f-mono); font-size: 10px; font-weight: 500;
  letter-spacing: 0.1em; text-transform: uppercase;
  padding: 8px 16px; border-radius: 8px; border: 1px solid;
  cursor: pointer; transition: all 0.2s; background: transparent;
  display: inline-flex; align-items: center; gap: 5px;
  white-space: nowrap;
}
.btn-cy { border-color: rgba(0,255,194,0.35); color: var(--cyan); }
.btn-cy:hover { background: rgba(0,255,194,0.1); box-shadow: 0 0 16px rgba(0,255,194,0.2); }
.btn-go { border-color: rgba(245,189,25,0.35); color: var(--gold); }
.btn-go:hover { background: rgba(245,189,25,0.1); box-shadow: 0 0 16px rgba(245,189,25,0.2); }
.btn-rd { border-color: rgba(255,68,102,0.35); color: var(--red); }
.btn-rd:hover { background: rgba(255,68,102,0.1); box-shadow: 0 0 16px rgba(255,68,102,0.2); }
.btn-sm { padding: 6px 12px; font-size: 9.5px; }
.btn-xs { padding: 5px 9px; font-size: 9px; }

/* ‚îÄ‚îÄ OFFLINE PACKS ROW ‚îÄ‚îÄ */
.bento-row7 {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--gap);
}
.pack-card { padding: 16px 18px; }
.pack-top { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
.pack-icon { font-size: 26px; }
.pack-name { font-family: var(--f-body); font-size: 13px; font-weight: 600; color: var(--text); }
.pack-meta2 { font-family: var(--f-mono); font-size: 9px; color: var(--text-3); margin-top: 1px; }
.pack-bar2 { height: 3px; background: rgba(255,255,255,0.07); border-radius: 2px; overflow: hidden; margin-bottom: 8px; }
.pack-fill2 { height: 100%; border-radius: 2px; background: var(--cyan); box-shadow: 0 0 6px var(--cyan); transition: width 0.5s ease; }
.pack-foot { display: flex; justify-content: space-between; align-items: center; }
.pack-size2 { font-family: var(--f-mono); font-size: 9px; color: var(--text-3); }

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.modal-bg {
  display: none; position: fixed; inset: 0;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(6px);
  z-index: 1000; align-items: center; justify-content: center;
}
.modal-bg.open { display: flex; }
.modal-panel {
  background: rgba(10,18,28,0.92);
  border: 1px solid;
  border-radius: 18px;
  padding: 32px;
  width: 320px;
  text-align: center;
  animation: modal-pop 0.35s cubic-bezier(0.34,1.56,0.64,1);
  position: relative; overflow: hidden;
}
@keyframes modal-pop { from{transform:scale(0.75);opacity:0} to{transform:scale(1);opacity:1} }
.modal-panel.gold-modal { border-color: rgba(245,189,25,0.35); box-shadow: 0 0 60px rgba(245,189,25,0.15); }
.modal-panel.red-modal  { border-color: rgba(255,68,102,0.4); box-shadow: 0 0 60px rgba(255,68,102,0.2); }

.modal-shimmer {
  position: absolute; inset: 0; pointer-events: none;
  background: linear-gradient(45deg, transparent 30%, rgba(245,189,25,0.06) 50%, transparent 70%);
  animation: shimmer 2.5s linear infinite;
}
@keyframes shimmer { 0%{transform:translateX(-100%) translateY(-100%)} 100%{transform:translateX(100%) translateY(100%)} }

.modal-code {
  font-family: var(--f-display); font-size: 28px; font-weight: 900;
  color: var(--gold); letter-spacing: 0.3em;
  text-shadow: 0 0 24px rgba(245,189,25,0.5);
  margin: 12px 0;
}

.modal-qr {
  width: 100px; height: 100px; background: #fff;
  border-radius: 6px; margin: 0 auto 10px;
  display: grid; grid-template-columns: repeat(7,1fr);
  grid-template-rows: repeat(7,1fr); padding: 8px; gap: 1.5px;
}
.qc { border-radius: 1px; }

.modal-timer { font-family: var(--f-mono); font-size: 11px; color: var(--red); }
.modal-af { font-family: var(--f-mono); font-size: 8.5px; color: var(--text-3); margin-top: 6px; }

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast {
  position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%);
  background: rgba(10,20,30,0.9);
  border: 1px solid rgba(0,255,194,0.3);
  border-radius: 10px;
  padding: 10px 20px;
  font-family: var(--f-mono); font-size: 11px; color: var(--cyan);
  box-shadow: 0 0 24px rgba(0,255,194,0.2);
  z-index: 5000; opacity: 0;
  transition: opacity 0.3s; pointer-events: none; white-space: nowrap;
}
.toast.vis { opacity: 1; }

/* ‚îÄ‚îÄ PAGE LOAD ANIMATIONS ‚îÄ‚îÄ */
.card, .topbar, .bento-row3 .stat-card,
.bento-row4 > *, .bento-row5 > *,
.bento-row6 > *, .bento-row7 > * {
  opacity: 0;
  animation: reveal 0.55s ease forwards;
}

@keyframes reveal { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }

.topbar        { animation-delay: 0.05s; }
.cell-map      { animation-delay: 0.12s; }
.cell-coins    { animation-delay: 0.18s; }
.cell-rank     { animation-delay: 0.22s; }
.cell-feed     { animation-delay: 0.14s; }
.cell-compass  { animation-delay: 0.26s; }

.bento-row3 .stat-card:nth-child(1) { animation-delay: 0.30s; }
.bento-row3 .stat-card:nth-child(2) { animation-delay: 0.35s; }
.bento-row3 .stat-card:nth-child(3) { animation-delay: 0.40s; }
.bento-row3 .stat-card:nth-child(4) { animation-delay: 0.45s; }

.bento-row4 > *:nth-child(1) { animation-delay: 0.48s; }
.bento-row4 > *:nth-child(2) { animation-delay: 0.52s; }
.bento-row4 > *:nth-child(3) { animation-delay: 0.56s; }

.bento-row5 > *:nth-child(1) { animation-delay: 0.60s; }
.bento-row5 > *:nth-child(2) { animation-delay: 0.64s; }
.bento-row5 > *:nth-child(3) { animation-delay: 0.68s; }

.bento-row6 > *:nth-child(1) { animation-delay: 0.72s; }
.bento-row6 > *:nth-child(2) { animation-delay: 0.76s; }
.bento-row6 > *:nth-child(3) { animation-delay: 0.80s; }

.bento-row7 > *:nth-child(1) { animation-delay: 0.84s; }
.bento-row7 > *:nth-child(2) { animation-delay: 0.88s; }
.bento-row7 > *:nth-child(3) { animation-delay: 0.92s; }
.bento-row7 > *:nth-child(4) { animation-delay: 0.96s; }

/* SCROLLBAR */
::-webkit-scrollbar { width: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); border-radius: 2px; }
</style>
</head>
<body>

<!-- REDEEM MODAL -->
<div class="modal-bg" id="redeemBg">
  <div class="modal-panel gold-modal">
    <div class="modal-shimmer"></div>
    <div style="font-family:var(--f-mono);font-size:9.5px;color:var(--gold);letter-spacing:0.2em;">‚óà BAZAAR REDEMPTION</div>
    <div style="font-size:28px;margin:8px 0;" id="mEmoji">üßã</div>
    <div style="font-family:var(--f-body);font-size:13px;color:var(--text);" id="mName">Kada Chai</div>
    <div class="modal-code" id="mCode">HNT-4X7K</div>
    <div class="modal-qr" id="mQr"></div>
    <div class="modal-timer" id="mTimer">‚è± Expires in: 04:59</div>
    <div class="modal-af">üîí Anti-fraud ¬∑ Single-use ¬∑ Server-signed</div>
    <div style="margin-top:16px;">
      <button class="btn btn-go btn-sm" onclick="closeModals()">CLOSE</button>
    </div>
  </div>
</div>

<!-- SOS MODAL -->
<div class="modal-bg" id="sosBg">
  <div class="modal-panel red-modal">
    <div style="font-family:var(--f-mono);font-size:9.5px;color:var(--red);letter-spacing:0.2em;">‚ö† SOS BROADCAST ACTIVE</div>
    <div style="font-size:44px;margin:14px 0;">üÜò</div>
    <div style="font-family:var(--f-body);font-size:13px;color:var(--text);margin-bottom:6px;">Broadcasting to <strong style="color:var(--cyan);">3 trusted contacts</strong></div>
    <div style="font-family:var(--f-mono);font-size:10px;color:var(--text-3);">üìç 11.2588¬∞N ¬∑ 75.7804¬∞E ¬∑ Calicut Beach</div>
    <div style="font-family:var(--f-mono);font-size:10px;color:var(--red);margin-top:6px;" id="sosT">Broadcasting: 00:00</div>
    <div style="margin-top:18px;">
      <button class="btn btn-rd btn-sm" onclick="closeSOS()">CANCEL SOS</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<div class="shell">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="logo">OKH<em>‚óà</em>TA</div>
    <div class="divider-v"></div>
    <div class="pulse-dot"></div>
    <div class="zone-label">LIVE ¬∑ <strong>CALICUT ZONE-7</strong> ¬∑ SM STREET</div>
    <div class="topbar-right">
      <div class="stat-pill">
        <div class="stat-pill-val" id="topCoins">2,840</div>
        <div class="stat-pill-lbl">O-Coins</div>
      </div>
      <div class="divider-v"></div>
      <div class="stat-pill">
        <div class="stat-pill-val cyan">23</div>
        <div class="stat-pill-lbl">Online</div>
      </div>
      <div class="divider-v"></div>
      <div class="stat-pill">
        <div class="stat-pill-val cyan">#47</div>
        <div class="stat-pill-lbl">Rank</div>
      </div>
      <div class="avatar-ring">AX</div>
    </div>
  </div>

  <!-- ROW 1‚Äì2: Main bento (map + stats + feed + compass) -->
  <div class="bento">

    <!-- MAP -->
    <div class="card accent-cyan cell-map">
      <div class="card-label c-cyan">Live Tactical Map</div>
      <div class="map-wrap">
        <svg class="map-svg" viewBox="0 0 700 380" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="g" width="35" height="35" patternUnits="userSpaceOnUse">
              <path d="M 35 0 L 0 0 0 35" fill="none" stroke="rgba(0,255,194,0.05)" stroke-width="1"/>
            </pattern>
            <radialGradient id="h1" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#FF4466" stop-opacity="0.28"/>
              <stop offset="100%" stop-color="#FF4466" stop-opacity="0"/>
            </radialGradient>
            <radialGradient id="h2" cx="50%" cy="50%" r="50%">
              <stop offset="0%" stop-color="#FF4466" stop-opacity="0.16"/>
              <stop offset="100%" stop-color="#FF4466" stop-opacity="0"/>
            </radialGradient>
            <filter id="glow"><feGaussianBlur stdDeviation="2.5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          </defs>
          <rect width="700" height="380" fill="#050D18"/>
          <rect width="700" height="380" fill="url(#g)"/>
          <!-- Roads -->
          <line x1="0" y1="190" x2="700" y2="190" stroke="rgba(0,255,194,0.1)" stroke-width="10"/>
          <line x1="350" y1="0" x2="350" y2="380" stroke="rgba(0,255,194,0.1)" stroke-width="10"/>
          <line x1="0" y1="120" x2="700" y2="120" stroke="rgba(0,255,194,0.06)" stroke-width="5"/>
          <line x1="0" y1="300" x2="700" y2="300" stroke="rgba(0,255,194,0.06)" stroke-width="5"/>
          <line x1="180" y1="0" x2="180" y2="380" stroke="rgba(0,255,194,0.06)" stroke-width="5"/>
          <line x1="530" y1="0" x2="530" y2="380" stroke="rgba(0,255,194,0.06)" stroke-width="5"/>
          <!-- Diagonals -->
          <line x1="0" y1="0" x2="280" y2="260" stroke="rgba(0,255,194,0.04)" stroke-width="3"/>
          <line x1="700" y1="0" x2="430" y2="250" stroke="rgba(0,255,194,0.04)" stroke-width="3"/>
          <!-- Buildings -->
          <rect x="40" y="50" width="60" height="45" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <rect x="115" y="40" width="38" height="60" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <rect x="40" y="220" width="65" height="55" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <rect x="400" y="50" width="75" height="48" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <rect x="490" y="35" width="45" height="70" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <rect x="400" y="220" width="85" height="60" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <rect x="580" y="230" width="55" height="50" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <rect x="240" y="40" width="70" height="55" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <rect x="240" y="305" width="70" height="55" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <rect x="560" y="130" width="60" height="45" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.08)" stroke-width="1"/>
          <!-- Road labels -->
          <text x="358" y="186" fill="rgba(0,255,194,0.25)" font-family="JetBrains Mono" font-size="8">SM STREET</text>
          <text x="188" y="186" fill="rgba(0,255,194,0.2)" font-family="JetBrains Mono" font-size="7.5">BEACH RD</text>
          <!-- Water -->
          <rect x="640" y="0" width="60" height="380" fill="rgba(0,80,180,0.06)" stroke="rgba(0,120,255,0.1)" stroke-width="1"/>
          <text x="648" y="60" fill="rgba(0,120,255,0.25)" font-family="JetBrains Mono" font-size="7" transform="rotate(90,648,60)">ARABIAN SEA</text>
          <!-- Heatmaps -->
          <ellipse cx="350" cy="190" rx="90" ry="70" fill="url(#h1)"/>
          <ellipse cx="160" cy="160" rx="65" ry="50" fill="url(#h2)"/>
          <ellipse cx="555" cy="270" rx="55" ry="45" fill="url(#h2)"/>
          <!-- Zone polygon -->
          <polygon points="130,80 570,80 610,320 90,320" fill="none" stroke="rgba(0,255,194,0.12)" stroke-width="1" stroke-dasharray="8,4"/>
          <text x="136" y="96" fill="rgba(0,255,194,0.25)" font-family="JetBrains Mono" font-size="7.5">‚óà ZONE-7 ¬∑ ACTIVE</text>
          <!-- Players -->
          <circle cx="204" cy="155" r="4" fill="#00E676" filter="url(#glow)"/>
          <circle cx="280" cy="250" r="4" fill="#F5BD19" filter="url(#glow)"/>
          <circle cx="460" cy="165" r="4" fill="#00E676" filter="url(#glow)"/>
          <circle cx="490" cy="275" r="4" fill="#FF4466" filter="url(#glow)"/>
          <circle cx="148" cy="280" r="4" fill="#00E676" filter="url(#glow)"/>
          <circle cx="590" cy="160" r="4" fill="#F5BD19" filter="url(#glow)"/>
          <!-- Loot crates -->
          <rect x="118" y="205" width="12" height="12" fill="rgba(245,189,25,0.15)" stroke="#F5BD19" stroke-width="1.5" rx="2">
            <animate attributeName="opacity" values="0.5;1;0.5" dur="1.8s" repeatCount="indefinite"/>
          </rect>
          <rect x="437" y="108" width="12" height="12" fill="rgba(245,189,25,0.15)" stroke="#F5BD19" stroke-width="1.5" rx="2">
            <animate attributeName="opacity" values="0.5;1;0.5" dur="2.2s" repeatCount="indefinite"/>
          </rect>
          <rect x="300" y="308" width="12" height="12" fill="rgba(245,189,25,0.15)" stroke="#F5BD19" stroke-width="1.5" rx="2">
            <animate attributeName="opacity" values="0.5;1;0.5" dur="2.5s" repeatCount="indefinite"/>
          </rect>
          <!-- Riddle anchor -->
          <circle cx="530" cy="120" r="9" fill="none" stroke="rgba(0,255,194,0.5)" stroke-width="1.5" stroke-dasharray="3,2">
            <animateTransform attributeName="transform" type="rotate" values="0 530 120;360 530 120" dur="6s" repeatCount="indefinite"/>
          </circle>
          <text x="524" y="124" font-size="9" fill="rgba(0,255,194,0.9)">?</text>
          <!-- YOU -->
          <circle cx="350" cy="190" r="7" fill="#00FFC2" opacity="0.85" filter="url(#glow)">
            <animate attributeName="r" values="7;12;7" dur="2.5s" repeatCount="indefinite"/>
            <animate attributeName="opacity" values="0.85;0.4;0.85" dur="2.5s" repeatCount="indefinite"/>
          </circle>
          <circle cx="350" cy="190" r="5" fill="#00FFC2"/>
          <text x="358" y="183" fill="rgba(0,255,194,0.7)" font-family="JetBrains Mono" font-size="7">YOU</text>
        </svg>
        <div class="map-hud-corner c-tl"></div>
        <div class="map-hud-corner c-tr"></div>
        <div class="map-hud-corner c-bl"></div>
        <div class="map-hud-corner c-br"></div>
        <div class="map-coords-hud">11.2588¬∞N ¬∑ 75.7804¬∞E</div>
      </div>
      <div class="map-chips">
        <span class="map-chip cy">‚óè 23 Hunters</span>
        <span class="map-chip go">üì¶ 3 Drops</span>
        <span class="map-chip rd">üî• Zone Hot</span>
        <span class="map-chip cy">1.2km Nearest</span>
      </div>
    </div>

    <!-- O-COINS -->
    <div class="card accent-gold cell-coins">
      <div class="card-label c-gold">O-Coin Balance</div>
      <div>
        <div class="coins-big" id="coinsDisplay">2,840</div>
        <div class="coins-unit">O-COINS</div>
        <div class="coins-delta">‚ñ≤ +380 this week</div>
      </div>
      <div>
        <div style="font-family:var(--f-mono);font-size:9px;color:var(--text-3);margin-bottom:4px;letter-spacing:0.08em;">7-DAY ACTIVITY</div>
        <div class="sparkline" id="sparkline"></div>
      </div>
    </div>

    <!-- RANK -->
    <div class="card cell-rank">
      <div class="card-label c-cyan">District Rank</div>
      <div>
        <div class="rank-num"><span class="rank-hash">#</span>47</div>
        <div style="font-family:var(--f-mono);font-size:9.5px;color:var(--text-3);margin-top:6px;">CALICUT DISTRICT ¬∑ 847 HUNTERS</div>
      </div>
      <div class="rank-bar-wrap">
        <div class="rank-bar-label">
          <span>Your score</span>
          <span style="color:var(--cyan);">2,840 / 9,840</span>
        </div>
        <div class="rank-track"><div class="rank-fill"></div></div>
        <div style="font-family:var(--f-mono);font-size:9px;color:var(--text-3);margin-top:5px;">‚ñ≤ 6 positions this week</div>
      </div>
    </div>

    <!-- LIVE FEED -->
    <div class="card cell-feed">
      <div class="card-label">Live Activity</div>
      <div class="feed-scroll" id="feedScroll"></div>
    </div>

    <!-- COMPASS (spans 2 cols) -->
    <div class="card cell-compass" style="grid-column:2/4; grid-row:2;">
      <div class="card-label c-cyan" style="margin-bottom:0;">Hot / Cold Navigator</div>

      <div class="dial-outer">
        <div class="dial-ring dial-ring-1"></div>
        <div class="dial-ring dial-ring-2"></div>
        <div class="dial-ring dial-ring-3"></div>
        <div class="dial-center">
          <div class="dial-temp" id="dialTemp">WARM</div>
          <div class="dial-dist" id="dialDist">~140M</div>
        </div>
        <div class="dial-needle">
          <svg class="needle-svg" viewBox="0 0 120 120">
            <line x1="60" y1="60" x2="60" y2="16" stroke="#F5BD19" stroke-width="2" stroke-linecap="round" opacity="0.9"/>
            <circle cx="60" cy="60" r="3" fill="rgba(245,189,25,0.6)"/>
          </svg>
        </div>
        <div class="dial-dirs">
          <span class="d-n">N</span><span class="d-s">S</span>
          <span class="d-e">E</span><span class="d-w">W</span>
        </div>
      </div>

      <div class="compass-meta">
        <div>
          <div class="prox-labels" style="margin-bottom:4px;">
            <span>‚ùÑ COLD</span><span>üî• HOT</span>
          </div>
          <div class="prox-track"><div class="prox-fill-bar" id="proxBar"></div></div>
        </div>
        <div style="display:flex;flex-direction:column;gap:5px;">
          <div class="meta-row"><span class="meta-key">Target</span><span class="meta-val go">Crate #B3 ¬∑ Gold</span></div>
          <div class="meta-row"><span class="meta-key">Haptic</span><span class="meta-val cy">Medium Pulse</span></div>
          <div class="meta-row"><span class="meta-key">Zone</span><span class="meta-val">SM Street</span></div>
        </div>
        <button class="sim-btn" onclick="simProx()">‚ü≥ Simulate Movement</button>
      </div>
    </div>

  </div><!-- /bento -->

  <!-- ROW 3: 4 stat cards -->
  <div class="bento-row3">
    <div class="card stat-card">
      <div class="card-label">Hunters Online</div>
      <div class="stat-big" style="color:var(--cyan);">23</div>
      <div class="stat-sub">Active in zone-7</div>
    </div>
    <div class="card stat-card">
      <div class="card-label c-gold">Loot Drops</div>
      <div class="stat-big" style="color:var(--gold);">3</div>
      <div class="stat-sub">Claimable now</div>
    </div>
    <div class="card stat-card">
      <div class="card-label">Riddle Progress</div>
      <div class="stat-big" style="color:var(--cyan);">2<span style="font-size:18px;color:var(--text-3)">/5</span></div>
      <div class="stat-sub">Chain #7 ¬∑ Heritage</div>
    </div>
    <div class="card stat-card accent-red">
      <div class="card-label c-red">Shield Status</div>
      <div class="stat-big" style="color:var(--green);font-size:28px;">ARMED</div>
      <div class="stat-sub">All systems nominal</div>
    </div>
  </div>

  <!-- ROW 4: AR + Riddle + Chat -->
  <div class="bento-row4">

    <!-- AR -->
    <div class="card cell-ar">
      <div class="ar-viewport">
        <div class="ar-grid-bg"></div>
        <div class="ar-scan"></div>
        <div class="ar-hud-tl">ALT: 12.4m<br>AZM: 047¬∞<br>DIST: 48m<br>CONF: 94%</div>
        <div class="ar-hud-tr">CRATE #A7<br>TIER: GOLD<br>+120 O‚óà<br>08:42</div>
        <div class="ar-bracket">
          <div class="ar-b3"></div><div class="ar-b4"></div>
          <div class="crate-wrap">
            <div class="crate-3d">
              <div class="face fr">üì¶</div>
              <div class="face bk"></div>
              <div class="face lt"></div>
              <div class="face rt"></div>
              <div class="face tp"></div>
              <div class="face bt"></div>
            </div>
          </div>
        </div>
        <div class="ar-detect">‚óà CRATE DETECTED ¬∑ TAP TO CLAIM ‚óà</div>
      </div>
      <div class="ar-actions">
        <div style="padding:0 2px;">
          <div class="card-label" style="margin-bottom:6px;">AR Scanner</div>
          <div style="font-family:var(--f-mono);font-size:9px;color:var(--text-3);margin-bottom:10px;">ARCore sim ¬∑ Crate 48m NE</div>
        </div>
        <div style="margin-left:auto;display:flex;gap:7px;align-items:center;">
          <button class="btn btn-go btn-sm" onclick="claimCrate()">‚ö° CLAIM</button>
          <button class="btn btn-cy btn-sm" onclick="toast('‚óé Deep scanning area...')">‚óé SCAN</button>
        </div>
      </div>
    </div>

    <!-- RIDDLE -->
    <div class="card cell-riddle">
      <div class="card-label c-gold">Riddle Chain #7 ¬∑ Heritage</div>
      <div class="chain-steps">

        <div class="chain-step">
          <div class="step-col">
            <div class="step-num done">‚úì</div>
            <div class="step-line done"></div>
          </div>
          <div class="step-body done">
            <div class="step-title">CLUE 1 ‚Äî COMPLETE</div>
            <div class="step-text">Mananchira Square Clock Tower ¬∑ <span style="color:var(--cyan);">+50 O‚óà</span></div>
          </div>
        </div>

        <div class="chain-step">
          <div class="step-col">
            <div class="step-num done">‚úì</div>
            <div class="step-line done"></div>
          </div>
          <div class="step-body done">
            <div class="step-title">CLUE 2 ‚Äî COMPLETE</div>
            <div class="step-text">SM Street Heritage Arch ¬∑ <span style="color:var(--cyan);">+80 O‚óà</span></div>
          </div>
        </div>

        <div class="chain-step">
          <div class="step-col">
            <div class="step-num active">3</div>
            <div class="step-line"></div>
          </div>
          <div class="step-body active">
            <div class="step-title">CLUE 3 ‚Äî ACTIVE üîì</div>
            <div class="step-text" style="margin-bottom:8px;">"I connect two districts across water that is neither river nor sea. My iron ribs echo a thousand years of trade."</div>
            <div class="riddle-input-row">
              <input class="r-input" id="riddleIn" placeholder="Enter location..." />
              <button class="btn btn-go btn-xs" onclick="checkRiddle()">GO</button>
            </div>
            <div style="font-family:var(--f-mono);font-size:8.5px;color:var(--text-3);margin-top:5px;">Reward: 150 O‚óà + Rare Badge</div>
          </div>
        </div>

        <div class="chain-step">
          <div class="step-col">
            <div class="step-num lock">4</div>
            <div class="step-line"></div>
          </div>
          <div class="step-body locked">
            <div class="step-title">CLUE 4 ‚Äî LOCKED</div>
            <div class="step-text">Solve clue 3 to unlock this location.</div>
          </div>
        </div>

        <div class="chain-step">
          <div class="step-col">
            <div class="step-num lock">5</div>
          </div>
          <div class="step-body locked">
            <div class="step-title">CLUE 5 ‚Äî LOCKED</div>
            <div class="step-text">Final destination. Rare loot awaits.</div>
          </div>
        </div>

      </div>
    </div>

    <!-- CHAT -->
    <div class="card cell-chat">
      <div class="card-label">Proximity Chat <span style="font-size:8.5px;color:var(--red);margin-left:4px;">‚óè LIVE</span></div>
      <div style="font-family:var(--f-mono);font-size:9px;color:var(--text-3);margin-bottom:8px;">8 hunters ¬∑ SM Street Zone</div>

      <!-- STATUS ROW -->
      <div style="display:flex;gap:5px;margin-bottom:10px;">
        <div class="map-chip cy" style="cursor:pointer;border-radius:6px;" onclick="setStatus(this,'cy')">üü¢ LFG</div>
        <div class="map-chip go" style="cursor:pointer;border-radius:6px;" onclick="setStatus(this,'go')">üü° Chat</div>
        <div class="map-chip rd" style="cursor:pointer;border-radius:6px;" onclick="setStatus(this,'rd')">üî¥ Ghost</div>
      </div>

      <div class="chat-msgs" id="chatMsgs">
        <div class="chat-m">
          <div class="chat-av" style="background:rgba(0,230,118,0.1);border-color:rgba(0,230,118,0.3);color:#00E676;">RK</div>
          <div class="chat-body">
            <div class="chat-name-row">RaiderKnight ¬∑ LFG</div>
            <div class="chat-bubble">Anyone near SM Street? Found a riddle at the old arch üëÄ</div>
          </div>
        </div>
        <div class="chat-m">
          <div class="chat-av" style="background:rgba(245,189,25,0.1);border-color:rgba(245,189,25,0.3);color:var(--gold);">NX</div>
          <div class="chat-body">
            <div class="chat-name-row">NightFoxKL ¬∑ Open</div>
            <div class="chat-bubble">3 crates near beach road. ShadowReed is camping north.</div>
          </div>
        </div>
        <div class="chat-m">
          <div class="chat-av" style="background:rgba(255,68,102,0.1);border-color:rgba(255,68,102,0.3);color:var(--red);">SR</div>
          <div class="chat-body">
            <div class="chat-name-row">ShadowReed ¬∑ Ghost</div>
            <div class="chat-bubble">Not camping. Just observing üòà</div>
          </div>
        </div>
      </div>

      <div class="chat-input-wrap">
        <input class="c-input" id="chatIn" placeholder="Message zone..." onkeydown="if(event.key==='Enter')sendMsg()" />
        <button class="btn btn-cy btn-sm" onclick="sendMsg()">‚Üí</button>
      </div>
      <div class="chat-note">‚ö° Ephemeral ¬∑ Deleted on zone exit</div>
    </div>

  </div>

  <!-- ROW 5: Bazaar + Leaderboard + Safety -->
  <div class="bento-row5">

    <!-- BAZAAR -->
    <div class="card cell-bazaar">
      <div class="card-label c-gold">The Bazaar ‚Äî Local Vouchers</div>
      <div class="bazaar-items">
        <div class="bz-item" onclick="redeem('üßã','Kada Chai','SM Street Stall',80)">
          <div class="bz-emoji">üßã</div>
          <div class="bz-name">Kada Chai</div>
          <div class="bz-price">80 O‚óà</div>
          <div class="bz-place">SM Street</div>
        </div>
        <div class="bz-item" onclick="redeem('üçö','Biryani Meal','Hotel Sagar',350)">
          <div class="bz-emoji">üçö</div>
          <div class="bz-name">Biryani Meal</div>
          <div class="bz-price">350 O‚óà</div>
          <div class="bz-place">Hotel Sagar</div>
        </div>
        <div class="bz-item" onclick="redeem('üç¶','Ice Cream','Mittai Kada',120)">
          <div class="bz-emoji">üç¶</div>
          <div class="bz-name">Ice Cream</div>
          <div class="bz-price">120 O‚óà</div>
          <div class="bz-place">Mittai Kada</div>
        </div>
        <div class="bz-item" onclick="redeem('üü´','Halwa Box','Sweet Corner',200)">
          <div class="bz-emoji">üü´</div>
          <div class="bz-name">Halwa Box</div>
          <div class="bz-price">200 O‚óà</div>
          <div class="bz-place">Sweet Corner</div>
        </div>
        <div class="bz-item" onclick="redeem('üêü','Fish Fry','Beach Kada',280)">
          <div class="bz-emoji">üêü</div>
          <div class="bz-name">Fish Fry</div>
          <div class="bz-price">280 O‚óà</div>
          <div class="bz-place">Beach Kada</div>
        </div>
        <div class="bz-item" onclick="redeem('ü••','Coconut Water','Beach Vendor',50)">
          <div class="bz-emoji">ü••</div>
          <div class="bz-name">Coconut Water</div>
          <div class="bz-price">50 O‚óà</div>
          <div class="bz-place">Beach</div>
        </div>
      </div>
    </div>

    <!-- LEADERBOARD -->
    <div class="card cell-lb">
      <div class="card-label">King of the Hill ¬∑ Calicut</div>
      <div class="lb-rows">
        <div class="lb-r r1">
          <div class="lb-rank-n">1</div>
          <div class="lb-av" style="background:rgba(245,189,25,0.15);border-color:rgba(245,189,25,0.4);color:var(--gold);">NK</div>
          <div class="lb-info"><div class="lb-n">NightKingKozhikode</div><div class="lb-z">SM Street</div></div>
          <div class="lb-sc">9,840</div>
          <span>üëë</span>
        </div>
        <div class="lb-r r2">
          <div class="lb-rank-n">2</div>
          <div class="lb-av" style="background:rgba(168,168,168,0.1);border-color:rgba(168,168,168,0.3);color:#A8A8A8;">SF</div>
          <div class="lb-info"><div class="lb-n">ShadowFox_KL</div><div class="lb-z">Kuttichira</div></div>
          <div class="lb-sc">8,320</div>
        </div>
        <div class="lb-r r3">
          <div class="lb-rank-n">3</div>
          <div class="lb-av" style="background:rgba(155,112,64,0.1);border-color:rgba(155,112,64,0.3);color:#9B7040;">RH</div>
          <div class="lb-info"><div class="lb-n">RaiderHawk22</div><div class="lb-z">Mananchira</div></div>
          <div class="lb-sc">7,100</div>
        </div>
        <div class="lb-r">
          <div class="lb-rank-n">4</div>
          <div class="lb-av" style="background:rgba(0,255,194,0.08);border-color:rgba(0,255,194,0.2);color:var(--cyan);">NX</div>
          <div class="lb-info"><div class="lb-n">NightFoxKL</div><div class="lb-z">All Zones</div></div>
          <div class="lb-sc">6,880</div>
        </div>
        <div class="lb-r you">
          <div class="lb-rank-n" style="color:var(--cyan)">#47</div>
          <div class="lb-av" style="background:rgba(0,255,194,0.15);border-color:var(--border-hi);color:var(--cyan);">AX</div>
          <div class="lb-info"><div class="lb-n" style="color:var(--cyan);">You (Archer_X)</div><div class="lb-z">Zone-7</div></div>
          <div class="lb-sc">2,840</div>
        </div>
      </div>
    </div>

    <!-- SAFETY -->
    <div class="card cell-safety">
      <div class="card-label c-red">The Shield</div>

      <div class="sos-ring" onclick="triggerSOS()">
        <div class="sos-ring-outer"></div>
        <div class="sos-ring-inner">
          <div class="sos-label">SOS</div>
          <div class="sos-sub-l">TAP TO BROADCAST</div>
        </div>
      </div>

      <div class="shield-rows">
        <div class="shield-r">
          <span class="shield-r-label">Panic Gyro</span>
          <span class="shield-badge badge-ok">ARMED</span>
        </div>
        <div class="shield-r">
          <span class="shield-r-label">ID Verified</span>
          <span class="shield-badge badge-ok">TIER 1</span>
        </div>
        <div class="shield-r">
          <span class="shield-r-label">Govt ID</span>
          <span class="shield-badge badge-warn">PENDING</span>
        </div>
      </div>

      <div style="display:flex;flex-direction:column;gap:7px;">
        <div style="display:flex;align-items:center;justify-content:space-between;">
          <span class="toggle-mini">Lady-Guard Mode</span>
          <div class="t-sw on" onclick="this.classList.toggle('on');toast(this.classList.contains('on')?'‚úì Lady-Guard enabled':'Lady-Guard disabled')"></div>
        </div>
        <div style="display:flex;align-items:center;justify-content:space-between;">
          <span class="toggle-mini">Hide on heatmaps</span>
          <div class="t-sw on" onclick="this.classList.toggle('on')"></div>
        </div>
      </div>
    </div>

  </div>

  <!-- ROW 6: Admin -->
  <div class="bento-row6">

    <!-- MAP DROPPER -->
    <div class="card cell-admin-map">
      <div class="card-label">Admin ¬∑ Map Dropper</div>
      <div class="admin-map-view" id="adminMap" onclick="dropLoot(event)">
        <svg width="100%" height="100%" viewBox="0 0 500 200">
          <defs>
            <pattern id="ag" width="28" height="28" patternUnits="userSpaceOnUse">
              <path d="M 28 0 L 0 0 0 28" fill="none" stroke="rgba(0,255,194,0.05)" stroke-width="1"/>
            </pattern>
          </defs>
          <rect width="500" height="200" fill="#040C18"/>
          <rect width="500" height="200" fill="url(#ag)"/>
          <line x1="0" y1="100" x2="500" y2="100" stroke="rgba(0,255,194,0.08)" stroke-width="6"/>
          <line x1="250" y1="0" x2="250" y2="200" stroke="rgba(0,255,194,0.08)" stroke-width="6"/>
          <text x="10" y="18" fill="rgba(0,255,194,0.3)" font-family="JetBrains Mono" font-size="9">‚óà CALICUT GRID ¬∑ CLICK TO DROP LOOT</text>
          <rect x="60" y="60" width="50" height="38" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.07)" stroke-width="1"/>
          <rect x="300" y="40" width="65" height="45" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.07)" stroke-width="1"/>
          <rect x="380" y="110" width="45" height="55" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.07)" stroke-width="1"/>
          <rect x="150" y="115" width="70" height="55" fill="rgba(0,255,194,0.03)" stroke="rgba(0,255,194,0.07)" stroke-width="1"/>
        </svg>
        <div class="admin-drop-dot" id="dropDot"></div>
      </div>
      <div class="admin-tools-row">
        <select class="tier-select">
          <option>ü•â Bronze ‚Äî 20 O‚óà</option>
          <option selected>ü•á Gold ‚Äî 120 O‚óà</option>
          <option>üíé Diamond ‚Äî 500 O‚óà</option>
        </select>
        <input class="a-input" style="width:120px;" value="30 min despawn" />
        <button class="btn btn-go btn-sm" onclick="toast('‚úì Loot queued for drop')">QUEUE</button>
      </div>
    </div>

    <!-- GEO BROADCAST -->
    <div class="card cell-broadcast">
      <div class="card-label c-cyan">Geo-Broadcast</div>
      <div>
        <div style="display:flex;justify-content:space-between;font-family:var(--f-mono);font-size:9px;color:var(--text-3);margin-bottom:4px;">
          <span>Radius</span><span style="color:var(--cyan);" id="radVal">2.0 km</span>
        </div>
        <input type="range" class="r-slider" min="1" max="10" value="2" oninput="document.getElementById('radVal').textContent=this.value+'.0 km'">
      </div>
      <input class="a-input" placeholder="Broadcast title..." value="‚ö° DOUBLE LOOT ‚Äî 30 MIN!" />
      <textarea class="a-input" placeholder="Message..." style="resize:none;height:58px;">Rare Diamond crate dropped near SM Street. First to solve the riddle wins 1000 O‚óà!</textarea>
      <button class="btn btn-cy btn-sm" style="width:100%;" onclick="toast('üì° Geo-broadcast sent to 847 hunters')">SEND TO ZONE</button>
    </div>

    <!-- RIDDLE WRITE -->
    <div class="card cell-riddle-write">
      <div class="card-label">Riddle Writer</div>
      <textarea class="a-input" placeholder="Riddle text..." style="resize:none;height:56px;">I stand where the salt wind meets the iron bridge, watched by crows and time...</textarea>
      <input class="a-input" placeholder="Answer (hashed server-side)..." value="kallai bridge" />
      <div style="display:flex;gap:6px;">
        <input class="a-input" style="flex:1;" placeholder="O‚óà Reward" value="150" />
        <button class="btn btn-cy btn-sm" onclick="toast('‚úì Riddle published to Chain #7')">PUBLISH</button>
      </div>
      <div style="font-family:var(--f-mono);font-size:9px;color:var(--text-3);">Chain #7 ¬∑ Anchor: SM Street</div>
    </div>

  </div>

  <!-- ROW 7: Offline Packs -->
  <div class="bento-row7">

    <div class="card pack-card">
      <div class="pack-top">
        <div class="pack-icon">üèñ</div>
        <div><div class="pack-name">Calicut Beach</div><div class="pack-meta2">3 hunts ¬∑ Updated 2h ago</div></div>
      </div>
      <div class="pack-bar2"><div class="pack-fill2" style="width:100%"></div></div>
      <div class="pack-foot"><span class="pack-size2">4.8 MB</span><span style="font-family:var(--f-mono);font-size:9px;color:var(--cyan);">‚úì CACHED</span></div>
    </div>

    <div class="card pack-card">
      <div class="pack-top">
        <div class="pack-icon">üèô</div>
        <div><div class="pack-name">SM Street District</div><div class="pack-meta2">7 hunts ¬∑ Downloading...</div></div>
      </div>
      <div class="pack-bar2"><div class="pack-fill2" id="smBar" style="width:62%"></div></div>
      <div class="pack-foot"><span class="pack-size2">3.2 MB</span><span style="font-family:var(--f-mono);font-size:9px;color:var(--gold);" id="smLbl">62%</span></div>
    </div>

    <div class="card pack-card">
      <div class="pack-top">
        <div class="pack-icon">üïå</div>
        <div><div class="pack-name">Kuttichira Heritage</div><div class="pack-meta2">2 hunts ¬∑ Not cached</div></div>
      </div>
      <div class="pack-bar2"><div class="pack-fill2" id="kuBar" style="width:0%"></div></div>
      <div class="pack-foot"><span class="pack-size2">2.1 MB</span><button class="btn btn-cy btn-xs" id="kuBtn" onclick="dlPack('kuBar','kuBtn','kuLbl')">DOWNLOAD</button><span id="kuLbl"></span></div>
    </div>

    <div class="card pack-card">
      <div class="pack-top">
        <div class="pack-icon">üåø</div>
        <div><div class="pack-name">Thali Temple Zone</div><div class="pack-meta2">1 hunt ¬∑ Not cached</div></div>
      </div>
      <div class="pack-bar2"><div class="pack-fill2" id="thBar" style="width:0%"></div></div>
      <div class="pack-foot"><span class="pack-size2">1.9 MB</span><button class="btn btn-cy btn-xs" id="thBtn" onclick="dlPack('thBar','thBtn','thLbl')">DOWNLOAD</button><span id="thLbl"></span></div>
    </div>

  </div>

</div><!-- /shell -->

<script>
/* ‚îÄ‚îÄ SPARKLINE ‚îÄ‚îÄ */
const sparkData = [18,42,35,60,80,55,95];
const sp = document.getElementById('sparkline');
const maxH = 32;
sparkData.forEach((v,i) => {
  const b = document.createElement('div');
  b.className = 'spark-bar' + (i===6?' peak':'');
  b.style.height = (v/100*maxH)+'px';
  sp.appendChild(b);
});

/* ‚îÄ‚îÄ FEED ‚îÄ‚îÄ */
const feedData = [
  ['go','<strong>RaiderKnight</strong> claimed Gold Crate #A7 ¬∑ SM Street','just now'],
  ['cy','<strong>NightFoxKL</strong> solved Riddle #2 in Chain 7','1m ago'],
  ['rd','<strong>ShadowReed</strong> entered Ghost Mode ¬∑ Zone-7','3m ago'],
  ['go','New <strong>Gold Crate</strong> dropped near Mananchira','5m ago'],
  ['cy','<strong>ViperDash</strong> redeemed Kada Chai voucher','7m ago'],
  ['cy','<strong>ZephyrKL</strong> completed Chain 6 ‚Äî Full Clear!','9m ago'],
];

const feedEl = document.getElementById('feedScroll');
function renderFeed(data) {
  feedEl.innerHTML = '';
  data.forEach(([type, text, ago]) => {
    const r = document.createElement('div');
    r.className = 'feed-row';
    r.innerHTML = `<div class="feed-pip ${type}"></div><div class="feed-text">${text}</div><div class="feed-ago">${ago}</div>`;
    feedEl.appendChild(r);
  });
}
renderFeed(feedData);

const extraFeed = [
  ['go','<strong>Archer_X</strong> (You) joined Zone-7 chat'],
  ['cy','<strong>ShadowFox_KL</strong> solved Riddle #4'],
  ['go','Admin dropped <strong>Diamond Crate</strong> at Beach Road'],
  ['rd','<strong>NightFoxKL</strong> activated Lady-Guard Mode'],
  ['cy','<strong>RaiderHawk22</strong> climbed to rank #3'],
];

setInterval(() => {
  const [type, text] = extraFeed[Math.floor(Math.random()*extraFeed.length)];
  const r = document.createElement('div');
  r.className = 'feed-row';
  r.innerHTML = `<div class="feed-pip ${type}"></div><div class="feed-text">${text}</div><div class="feed-ago">just now</div>`;
  r.style.animation = 'msg-in 0.3s ease';
  feedEl.insertBefore(r, feedEl.firstChild);
  if (feedEl.children.length > 8) feedEl.removeChild(feedEl.lastChild);
}, 5000);

/* ‚îÄ‚îÄ COMPASS ‚îÄ‚îÄ */
const proxStates = [
  {l:'‚ùÑ FREEZING', d:'~500M', w:'8%'},
  {l:'COLD', d:'~350M', w:'28%'},
  {l:'COOL', d:'~220M', w:'46%'},
  {l:'WARM', d:'~140M', w:'68%'},
  {l:'üî• HOT', d:'~60M', w:'85%'},
  {l:'üî• BURNING', d:'~15M', w:'96%'},
];
let pIdx = 3;
function simProx() {
  pIdx = (pIdx+1) % proxStates.length;
  const s = proxStates[pIdx];
  document.getElementById('dialTemp').textContent = s.l;
  document.getElementById('dialDist').textContent = s.d;
  document.getElementById('proxBar').style.width = s.w;
}

/* ‚îÄ‚îÄ CLAIM CRATE ‚îÄ‚îÄ */
let coins = 2840;
function claimCrate() {
  coins += 120;
  updateCoins();
  toast('‚ö° Crate #A7 claimed! +120 O‚óà');
  addFeedNow('go', '<strong>You (Archer_X)</strong> claimed Gold Crate #A7');
}
function updateCoins() {
  document.getElementById('coinsDisplay').textContent = coins.toLocaleString();
  document.getElementById('topCoins').textContent = coins.toLocaleString();
}

function addFeedNow(type, text) {
  const r = document.createElement('div');
  r.className = 'feed-row';
  r.innerHTML = `<div class="feed-pip ${type}"></div><div class="feed-text">${text}</div><div class="feed-ago">just now</div>`;
  r.style.animation = 'msg-in 0.3s ease';
  feedEl.insertBefore(r, feedEl.firstChild);
  if (feedEl.children.length > 8) feedEl.removeChild(feedEl.lastChild);
}

/* ‚îÄ‚îÄ RIDDLE ‚îÄ‚îÄ */
function checkRiddle() {
  const v = document.getElementById('riddleIn').value.toLowerCase().trim();
  if (['bridge','kallai','calicut bridge','iron bridge'].some(a => v.includes(a))) {
    coins += 150; updateCoins();
    toast('üéâ CORRECT! +150 O‚óà ¬∑ Clue 4 unlocked!');
    addFeedNow('cy', '<strong>You</strong> solved Riddle #3 in Chain 7');
  } else {
    toast('‚úó Incorrect ‚Äî think of iron bridges near the sea.');
  }
}

/* ‚îÄ‚îÄ CHAT ‚îÄ‚îÄ */
const chatReplies = [
  ['RK','RaiderKnight','00E676','On my way! Meet at the arch?'],
  ['NX','NightFoxKL','F5BD19','Roger that hunter ü´°'],
  ['VD','ViperDash','00E676','Coming from north side!'],
  ['SR','ShadowReed','FF4466','Interesting... üëÅ'],
];
function sendMsg() {
  const inp = document.getElementById('chatIn');
  const msg = inp.value.trim(); if (!msg) return;
  const box = document.getElementById('chatMsgs');
  const d = document.createElement('div');
  d.className = 'chat-m';
  d.innerHTML = `<div class="chat-av" style="background:rgba(0,255,194,0.12);border-color:rgba(0,255,194,0.35);color:var(--cyan);">AX</div><div class="chat-body"><div class="chat-name-row">You ¬∑ LFG</div><div class="chat-bubble mine">${msg}</div></div>`;
  box.appendChild(d); box.scrollTop = box.scrollHeight;
  inp.value = '';
  setTimeout(() => {
    const [id,name,col,rep] = chatReplies[Math.floor(Math.random()*chatReplies.length)];
    const r = document.createElement('div');
    r.className = 'chat-m';
    r.innerHTML = `<div class="chat-av" style="background:rgba(${parseInt(col.slice(0,2),16)},${parseInt(col.slice(2,4),16)},${parseInt(col.slice(4,6),16)},0.1);border-color:rgba(${parseInt(col.slice(0,2),16)},${parseInt(col.slice(2,4),16)},${parseInt(col.slice(4,6),16)},0.3);color:#${col};">${id}</div><div class="chat-body"><div class="chat-name-row">${name}</div><div class="chat-bubble">${rep}</div></div>`;
    box.appendChild(r); box.scrollTop = box.scrollHeight;
  }, 900 + Math.random()*600);
}
function setStatus(el, type) {
  toast(`Status ‚Üí ${el.textContent.trim()}`);
}

/* ‚îÄ‚îÄ REDEEM ‚îÄ‚îÄ */
let redeemI;
function redeem(emoji, name, place, cost) {
  if (coins < cost) { toast(`‚úó Need ${cost} O‚óà, you have ${coins}`); return; }
  coins -= cost; updateCoins();
  document.getElementById('mEmoji').textContent = emoji;
  document.getElementById('mName').textContent = `${name} ‚Äî ${place}`;
  document.getElementById('mCode').textContent = 'HNT-' + Math.random().toString(36).toUpperCase().slice(2,6);
  const qr = document.getElementById('mQr'); qr.innerHTML = '';
  for (let i=0;i<49;i++){const c=document.createElement('div');c.className='qc';c.style.background=(Math.random()>.45)?'#000':'#fff';qr.appendChild(c);}
  let s=299; clearInterval(redeemI);
  const tick=()=>{const m=Math.floor(s/60).toString().padStart(2,'0'),sec=(s%60).toString().padStart(2,'0');document.getElementById('mTimer').textContent=`‚è± Expires in: ${m}:${sec}`;if(s--<=0)clearInterval(redeemI);};
  tick(); redeemI=setInterval(tick,1000);
  document.getElementById('redeemBg').classList.add('open');
  addFeedNow('cy', `<strong>You</strong> redeemed ${name} ¬∑ ${place}`);
}

/* ‚îÄ‚îÄ SOS ‚îÄ‚îÄ */
let sosI;
function triggerSOS() {
  document.getElementById('sosBg').classList.add('open');
  let s=0; clearInterval(sosI);
  sosI=setInterval(()=>{s++;const m=Math.floor(s/60).toString().padStart(2,'0'),sec=(s%60).toString().padStart(2,'0');document.getElementById('sosT').textContent=`Broadcasting: ${m}:${sec}`;},1000);
  addFeedNow('rd','<strong>SOS BROADCAST</strong> active ¬∑ Live location shared');
}
function closeSOS() {
  document.getElementById('sosBg').classList.remove('open');
  clearInterval(sosI); toast('‚úì SOS cancelled. Stay safe, hunter.');
}
function closeModals() {
  document.getElementById('redeemBg').classList.remove('open');
  clearInterval(redeemI);
}

/* ‚îÄ‚îÄ ADMIN DROP ‚îÄ‚îÄ */
function dropLoot(e) {
  const r = e.currentTarget.getBoundingClientRect();
  const d = document.getElementById('dropDot');
  d.style.left=(e.clientX-r.left)+'px'; d.style.top=(e.clientY-r.top)+'px';
  d.style.display='block'; d.style.animation='none';
  void d.offsetWidth; d.style.animation='drop-pop 0.4s ease';
  toast(`üì¶ Loot marked at (${Math.round(e.clientX-r.left)}, ${Math.round(e.clientY-r.top)})`);
  setTimeout(()=>d.style.display='none', 3000);
}

/* ‚îÄ‚îÄ OFFLINE DOWNLOAD ‚îÄ‚îÄ */
function dlPack(barId, btnId, lblId) {
  const bar = document.getElementById(barId);
  const btn = document.getElementById(btnId);
  const lbl = document.getElementById(lblId);
  btn.style.display='none'; lbl.style.color='var(--gold)'; lbl.style.fontFamily='var(--f-mono)'; lbl.style.fontSize='9px';
  let p=0;
  const i=setInterval(()=>{
    p+=Math.random()*10;
    if(p>=100){p=100;bar.style.width='100%';lbl.textContent='‚úì';lbl.style.color='var(--cyan)';clearInterval(i);}
    else{bar.style.width=p+'%';lbl.textContent=Math.round(p)+'%';}
  },280);
}
// Auto-finish SM Street download
let smP=62;
const smI=setInterval(()=>{
  smP+=Math.random()*8;
  if(smP>=100){smP=100;document.getElementById('smBar').style.width='100%';document.getElementById('smLbl').textContent='‚úì';document.getElementById('smLbl').style.color='var(--cyan)';clearInterval(smI);}
  else{document.getElementById('smBar').style.width=smP+'%';document.getElementById('smLbl').textContent=Math.round(smP)+'%';}
},400);

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
let toastT;
function toast(msg) {
  const t=document.getElementById('toast');
  t.textContent=msg; t.classList.add('vis');
  clearTimeout(toastT); toastT=setTimeout(()=>t.classList.remove('vis'),2800);
}

/* ‚îÄ‚îÄ CLOSE ON BG CLICK ‚îÄ‚îÄ */
document.getElementById('redeemBg').addEventListener('click',e=>{if(e.target===e.currentTarget)closeModals();});
document.getElementById('sosBg').addEventListener('click',e=>{if(e.target===e.currentTarget)closeSOS();});
document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeModals();closeSOS();}});
</script>
</body>
</html>
