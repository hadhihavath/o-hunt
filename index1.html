<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Okhota ‚Äî The Hunt</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Nunito:wght@400;600;700;800;900&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
<style>

/* ‚îÄ‚îÄ‚îÄ DESIGN TOKENS ‚îÄ‚îÄ‚îÄ */
:root {
  /* Brand Palette ‚Äî warm, vibrant, trustworthy */
  --indigo:     #4F46E5;
  --indigo-lt:  #818CF8;
  --indigo-bg:  rgba(79,70,229,0.10);
  --violet:     #7C3AED;
  --violet-lt:  #A78BFA;

  --coral:      #F97316;
  --coral-lt:   #FB923C;
  --coral-bg:   rgba(249,115,22,0.10);

  --amber:      #F59E0B;
  --amber-lt:   #FCD34D;
  --amber-bg:   rgba(245,158,11,0.10);

  --emerald:    #10B981;
  --emerald-lt: #34D399;
  --emerald-bg: rgba(16,185,129,0.10);

  --rose:       #F43F5E;
  --rose-lt:    #FB7185;
  --rose-bg:    rgba(244,63,94,0.10);

  --sky:        #0EA5E9;
  --sky-lt:     #38BDF8;
  --sky-bg:     rgba(14,165,233,0.10);

  /* Surfaces */
  --bg:         #F0F4FF;
  --surface:    #FFFFFF;
  --surface-2:  #F8FAFF;
  --surface-3:  #EEF2FF;

  /* Text */
  --text:       #1E1B4B;
  --text-2:     #4B5563;
  --text-3:     #9CA3AF;
  --text-inv:   #FFFFFF;

  /* Borders & shadows */
  --border:     rgba(79,70,229,0.10);
  --border-md:  rgba(79,70,229,0.18);
  --shadow-sm:  0 2px 8px rgba(79,70,229,0.08);
  --shadow-md:  0 4px 20px rgba(79,70,229,0.12);
  --shadow-lg:  0 8px 40px rgba(79,70,229,0.16);

  /* Glass */
  --glass:      rgba(255,255,255,0.70);
  --glass-bd:   rgba(255,255,255,0.90);

  /* Fonts */
  --f-head:     'Nunito', sans-serif;
  --f-body:     'Plus Jakarta Sans', sans-serif;
  --f-mono:     'Fira Code', monospace;

  --r:          18px;
  --r-sm:       12px;
  --gap:        14px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html { scroll-behavior: smooth; }

body {
  background: var(--bg);
  background-image:
    radial-gradient(ellipse 70% 50% at 10% 10%, rgba(79,70,229,0.08) 0%, transparent 60%),
    radial-gradient(ellipse 60% 50% at 90% 80%, rgba(249,115,22,0.07) 0%, transparent 55%),
    radial-gradient(ellipse 50% 40% at 50% 30%, rgba(16,185,129,0.05) 0%, transparent 60%);
  color: var(--text);
  font-family: var(--f-body);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ‚îÄ‚îÄ‚îÄ LAYOUT SHELL ‚îÄ‚îÄ‚îÄ */
.shell {
  max-width: 1380px;
  margin: 0 auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* ‚îÄ‚îÄ‚îÄ GLASS CARD BASE ‚îÄ‚îÄ‚îÄ */
.card {
  background: var(--glass);
  border: 1px solid var(--border);
  border-radius: var(--r);
  backdrop-filter: blur(20px) saturate(1.6);
  -webkit-backdrop-filter: blur(20px) saturate(1.6);
  box-shadow: var(--shadow-sm);
  transition: box-shadow 0.25s, transform 0.2s;
  overflow: hidden;
}
.card:hover {
  box-shadow: var(--shadow-md);
}
.card.solid { background: var(--surface); }
.card.elevated { box-shadow: var(--shadow-md); }

/* ‚îÄ‚îÄ‚îÄ TOP NAV ‚îÄ‚îÄ‚îÄ */
.topnav {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 22px;
  background: var(--glass-bd);
  border: 1px solid var(--border);
  border-radius: var(--r);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  box-shadow: var(--shadow-sm);
  flex-wrap: wrap;
  gap: 10px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}
.logo-icon {
  width: 36px; height: 36px;
  border-radius: 10px;
  background: linear-gradient(135deg, var(--indigo), var(--violet));
  display: flex; align-items: center; justify-content: center;
  font-size: 18px;
  box-shadow: 0 4px 12px rgba(79,70,229,0.35);
}
.logo-text {
  font-family: var(--f-head);
  font-size: 22px;
  font-weight: 900;
  color: var(--indigo);
  letter-spacing: -0.02em;
}
.logo-text span { color: var(--coral); }

.nav-pill {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 7px 14px;
  border-radius: 20px;
  font-family: var(--f-body);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  border: 1.5px solid transparent;
  background: transparent;
  color: var(--text-2);
  white-space: nowrap;
}
.nav-pill:hover { background: var(--indigo-bg); color: var(--indigo); }
.nav-pill.active { background: var(--indigo-bg); color: var(--indigo); border-color: rgba(79,70,229,0.2); }
.nav-pill .pip { width: 7px; height: 7px; border-radius: 50%; background: var(--emerald); box-shadow: 0 0 6px var(--emerald); animation: blink 2s ease-in-out infinite; }
@keyframes blink { 0%,100%{opacity:1} 50%{opacity:.4} }

.nav-spacer { flex: 1; min-width: 0; }

.nav-right {
  display: flex;
  align-items: center;
  gap: 14px;
  flex-shrink: 0;
}
.coin-badge {
  display: flex; align-items: center; gap: 7px;
  padding: 8px 14px;
  background: var(--amber-bg);
  border: 1.5px solid rgba(245,158,11,0.25);
  border-radius: 20px;
  font-family: var(--f-head);
  font-size: 15px;
  font-weight: 800;
  color: #92400E;
}
.rank-badge {
  display: flex; align-items: center; gap: 6px;
  padding: 8px 14px;
  background: var(--indigo-bg);
  border: 1.5px solid rgba(79,70,229,0.2);
  border-radius: 20px;
  font-family: var(--f-head);
  font-size: 14px;
  font-weight: 800;
  color: var(--indigo);
}
.user-av {
  width: 38px; height: 38px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--indigo), var(--coral));
  display: flex; align-items: center; justify-content: center;
  font-family: var(--f-head);
  font-weight: 800; font-size: 14px; color: #fff;
  box-shadow: 0 3px 10px rgba(79,70,229,0.3);
  flex-shrink: 0;
}

/* ‚îÄ‚îÄ‚îÄ MOBILE BOTTOM NAV ‚îÄ‚îÄ‚îÄ */
.bottom-nav {
  display: none;
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: var(--glass-bd);
  border-top: 1px solid var(--border);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  z-index: 200;
  padding: 8px 0 max(8px, env(safe-area-inset-bottom));
}
.bottom-nav-inner {
  display: flex;
  justify-content: space-around;
  align-items: center;
}
.bnav-item {
  display: flex; flex-direction: column;
  align-items: center; gap: 3px;
  padding: 6px 10px;
  cursor: pointer;
  transition: all 0.2s;
  border-radius: 10px;
  min-width: 52px;
}
.bnav-item .bnav-icon { font-size: 20px; }
.bnav-item .bnav-lbl { font-family: var(--f-body); font-size: 10px; font-weight: 600; color: var(--text-3); }
.bnav-item.active .bnav-lbl { color: var(--indigo); }
.bnav-item.active .bnav-icon { filter: saturate(2); }

/* ‚îÄ‚îÄ‚îÄ SECTION LABEL ‚îÄ‚îÄ‚îÄ */
.sec-label {
  font-family: var(--f-body);
  font-size: 11px; font-weight: 700;
  letter-spacing: 0.1em; text-transform: uppercase;
  color: var(--text-3);
  display: flex; align-items: center; gap: 8px;
  margin-bottom: 10px;
}
.sec-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }

/* ‚îÄ‚îÄ‚îÄ TAG / CHIP ‚îÄ‚îÄ‚îÄ */
.chip {
  display: inline-flex; align-items: center; gap: 5px;
  padding: 4px 12px; border-radius: 20px;
  font-family: var(--f-body); font-size: 12px; font-weight: 600;
  border: 1.5px solid;
}
.chip-indigo { background: var(--indigo-bg); color: var(--indigo); border-color: rgba(79,70,229,.2); }
.chip-coral  { background: var(--coral-bg); color: var(--coral); border-color: rgba(249,115,22,.2); }
.chip-amber  { background: var(--amber-bg); color: #92400E; border-color: rgba(245,158,11,.25); }
.chip-emerald{ background: var(--emerald-bg); color: #065F46; border-color: rgba(16,185,129,.2); }
.chip-rose   { background: var(--rose-bg); color: var(--rose); border-color: rgba(244,63,94,.2); }
.chip-sky    { background: var(--sky-bg); color: #0369A1; border-color: rgba(14,165,233,.2); }

/* ‚îÄ‚îÄ‚îÄ BENTO ROW 1: Map + Stats + Feed ‚îÄ‚îÄ‚îÄ */
.row1 {
  display: grid;
  grid-template-columns: 1fr 280px;
  grid-template-rows: auto auto;
  gap: var(--gap);
}
.row1-left {
  display: grid;
  grid-template-columns: 1.8fr 1fr;
  grid-template-rows: 1fr auto;
  gap: var(--gap);
  grid-row: 1 / 3;
}

/* MAP CARD */
.map-card {
  grid-column: 1;
  grid-row: 1 / 3;
  padding: 20px;
  min-height: 420px;
  display: flex;
  flex-direction: column;
}
.map-canvas-wrap {
  flex: 1;
  border-radius: var(--r-sm);
  overflow: hidden;
  position: relative;
  background: #1a2744;
  min-height: 320px;
}
.map-canvas-wrap svg { width: 100%; height: 100%; }
.map-chips-row {
  display: flex; gap: 6px; flex-wrap: wrap; margin-top: 12px;
}

/* STATS STACK */
.stats-stack {
  grid-column: 2;
  display: flex; flex-direction: column; gap: var(--gap);
}

/* STAT HERO CARD */
.stat-hero {
  padding: 20px 22px;
  position: relative; overflow: hidden;
  flex: 1;
}
.stat-hero-bg {
  position: absolute; top: -30px; right: -30px;
  width: 100px; height: 100px; border-radius: 50%;
  opacity: 0.12;
}
.stat-hero-val {
  font-family: var(--f-head);
  font-size: 42px; font-weight: 900;
  line-height: 1; letter-spacing: -0.03em;
}
.stat-hero-lbl {
  font-family: var(--f-body);
  font-size: 12px; font-weight: 600;
  color: var(--text-3); margin-top: 4px;
  text-transform: uppercase; letter-spacing: 0.08em;
}
.stat-hero-sub {
  display: flex; align-items: center; gap: 5px;
  font-family: var(--f-body); font-size: 12px; font-weight: 600;
  margin-top: 10px;
}
.trend-up { color: var(--emerald); }
.trend-dn { color: var(--rose); }

/* COMPASS MINI CARD */
.compass-card {
  grid-column: 2;
  padding: 20px 22px;
  display: flex; align-items: center; gap: 16px;
}

/* FEED CARD */
.feed-card {
  grid-column: 2;
  grid-row: 1 / 3;
  padding: 20px;
  display: flex;
  flex-direction: column;
  max-height: 560px;
}
.feed-list {
  flex: 1; overflow-y: auto; scrollbar-width: none;
  display: flex; flex-direction: column; gap: 2px;
  margin-top: 6px;
}
.feed-list::-webkit-scrollbar { display: none; }
.feed-item {
  display: flex; gap: 10px; align-items: flex-start;
  padding: 9px 12px; border-radius: 10px;
  transition: background 0.2s; cursor: default;
}
.feed-item:hover { background: var(--surface-3); }
.feed-dot {
  width: 8px; height: 8px; border-radius: 50%;
  flex-shrink: 0; margin-top: 4px;
}
.feed-text { font-size: 12.5px; font-weight: 500; color: var(--text-2); line-height: 1.5; flex: 1; }
.feed-text strong { color: var(--text); font-weight: 700; }
.feed-ago { font-size: 11px; color: var(--text-3); flex-shrink: 0; font-family: var(--f-mono); }

/* ‚îÄ‚îÄ‚îÄ ROW 2: 4 mini stat cards ‚îÄ‚îÄ‚îÄ */
.row2 {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--gap);
}
.mini-stat {
  padding: 18px 20px;
  display: flex; flex-direction: column; gap: 8px;
}
.mini-stat-icon {
  width: 40px; height: 40px; border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 20px;
}
.mini-stat-val {
  font-family: var(--f-head);
  font-size: 28px; font-weight: 900;
  line-height: 1; letter-spacing: -0.02em;
}
.mini-stat-lbl {
  font-size: 12px; font-weight: 600; color: var(--text-3);
  text-transform: uppercase; letter-spacing: 0.07em;
}

/* ‚îÄ‚îÄ‚îÄ ROW 3: AR + Riddle + Chat ‚îÄ‚îÄ‚îÄ */
.row3 {
  display: grid;
  grid-template-columns: 1fr 1.3fr 1fr;
  gap: var(--gap);
}

/* AR CARD */
.ar-card { overflow: hidden; }
.ar-viewport {
  height: 200px;
  background: linear-gradient(160deg, #0f1e3a 0%, #1a3060 100%);
  position: relative; overflow: hidden;
}
.ar-grid {
  position: absolute; inset: 0;
  background:
    repeating-linear-gradient(0deg, transparent, transparent 32px, rgba(79,70,229,0.08) 32px, rgba(79,70,229,0.08) 33px),
    repeating-linear-gradient(90deg, transparent, transparent 32px, rgba(79,70,229,0.08) 32px, rgba(79,70,229,0.08) 33px);
}
.ar-scan-line {
  position: absolute; left: 0; right: 0; height: 2px;
  background: linear-gradient(90deg, transparent, rgba(79,70,229,0.8), var(--sky-lt), rgba(79,70,229,0.8), transparent);
  box-shadow: 0 0 12px var(--sky);
  animation: scan 3s linear infinite;
}
@keyframes scan { 0%{top:0} 100%{top:100%} }

.ar-bracket-box {
  position: absolute; left: 50%; top: 50%;
  transform: translate(-50%, -55%);
  width: 90px; height: 90px;
}
.ab::before, .ab::after, .ab-br, .ab-bl {
  content: '';
  position: absolute; width: 18px; height: 18px;
  border-color: rgba(79,70,229,0.9); border-style: solid;
}
.ab::before { top:0; left:0; border-width:2.5px 0 0 2.5px; border-radius:3px 0 0 0; }
.ab::after  { top:0; right:0; border-width:2.5px 2.5px 0 0; border-radius:0 3px 0 0; }
.ab-br { bottom:0; right:0; border-width:0 2.5px 2.5px 0; border-radius:0 0 3px 0; }
.ab-bl { bottom:0; left:0; border-width:0 0 2.5px 2.5px; border-radius:0 0 0 3px; }

.crate-wrap { position: absolute; left:50%; top:50%; transform:translate(-50%,-55%); perspective:120px; }
.c3d { width:44px; height:44px; transform-style:preserve-3d; animation:spin3d 8s linear infinite; }
@keyframes spin3d { to { transform:rotateY(360deg) rotateX(12deg); } }
.cf {
  position: absolute; width:44px; height:44px;
  background: rgba(249,115,22,0.15);
  border: 1.5px solid rgba(249,115,22,0.7);
  display: flex; align-items:center; justify-content:center; font-size:16px;
  border-radius: 3px;
}
.cf.fr{transform:translateZ(22px)} .cf.bk{transform:rotateY(180deg) translateZ(22px)}
.cf.lt{transform:rotateY(-90deg) translateZ(22px)} .cf.rt{transform:rotateY(90deg) translateZ(22px)}
.cf.tp{transform:rotateX(90deg) translateZ(22px)} .cf.bt{transform:rotateX(-90deg) translateZ(22px)}

.ar-hud-tl { position:absolute; top:10px; left:12px; font-family:var(--f-mono); font-size:9px; color:rgba(255,255,255,0.6); line-height:1.8; }
.ar-hud-tr { position:absolute; top:10px; right:12px; font-family:var(--f-mono); font-size:9px; color:rgba(249,115,22,0.85); text-align:right; line-height:1.8; }
.ar-detect { position:absolute; bottom:10px; left:50%; transform:translateX(-50%); font-family:var(--f-mono); font-size:9.5px; color:rgba(255,255,255,0.75); letter-spacing:0.1em; white-space:nowrap; animation:fader 1.2s ease-in-out infinite alternate; }
@keyframes fader { from{opacity:1} to{opacity:0.5} }

.ar-body { padding: 14px 18px; }

/* RIDDLE CARD */
.riddle-card { padding: 20px; display: flex; flex-direction: column; }
.chain-list { display: flex; flex-direction: column; gap: 4px; margin-top: 8px; flex: 1; }
.chain-row { display: flex; gap: 10px; }
.chain-connector { display: flex; flex-direction: column; align-items: center; }
.chain-num {
  width: 28px; height: 28px; border-radius: 50%;
  border: 2px solid; display: flex; align-items: center; justify-content: center;
  font-family: var(--f-head); font-size: 11px; font-weight: 800; flex-shrink: 0;
}
.chain-num.done { border-color: var(--emerald); color: var(--emerald); background: var(--emerald-bg); }
.chain-num.active { border-color: var(--coral); color: var(--coral); background: var(--coral-bg); box-shadow: 0 0 0 3px rgba(249,115,22,0.15); }
.chain-num.lock { border-color: var(--border-md); color: var(--text-3); }
.chain-line { width: 2px; height: 12px; background: var(--border); border-radius: 1px; margin: 2px 0; }
.chain-line.done { background: var(--emerald); }

.chain-body {
  flex: 1; padding: 10px 14px;
  background: var(--surface-2);
  border: 1.5px solid var(--border);
  border-radius: var(--r-sm); margin-bottom: 4px;
  transition: border-color 0.2s;
}
.chain-body.done { border-color: rgba(16,185,129,.2); background: var(--emerald-bg); }
.chain-body.active { border-color: rgba(249,115,22,.25); background: var(--coral-bg); }
.chain-body.lock { opacity: 0.4; }
.chain-title { font-size: 11px; font-weight: 700; letter-spacing: 0.05em; margin-bottom: 3px; }
.chain-body.done .chain-title { color: #065F46; }
.chain-body.active .chain-title { color: #9A3412; }
.chain-body.lock .chain-title { color: var(--text-3); }
.chain-text { font-size: 12px; color: var(--text-2); line-height: 1.45; }
.chain-body.lock .chain-text { filter: blur(3px); }
.riddle-row { display: flex; gap: 6px; margin-top: 8px; }

/* CHAT CARD */
.chat-card { padding: 20px; display: flex; flex-direction: column; }
.status-row { display: flex; gap: 6px; margin-bottom: 12px; }
.s-btn {
  flex: 1; padding: 7px 6px;
  border-radius: 10px; border: 1.5px solid;
  cursor: pointer; font-size: 11px; font-weight: 700;
  font-family: var(--f-body); text-align: center;
  transition: all 0.2s; background: transparent;
}
.s-btn.lfg  { border-color: rgba(16,185,129,.3); color: #065F46; }
.s-btn.lfg:hover, .s-btn.lfg.active { background: var(--emerald-bg); border-color: var(--emerald); }
.s-btn.chat { border-color: rgba(245,158,11,.3); color: #92400E; }
.s-btn.chat:hover, .s-btn.chat.active { background: var(--amber-bg); border-color: var(--amber); }
.s-btn.ghost{ border-color: rgba(156,163,175,.3); color: var(--text-3); }
.s-btn.ghost:hover, .s-btn.ghost.active { background: #F3F4F6; border-color: #9CA3AF; }

.chat-box {
  flex: 1; overflow-y: auto; scrollbar-width: none;
  display: flex; flex-direction: column; gap: 8px;
  min-height: 0; max-height: 180px; padding-right: 2px;
}
.chat-box::-webkit-scrollbar { display: none; }
.chat-msg { display: flex; gap: 8px; animation: msgIn 0.25s ease; }
@keyframes msgIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
.chat-av {
  width: 26px; height: 26px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--f-head); font-size: 10px; font-weight: 800;
  flex-shrink: 0; border: 1.5px solid;
}
.chat-body-wrap { flex: 1; }
.chat-nm { font-size: 10px; font-weight: 600; color: var(--text-3); margin-bottom: 2px; }
.chat-bubble {
  font-size: 12.5px; color: var(--text);
  background: var(--surface-2);
  border: 1px solid var(--border);
  border-radius: 4px 12px 12px 12px;
  padding: 7px 12px; line-height: 1.45;
}
.chat-bubble.mine {
  background: var(--indigo-bg);
  border-color: rgba(79,70,229,.2);
  border-radius: 12px 4px 12px 12px;
}
.chat-input-row { display: flex; gap: 8px; margin-top: 10px; }

/* ‚îÄ‚îÄ‚îÄ ROW 4: Bazaar + Leaderboard + Safety ‚îÄ‚îÄ‚îÄ */
.row4 {
  display: grid;
  grid-template-columns: 1.6fr 1.2fr 1fr;
  gap: var(--gap);
}

.bazaar-card { padding: 20px; }
.bazaar-grid {
  display: grid; grid-template-columns: repeat(3, 1fr);
  gap: 8px; margin-top: 10px;
}
.bz {
  background: var(--surface-2); border: 1.5px solid var(--border);
  border-radius: var(--r-sm); padding: 14px 10px;
  text-align: center; cursor: pointer; transition: all 0.22s;
  position: relative; overflow: hidden;
}
.bz::after {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(249,115,22,0.08), transparent);
  opacity: 0; transition: opacity 0.2s;
  border-radius: inherit;
}
.bz:hover { transform: translateY(-3px); box-shadow: 0 8px 24px rgba(249,115,22,0.18); border-color: rgba(249,115,22,.35); }
.bz:hover::after { opacity: 1; }
.bz-em { font-size: 26px; }
.bz-name { font-size: 11px; font-weight: 700; color: var(--text); margin-top: 6px; line-height: 1.2; }
.bz-price { font-family: var(--f-head); font-size: 13px; font-weight: 800; color: var(--coral); margin-top: 3px; }
.bz-place { font-size: 10px; color: var(--text-3); margin-top: 1px; }

.lb-card { padding: 20px; }
.lb-list { display: flex; flex-direction: column; gap: 5px; margin-top: 10px; }
.lb-row {
  display: flex; align-items: center; gap: 10px;
  padding: 9px 12px; border-radius: var(--r-sm);
  background: var(--surface-2); border: 1.5px solid var(--border);
  transition: all 0.2s; cursor: default;
}
.lb-row:hover { border-color: var(--border-md); box-shadow: var(--shadow-sm); }
.lb-row.gold { background: rgba(245,158,11,0.07); border-color: rgba(245,158,11,.25); }
.lb-row.you-row { background: var(--indigo-bg); border-color: rgba(79,70,229,.25); }
.lb-rank { font-family: var(--f-head); font-size: 15px; font-weight: 900; width: 24px; text-align: center; }
.lb-row.gold .lb-rank { color: var(--amber); }
.lb-av {
  width: 28px; height: 28px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: var(--f-head); font-size: 10px; font-weight: 800;
  border: 1.5px solid;
}
.lb-info { flex: 1; min-width: 0; }
.lb-name { font-size: 13px; font-weight: 700; color: var(--text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.lb-zone { font-size: 10px; color: var(--text-3); }
.lb-score { font-family: var(--f-head); font-size: 14px; font-weight: 800; color: var(--indigo); }

.safety-card { padding: 20px; display: flex; flex-direction: column; gap: 14px; }
.sos-btn-wrap { display: flex; justify-content: center; }
.sos-btn {
  position: relative; width: 90px; height: 90px;
  cursor: pointer;
}
.sos-pulse {
  position: absolute; inset: -8px; border-radius: 50%;
  border: 2px solid rgba(244,63,94,.3);
  animation: sosPulse 2s ease-in-out infinite;
}
@keyframes sosPulse { 0%,100%{transform:scale(1);opacity:.6} 50%{transform:scale(1.1);opacity:.2} }
.sos-inner {
  position: absolute; inset: 0; border-radius: 50%;
  background: linear-gradient(135deg, #FFF1F2, #FFE4E6);
  border: 2.5px solid var(--rose);
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  box-shadow: 0 4px 16px rgba(244,63,94,0.25);
  transition: all 0.2s;
}
.sos-btn:hover .sos-inner { background: linear-gradient(135deg, #FFE4E6, #FECDD3); box-shadow: 0 6px 24px rgba(244,63,94,0.4); }
.sos-btn:active .sos-inner { transform: scale(0.96); }
.sos-txt { font-family: var(--f-head); font-size: 17px; font-weight: 900; color: var(--rose); }
.sos-sub { font-size: 8px; font-weight: 600; color: rgba(244,63,94,.6); text-align: center; margin-top: 1px; }

.shield-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 9px 12px; border-radius: var(--r-sm);
  background: var(--surface-2); border: 1.5px solid var(--border);
}
.shield-lbl { font-size: 12px; font-weight: 600; color: var(--text-2); }
.badge-pill {
  font-size: 10px; font-weight: 700; padding: 2px 10px;
  border-radius: 20px; border: 1.5px solid;
}
.badge-ok   { background: var(--emerald-bg); color: #065F46; border-color: rgba(16,185,129,.25); }
.badge-warn { background: var(--amber-bg); color: #92400E; border-color: rgba(245,158,11,.25); }

.toggle-row { display: flex; align-items: center; justify-content: space-between; }
.toggle-lbl { font-size: 12px; font-weight: 600; color: var(--text-2); }
.tog {
  width: 36px; height: 20px; border-radius: 10px;
  background: #E5E7EB; border: 1.5px solid #D1D5DB;
  position: relative; cursor: pointer; transition: all 0.3s; flex-shrink: 0;
}
.tog.on { background: var(--emerald); border-color: var(--emerald); }
.tog::after {
  content: ''; position: absolute;
  width: 14px; height: 14px; border-radius: 50%;
  background: #fff; top: 1px; left: 1px;
  transition: all 0.3s; box-shadow: 0 1px 4px rgba(0,0,0,.2);
}
.tog.on::after { transform: translateX(16px); }

/* ‚îÄ‚îÄ‚îÄ ROW 5: Offline Packs ‚îÄ‚îÄ‚îÄ */
.row5 {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: var(--gap);
}
.pack-card { padding: 18px 20px; }
.pack-top { display: flex; align-items: center; gap: 10px; margin-bottom: 12px; }
.pack-icon-wrap {
  width: 44px; height: 44px; border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 22px; flex-shrink: 0;
}
.pack-name { font-size: 14px; font-weight: 700; color: var(--text); }
.pack-meta { font-size: 11px; color: var(--text-3); margin-top: 1px; }
.pack-track { height: 5px; background: #E5E7EB; border-radius: 3px; overflow: hidden; margin-bottom: 10px; }
.pack-fill { height: 100%; border-radius: 3px; background: linear-gradient(90deg, var(--indigo), var(--sky)); transition: width 0.5s ease; }
.pack-foot { display: flex; justify-content: space-between; align-items: center; }
.pack-size { font-family: var(--f-mono); font-size: 11px; color: var(--text-3); }

/* ‚îÄ‚îÄ‚îÄ ROW 6: Admin ‚îÄ‚îÄ‚îÄ */
.row6 {
  display: grid;
  grid-template-columns: 1.8fr 1fr 1fr;
  gap: var(--gap);
}
.admin-map-card { padding: 20px; display: flex; flex-direction: column; }
.admin-map-canvas {
  flex: 1; min-height: 150px; border-radius: var(--r-sm);
  background: #1a2744; position: relative; overflow: hidden;
  cursor: crosshair; border: 1.5px solid rgba(79,70,229,0.15);
}
.admin-map-canvas svg { width: 100%; height: 100%; }
.drop-dot {
  position: absolute; width: 12px; height: 12px; border-radius: 50%;
  background: var(--coral); box-shadow: 0 0 12px var(--coral);
  transform: translate(-50%,-50%); pointer-events: none; display: none;
  animation: dropPop .4s ease;
}
@keyframes dropPop { from{transform:translate(-50%,-50%) scale(0)} to{transform:translate(-50%,-50%) scale(1)} }
.admin-tools { display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; align-items: center; }

.broadcast-card { padding: 20px; display: flex; flex-direction: column; gap: 10px; }
.rw-card { padding: 20px; display: flex; flex-direction: column; gap: 8px; }

/* ‚îÄ‚îÄ‚îÄ COMPASS DIAL ‚îÄ‚îÄ‚îÄ */
.dial {
  position: relative; width: 80px; height: 80px; flex-shrink: 0;
}
.dial-r1 { position:absolute; inset:0; border-radius:50%; border:1.5px solid rgba(79,70,229,.15); }
.dial-r2 { position:absolute; inset:10px; border-radius:50%; border:1.5px solid rgba(79,70,229,.22); }
.dial-r3 { position:absolute; inset:20px; border-radius:50%; border:1.5px solid rgba(79,70,229,.32); }
.dial-center-pill {
  position:absolute; inset:28px; border-radius:50%;
  background: var(--indigo-bg); border:2px solid var(--indigo);
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  box-shadow: 0 0 0 4px rgba(79,70,229,0.08);
}
.dial-temp { font-family:var(--f-head); font-size:8px; font-weight:800; color:var(--indigo); line-height:1; }
.dial-dist { font-size:7px; color:var(--text-3); margin-top:1px; }
.dial-needle {
  position:absolute; inset:0;
  display:flex; justify-content:center;
  animation:needleSpin 5s ease-in-out infinite alternate;
  pointer-events:none;
}
@keyframes needleSpin { from{transform:rotate(-20deg)} to{transform:rotate(30deg)} }
.dial-nd-svg { width:100%; height:100%; }
.dial-labels span { position:absolute; font-size:8px; font-weight:700; color:var(--text-3); }
.d-n { top:1px; left:50%; transform:translateX(-50%); color:var(--indigo) !important; }
.d-s { bottom:1px; left:50%; transform:translateX(-50%); }
.d-e { right:1px; top:50%; transform:translateY(-50%); }
.d-w { left:1px; top:50%; transform:translateY(-50%); }

.compass-info { flex: 1; display: flex; flex-direction: column; gap: 10px; }
.prox-track { height:5px; background:#E5E7EB; border-radius:3px; overflow:hidden; }
.prox-fill {
  height:100%; width:68%;
  background: linear-gradient(90deg, var(--sky), var(--indigo), var(--coral));
  border-radius:3px; transition:width .6s cubic-bezier(0.34,1.56,0.64,1);
}
.prox-labels { display:flex; justify-content:space-between; font-size:10px; font-weight:600; color:var(--text-3); }
.info-row { display:flex; justify-content:space-between; }
.ik { font-size:11px; color:var(--text-3); font-weight:600; }
.iv { font-size:11px; font-weight:700; color:var(--text); }
.iv.coral { color:var(--coral); }
.iv.indigo { color:var(--indigo); }

/* ‚îÄ‚îÄ‚îÄ INPUTS & BUTTONS ‚îÄ‚îÄ‚îÄ */
.inp {
  background: var(--surface-2); border: 1.5px solid var(--border);
  border-radius: 10px; padding: 9px 14px;
  font-family: var(--f-body); font-size: 13px; color: var(--text);
  outline: none; width: 100%; transition: border-color 0.2s, box-shadow 0.2s;
}
.inp::placeholder { color: var(--text-3); }
.inp:focus { border-color: rgba(79,70,229,.45); box-shadow: 0 0 0 3px rgba(79,70,229,.1); }
textarea.inp { resize: none; height: 64px; }

.sel {
  background: var(--surface-2); border: 1.5px solid var(--border);
  border-radius: 10px; padding: 8px 12px;
  font-family: var(--f-body); font-size: 12px; color: var(--text);
  outline: none; cursor: pointer;
}

.btn {
  font-family: var(--f-body); font-size: 12px; font-weight: 700;
  padding: 9px 18px; border-radius: 10px; border: 1.5px solid transparent;
  cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; gap: 5px;
  white-space: nowrap; letter-spacing: 0.02em;
}
.btn-primary {
  background: linear-gradient(135deg, var(--indigo), var(--violet));
  color: #fff; box-shadow: 0 3px 12px rgba(79,70,229,.3);
}
.btn-primary:hover { box-shadow: 0 6px 20px rgba(79,70,229,.4); transform: translateY(-1px); }
.btn-coral {
  background: linear-gradient(135deg, var(--coral), #EA580C);
  color: #fff; box-shadow: 0 3px 12px rgba(249,115,22,.3);
}
.btn-coral:hover { box-shadow: 0 6px 20px rgba(249,115,22,.4); transform: translateY(-1px); }
.btn-outline {
  background: transparent; border-color: var(--border-md);
  color: var(--text-2);
}
.btn-outline:hover { background: var(--surface-3); border-color: rgba(79,70,229,.25); color: var(--indigo); }
.btn-sm { padding: 7px 14px; font-size: 11px; }
.btn-xs { padding: 5px 10px; font-size: 10px; }

.r-slider {
  -webkit-appearance: none; appearance: none;
  width: 100%; height: 4px; background: #E5E7EB; border-radius: 2px; outline: none; cursor: pointer;
}
.r-slider::-webkit-slider-thumb {
  -webkit-appearance: none; width: 16px; height: 16px; border-radius: 50%;
  background: linear-gradient(135deg, var(--indigo), var(--violet));
  cursor: pointer; box-shadow: 0 2px 8px rgba(79,70,229,.4);
}

/* ‚îÄ‚îÄ‚îÄ MODALS ‚îÄ‚îÄ‚îÄ */
.modal-bg {
  display: none; position: fixed; inset: 0;
  background: rgba(30, 27, 75, 0.5);
  backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  z-index: 1000; align-items: center; justify-content: center;
  padding: 20px;
}
.modal-bg.open { display: flex; }
.modal-box {
  background: var(--surface);
  border: 1.5px solid var(--border-md);
  border-radius: 22px; padding: 32px;
  width: 100%; max-width: 340px;
  text-align: center;
  box-shadow: 0 20px 60px rgba(79,70,229,.2);
  animation: boxPop 0.35s cubic-bezier(0.34,1.56,0.64,1);
}
@keyframes boxPop { from{transform:scale(0.8);opacity:0} to{transform:scale(1);opacity:1} }
.modal-code {
  font-family: var(--f-head); font-size: 30px; font-weight: 900;
  color: var(--coral); letter-spacing: 0.2em;
  margin: 12px 0;
}
.qr-grid {
  width: 100px; height: 100px; background: #fff;
  border: 2px solid #E5E7EB; border-radius: 8px;
  margin: 0 auto 12px;
  display: grid; grid-template-columns: repeat(7,1fr);
  grid-template-rows: repeat(7,1fr); padding: 8px; gap: 1.5px;
}
.qc { border-radius: 1px; }

/* ‚îÄ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ‚îÄ */
.toast {
  position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%);
  background: var(--text);
  border-radius: 12px; padding: 12px 22px;
  font-size: 13px; font-weight: 600; color: #fff;
  box-shadow: 0 8px 24px rgba(30,27,75,.25);
  z-index: 5000; opacity: 0; transition: opacity 0.3s;
  pointer-events: none; white-space: nowrap;
  max-width: calc(100vw - 40px);
  text-align: center;
}
.toast.vis { opacity: 1; }

/* ‚îÄ‚îÄ‚îÄ PAGE LOAD ANIMATIONS ‚îÄ‚îÄ‚îÄ */
.card, .topnav {
  animation: revealUp 0.5s ease both;
}
@keyframes revealUp { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }

.topnav { animation-delay: .02s; }
.map-card { animation-delay: .06s; }
.stats-stack .stat-hero:nth-child(1) { animation-delay: .10s; }
.stats-stack .stat-hero:nth-child(2) { animation-delay: .14s; }
.stats-stack .compass-card { animation-delay: .18s; }
.feed-card { animation-delay: .08s; }
.row2 .card:nth-child(1) { animation-delay: .22s; }
.row2 .card:nth-child(2) { animation-delay: .26s; }
.row2 .card:nth-child(3) { animation-delay: .30s; }
.row2 .card:nth-child(4) { animation-delay: .34s; }
.row3 .card:nth-child(1) { animation-delay: .38s; }
.row3 .card:nth-child(2) { animation-delay: .42s; }
.row3 .card:nth-child(3) { animation-delay: .46s; }
.row4 .card:nth-child(1) { animation-delay: .50s; }
.row4 .card:nth-child(2) { animation-delay: .54s; }
.row4 .card:nth-child(3) { animation-delay: .58s; }
.row5 .card:nth-child(1) { animation-delay: .62s; }
.row5 .card:nth-child(2) { animation-delay: .66s; }
.row5 .card:nth-child(3) { animation-delay: .70s; }
.row5 .card:nth-child(4) { animation-delay: .74s; }
.row6 .card:nth-child(1) { animation-delay: .78s; }
.row6 .card:nth-child(2) { animation-delay: .82s; }
.row6 .card:nth-child(3) { animation-delay: .86s; }

/* ‚îÄ‚îÄ‚îÄ RESPONSIVE BREAKPOINTS ‚îÄ‚îÄ‚îÄ */

/* Tablet landscape & small desktop: ‚â§1100px */
@media (max-width: 1100px) {
  .row1 { grid-template-columns: 1fr; grid-template-rows: auto; }
  .row1-left { grid-template-columns: 1.5fr 1fr; grid-template-rows: auto auto; }
  .map-card { grid-column: 1; grid-row: 1 / 3; min-height: 360px; }
  .stats-stack { grid-column: 2; flex-direction: column; }
  .feed-card { grid-column: 1 / -1; grid-row: auto; max-height: 220px; }

  .row3 { grid-template-columns: 1fr 1fr; }
  .row3 .chat-card { grid-column: 1 / -1; }

  .row4 { grid-template-columns: 1.2fr 1fr; }
  .row4 .safety-card { grid-column: 1 / -1; }

  .row5 { grid-template-columns: repeat(2, 1fr); }
  .row6 { grid-template-columns: 1fr 1fr; }
  .row6 .admin-map-card { grid-column: 1 / -1; }

  .nav-pill:not(.active) { display: none; }
}

/* Tablet portrait: ‚â§768px */
@media (max-width: 768px) {
  :root { --gap: 10px; --r: 14px; --r-sm: 10px; }
  .shell { padding: 12px 12px 80px; }

  .topnav { padding: 12px 16px; }
  .logo-text { font-size: 20px; }
  .nav-pill { display: none; }
  .coin-badge, .rank-badge { padding: 6px 10px; font-size: 13px; }
  .user-av { width: 34px; height: 34px; font-size: 12px; }
  .bottom-nav { display: block; }

  .row1-left { grid-template-columns: 1fr; }
  .map-card { grid-column: 1; grid-row: auto; min-height: 280px; }
  .stats-stack { grid-column: 1; flex-direction: row; }
  .stats-stack .stat-hero { flex: 1; }
  .stats-stack .compass-card { display: none; }
  .feed-card { grid-column: 1; max-height: 200px; }

  .row2 { grid-template-columns: repeat(2, 1fr); }

  .row3 { grid-template-columns: 1fr; }
  .row3 .ar-viewport { height: 160px; }

  .row4 { grid-template-columns: 1fr; }
  .bazaar-grid { grid-template-columns: repeat(2, 1fr); }

  .row5 { grid-template-columns: repeat(2, 1fr); }

  .row6 { grid-template-columns: 1fr; }

  .stat-hero-val { font-size: 34px; }
  .mini-stat-val { font-size: 24px; }
}

/* Mobile: ‚â§480px */
@media (max-width: 480px) {
  :root { --gap: 8px; }
  .shell { padding: 10px 10px 76px; }

  .topnav { padding: 10px 14px; gap: 8px; }
  .logo-text { font-size: 18px; }
  .logo-icon { width: 32px; height: 32px; font-size: 16px; }
  .coin-badge { font-size: 12px; padding: 5px 10px; }
  .rank-badge { display: none; }

  .row2 { grid-template-columns: repeat(2, 1fr); }
  .stats-stack { flex-direction: column; }
  .stats-stack .stat-hero { min-height: auto; }

  .bazaar-grid { grid-template-columns: repeat(2, 1fr); }
  .row5 { grid-template-columns: 1fr 1fr; }

  .modal-box { padding: 24px 20px; border-radius: 18px; }
  .btn { font-size: 11px; padding: 8px 14px; }
}

/* Large desktop: ‚â•1400px */
@media (min-width: 1400px) {
  .row1 { grid-template-columns: 1fr 300px; }
  .row3 { grid-template-columns: 1fr 1.4fr 1fr; }
}

</style>
</head>
<body>

<!-- REDEEM MODAL -->
<div class="modal-bg" id="redeemBg">
  <div class="modal-box">
    <div style="font-size:11px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--text-3);">üè™ Bazaar Redemption</div>
    <div style="font-size:32px;margin:10px 0;" id="mEmoji">üßã</div>
    <div style="font-size:15px;font-weight:700;color:var(--text);" id="mName">Kada Chai ¬∑ SM Street</div>
    <div class="modal-code" id="mCode">HNT-4X7K</div>
    <div class="qr-grid" id="mQr"></div>
    <div style="font-size:12px;font-weight:700;color:var(--rose);" id="mTimer">‚è± Expires in: 04:59</div>
    <div style="font-size:11px;color:var(--text-3);margin-top:6px;">üîí Anti-fraud verified ¬∑ Single use ¬∑ Server-signed</div>
    <div style="margin-top:18px;display:flex;gap:8px;justify-content:center;">
      <button class="btn btn-outline btn-sm" onclick="closeModals()">Close</button>
    </div>
  </div>
</div>

<!-- SOS MODAL -->
<div class="modal-bg" id="sosBg">
  <div class="modal-box" style="border-color:rgba(244,63,94,.3);">
    <div style="font-size:11px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--rose);">‚ö† SOS BROADCAST ACTIVE</div>
    <div style="font-size:48px;margin:14px 0;">üÜò</div>
    <div style="font-size:14px;font-weight:600;color:var(--text);">Broadcasting to <strong style="color:var(--indigo);">3 trusted contacts</strong></div>
    <div style="font-family:var(--f-mono);font-size:11px;color:var(--text-3);margin-top:6px;">üìç 11.2588¬∞N ¬∑ 75.7804¬∞E ¬∑ Calicut</div>
    <div style="font-size:13px;font-weight:700;color:var(--rose);margin-top:8px;" id="sosT">Broadcasting: 00:00</div>
    <div style="margin-top:20px;">
      <button class="btn btn-sm" style="background:var(--rose-bg);border:1.5px solid rgba(244,63,94,.3);color:var(--rose);" onclick="closeSOS()">Cancel SOS</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<div class="shell">

  <!-- ‚îÄ‚îÄ TOP NAV ‚îÄ‚îÄ -->
  <nav class="topnav card">
    <div class="logo">
      <div class="logo-icon">üéØ</div>
      <div class="logo-text">Okh<span>ota</span></div>
    </div>

    <div class="nav-pill active">
      <div class="pip"></div>
      Live ¬∑ Zone 7
    </div>
    <div class="nav-pill" onclick="showToast('üó∫ Map view')">üó∫ Map</div>
    <div class="nav-pill" onclick="showToast('üéØ Hunts')">üéØ Hunts</div>
    <div class="nav-pill" onclick="showToast('üí¨ Social')">üí¨ Social</div>
    <div class="nav-pill" onclick="showToast('üè™ Bazaar')">üè™ Bazaar</div>
    <div class="nav-pill" onclick="showToast('üõ° Shield')">üõ° Shield</div>

    <div class="nav-spacer"></div>

    <div class="nav-right">
      <div class="coin-badge">ü™ô <span id="topCoins">2,840</span></div>
      <div class="rank-badge">üèÜ #47</div>
      <div class="user-av">AX</div>
    </div>
  </nav>

  <!-- ‚îÄ‚îÄ ROW 1: Map + Stats + Feed ‚îÄ‚îÄ -->
  <div class="row1">
    <div class="row1-left">

      <!-- MAP -->
      <div class="card elevated map-card">
        <div class="sec-label">üó∫ Live Tactical Map</div>
        <div class="map-canvas-wrap">
          <svg viewBox="0 0 700 380" xmlns="http://www.w3.org/2000/svg" style="position:absolute;inset:0;width:100%;height:100%;">
            <defs>
              <pattern id="mg" width="34" height="34" patternUnits="userSpaceOnUse">
                <path d="M 34 0 L 0 0 0 34" fill="none" stroke="rgba(79,70,229,0.12)" stroke-width="1"/>
              </pattern>
              <radialGradient id="hm1" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="#F97316" stop-opacity="0.3"/>
                <stop offset="100%" stop-color="#F97316" stop-opacity="0"/>
              </radialGradient>
              <radialGradient id="hm2" cx="50%" cy="50%" r="50%">
                <stop offset="0%" stop-color="#F97316" stop-opacity="0.17"/>
                <stop offset="100%" stop-color="#F97316" stop-opacity="0"/>
              </radialGradient>
              <filter id="gf"><feGaussianBlur stdDeviation="3" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
            </defs>
            <!-- BG -->
            <rect width="700" height="380" fill="#1E2B47"/>
            <rect width="700" height="380" fill="url(#mg)"/>
            <!-- Main roads -->
            <line x1="0" y1="190" x2="700" y2="190" stroke="rgba(255,255,255,0.12)" stroke-width="12"/>
            <line x1="350" y1="0" x2="350" y2="380" stroke="rgba(255,255,255,0.12)" stroke-width="12"/>
            <!-- Secondary roads -->
            <line x1="0" y1="118" x2="700" y2="118" stroke="rgba(255,255,255,0.07)" stroke-width="6"/>
            <line x1="0" y1="302" x2="700" y2="302" stroke="rgba(255,255,255,0.07)" stroke-width="6"/>
            <line x1="175" y1="0" x2="175" y2="380" stroke="rgba(255,255,255,0.07)" stroke-width="6"/>
            <line x1="528" y1="0" x2="528" y2="380" stroke="rgba(255,255,255,0.07)" stroke-width="6"/>
            <!-- Buildings -->
            <rect x="40" y="50" width="65" height="45" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <rect x="118" y="40" width="38" height="62" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <rect x="236" y="40" width="72" height="55" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <rect x="40" y="218" width="65" height="58" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <rect x="395" y="48" width="80" height="48" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <rect x="492" y="35" width="48" height="70" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <rect x="395" y="218" width="90" height="62" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <rect x="558" y="225" width="58" height="52" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <rect x="236" y="308" width="72" height="55" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <rect x="558" y="132" width="60" height="45" rx="3" fill="rgba(255,255,255,0.06)" stroke="rgba(255,255,255,0.12)" stroke-width="1"/>
            <!-- Road labels -->
            <text x="356" y="186" fill="rgba(255,255,255,0.3)" font-family="Fira Code" font-size="9">SM STREET</text>
            <text x="185" y="186" fill="rgba(255,255,255,0.25)" font-family="Fira Code" font-size="8">BEACH RD</text>
            <!-- Water -->
            <rect x="640" y="0" width="60" height="380" fill="rgba(14,165,233,0.12)" stroke="rgba(14,165,233,0.2)" stroke-width="1"/>
            <!-- Heatmaps -->
            <ellipse cx="350" cy="190" rx="95" ry="74" fill="url(#hm1)"/>
            <ellipse cx="160" cy="158" rx="68" ry="52" fill="url(#hm2)"/>
            <ellipse cx="555" cy="272" rx="58" ry="46" fill="url(#hm2)"/>
            <!-- Zone boundary -->
            <polygon points="125,78 568,78 610,320 88,320" fill="none" stroke="rgba(79,70,229,0.4)" stroke-width="1.5" stroke-dasharray="8,5"/>
            <text x="132" y="97" fill="rgba(79,70,229,0.7)" font-family="Fira Code" font-size="8">‚óé ACTIVE ZONE 7</text>
            <!-- Other players -->
            <circle cx="205" cy="153" r="5" fill="#10B981" filter="url(#gf)"/>
            <circle cx="278" cy="248" r="5" fill="#F59E0B" filter="url(#gf)"/>
            <circle cx="464" cy="163" r="5" fill="#10B981" filter="url(#gf)"/>
            <circle cx="492" cy="278" r="5" fill="#F43F5E" filter="url(#gf)"/>
            <circle cx="145" cy="278" r="5" fill="#10B981" filter="url(#gf)"/>
            <circle cx="588" cy="158" r="5" fill="#F59E0B" filter="url(#gf)"/>
            <!-- Loot crates -->
            <rect x="118" y="205" width="14" height="14" rx="3" fill="rgba(249,115,22,0.25)" stroke="#F97316" stroke-width="2">
              <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
            </rect>
            <text x="122" y="216" font-size="8">üì¶</text>
            <rect x="437" y="108" width="14" height="14" rx="3" fill="rgba(249,115,22,0.25)" stroke="#F97316" stroke-width="2">
              <animate attributeName="opacity" values="0.5;1;0.5" dur="2.4s" repeatCount="indefinite"/>
            </rect>
            <text x="441" y="119" font-size="8">üì¶</text>
            <rect x="300" y="308" width="14" height="14" rx="3" fill="rgba(249,115,22,0.25)" stroke="#F97316" stroke-width="2">
              <animate attributeName="opacity" values="0.5;1;0.5" dur="1.9s" repeatCount="indefinite"/>
            </rect>
            <text x="304" y="319" font-size="8">üì¶</text>
            <!-- Riddle anchor -->
            <circle cx="530" cy="120" r="11" fill="none" stroke="rgba(79,70,229,0.7)" stroke-width="2" stroke-dasharray="4,2">
              <animateTransform attributeName="transform" type="rotate" values="0 530 120;360 530 120" dur="6s" repeatCount="indefinite"/>
            </circle>
            <text x="524.5" y="124.5" font-size="11">‚ùì</text>
            <!-- YOU dot -->
            <circle cx="350" cy="190" r="8" fill="rgba(79,70,229,0.3)" filter="url(#gf)">
              <animate attributeName="r" values="8;14;8" dur="2.5s" repeatCount="indefinite"/>
              <animate attributeName="opacity" values="0.8;0.3;0.8" dur="2.5s" repeatCount="indefinite"/>
            </circle>
            <circle cx="350" cy="190" r="6" fill="#4F46E5" stroke="#fff" stroke-width="2"/>
            <text x="358" y="182" fill="rgba(255,255,255,0.8)" font-family="Fira Code" font-size="7.5" font-weight="500">YOU</text>
          </svg>
        </div>
        <div class="map-chips-row">
          <span class="chip chip-emerald">‚óè 23 Hunters</span>
          <span class="chip chip-coral">üì¶ 3 Drops</span>
          <span class="chip chip-rose">üî• Zone Hot</span>
          <span class="chip chip-sky">üìç 1.2km Nearest</span>
        </div>
      </div>

      <!-- STATS STACK -->
      <div class="stats-stack">
        <!-- Coins hero -->
        <div class="card stat-hero elevated" style="background:linear-gradient(135deg,rgba(245,158,11,0.08),rgba(249,115,22,0.05));">
          <div class="stat-hero-bg" style="background:var(--amber);"></div>
          <div class="sec-label" style="color:var(--amber);">ü™ô O-Coins</div>
          <div class="stat-hero-val" style="color:#92400E;" id="coinsDisplay">2,840</div>
          <div class="stat-hero-lbl">Balance</div>
          <div class="stat-hero-sub trend-up">‚ñ≤ +380 this week</div>
          <div class="sparkline-wrap" style="display:flex;align-items:flex-end;gap:3px;height:28px;margin-top:12px;" id="spark"></div>
        </div>
        <!-- Rank hero -->
        <div class="card stat-hero elevated" style="background:linear-gradient(135deg,rgba(79,70,229,0.08),rgba(124,58,237,0.05));">
          <div class="stat-hero-bg" style="background:var(--indigo);"></div>
          <div class="sec-label" style="color:var(--indigo);">üèÜ District Rank</div>
          <div class="stat-hero-val" style="color:var(--indigo);">#47</div>
          <div class="stat-hero-lbl">Calicut ¬∑ 847 Hunters</div>
          <div style="margin-top:12px;">
            <div style="display:flex;justify-content:space-between;font-size:11px;font-weight:600;color:var(--text-3);margin-bottom:5px;">
              <span>Progress</span><span style="color:var(--indigo);">2,840 pts</span>
            </div>
            <div class="prox-track"><div style="height:100%;width:34%;background:linear-gradient(90deg,var(--indigo),var(--violet));border-radius:3px;"></div></div>
          </div>
          <div class="stat-hero-sub trend-up">‚ñ≤ +6 this week</div>
        </div>
        <!-- Compass -->
        <div class="card compass-card">
          <div class="dial">
            <div class="dial-r1"></div>
            <div class="dial-r2"></div>
            <div class="dial-r3"></div>
            <div class="dial-center-pill">
              <div class="dial-temp" id="dTemp">WARM</div>
              <div class="dial-dist" id="dDist">140M</div>
            </div>
            <div class="dial-needle">
              <svg class="dial-nd-svg" viewBox="0 0 80 80">
                <line x1="40" y1="40" x2="40" y2="10" stroke="var(--coral)" stroke-width="2" stroke-linecap="round" opacity="0.9"/>
                <circle cx="40" cy="40" r="3" fill="rgba(249,115,22,0.5)"/>
              </svg>
            </div>
            <div class="dial-labels">
              <span class="d-n">N</span><span class="d-s">S</span><span class="d-e">E</span><span class="d-w">W</span>
            </div>
          </div>
          <div class="compass-info">
            <div class="sec-label" style="margin-bottom:0;">üß≠ Hot / Cold</div>
            <div>
              <div class="prox-labels" style="margin-bottom:4px;"><span>‚ùÑ</span><span>üî•</span></div>
              <div class="prox-track"><div class="prox-fill" id="proxFill"></div></div>
            </div>
            <div style="display:flex;flex-direction:column;gap:4px;">
              <div class="info-row"><span class="ik">Target</span><span class="iv coral">Crate #B3 Gold</span></div>
              <div class="info-row"><span class="ik">Zone</span><span class="iv">SM Street</span></div>
            </div>
            <button class="btn btn-outline btn-xs" onclick="simProx()">‚ü≥ Simulate</button>
          </div>
        </div>
      </div>

    </div><!-- /row1-left -->

    <!-- FEED -->
    <div class="card feed-card">
      <div class="sec-label">‚ö° Live Activity</div>
      <div class="feed-list" id="feedList"></div>
    </div>

  </div><!-- /row1 -->

  <!-- ‚îÄ‚îÄ ROW 2: 4 Mini Stats ‚îÄ‚îÄ -->
  <div class="row2">
    <div class="card mini-stat" style="background:linear-gradient(135deg,rgba(79,70,229,0.08),rgba(79,70,229,0.03));">
      <div class="mini-stat-icon" style="background:var(--indigo-bg);">üë•</div>
      <div class="mini-stat-val" style="color:var(--indigo);">23</div>
      <div class="mini-stat-lbl">Online Hunters</div>
    </div>
    <div class="card mini-stat" style="background:linear-gradient(135deg,rgba(249,115,22,0.08),rgba(249,115,22,0.03));">
      <div class="mini-stat-icon" style="background:var(--coral-bg);">üì¶</div>
      <div class="mini-stat-val" style="color:var(--coral);">3</div>
      <div class="mini-stat-lbl">Loot Drops</div>
    </div>
    <div class="card mini-stat" style="background:linear-gradient(135deg,rgba(16,185,129,0.08),rgba(16,185,129,0.03));">
      <div class="mini-stat-icon" style="background:var(--emerald-bg);">üß©</div>
      <div class="mini-stat-val" style="color:var(--emerald);">2<span style="font-size:16px;color:var(--text-3);font-weight:600;">/5</span></div>
      <div class="mini-stat-lbl">Riddle Progress</div>
    </div>
    <div class="card mini-stat" style="background:linear-gradient(135deg,rgba(16,185,129,0.08),rgba(16,185,129,0.03));">
      <div class="mini-stat-icon" style="background:var(--emerald-bg);">üõ°</div>
      <div class="mini-stat-val" style="color:var(--emerald);font-size:22px;">SAFE</div>
      <div class="mini-stat-lbl">Shield Status</div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ ROW 3: AR + Riddle + Chat ‚îÄ‚îÄ -->
  <div class="row3">

    <!-- AR -->
    <div class="card ar-card elevated">
      <div class="ar-viewport">
        <div class="ar-grid"></div>
        <div class="ar-scan-line"></div>
        <div class="ar-hud-tl">ALT: 12.4m<br>AZM: 047¬∞<br>DIST: 48m<br>CONF: 94%</div>
        <div class="ar-hud-tr">CRATE #A7<br>GOLD TIER<br>+120 ü™ô<br>08:42 left</div>
        <div class="ar-bracket-box ab">
          <div class="ab-br"></div><div class="ab-bl"></div>
          <div class="crate-wrap">
            <div class="c3d">
              <div class="cf fr">üì¶</div><div class="cf bk"></div>
              <div class="cf lt"></div><div class="cf rt"></div>
              <div class="cf tp"></div><div class="cf bt"></div>
            </div>
          </div>
        </div>
        <div class="ar-detect">‚óé CRATE DETECTED ‚Äî TAP TO CLAIM</div>
      </div>
      <div class="ar-body">
        <div class="sec-label" style="margin-bottom:8px;">üì∑ AR Scanner</div>
        <div style="font-size:12px;color:var(--text-3);margin-bottom:12px;">Crate detected 48m NE ¬∑ Gold tier</div>
        <div style="display:flex;gap:8px;">
          <button class="btn btn-coral btn-sm" onclick="claimCrate()">‚ö° Claim Crate</button>
          <button class="btn btn-outline btn-sm" onclick="showToast('‚óé Deep scanning area...')">üîç Deep Scan</button>
        </div>
      </div>
    </div>

    <!-- RIDDLE -->
    <div class="card riddle-card elevated">
      <div class="sec-label">üß© Riddle Chain #7 ¬∑ Heritage</div>
      <div class="chain-list">

        <div class="chain-row">
          <div class="chain-connector">
            <div class="chain-num done">‚úì</div>
            <div class="chain-line done"></div>
          </div>
          <div class="chain-body done">
            <div class="chain-title">CLUE 1 ‚Äî COMPLETE ‚úÖ</div>
            <div class="chain-text">Mananchira Square Clock Tower ¬∑ <strong style="color:#065F46;">+50 ü™ô</strong></div>
          </div>
        </div>

        <div class="chain-row">
          <div class="chain-connector">
            <div class="chain-num done">‚úì</div>
            <div class="chain-line done"></div>
          </div>
          <div class="chain-body done">
            <div class="chain-title">CLUE 2 ‚Äî COMPLETE ‚úÖ</div>
            <div class="chain-text">SM Street Heritage Arch ¬∑ <strong style="color:#065F46;">+80 ü™ô</strong></div>
          </div>
        </div>

        <div class="chain-row">
          <div class="chain-connector">
            <div class="chain-num active">3</div>
            <div class="chain-line"></div>
          </div>
          <div class="chain-body active">
            <div class="chain-title">CLUE 3 ‚Äî ACTIVE üîì</div>
            <div class="chain-text" style="margin-bottom:8px;">"I connect two districts across water that is neither river nor sea. My iron ribs echo a thousand years of trade."</div>
            <div class="riddle-row">
              <input class="inp" id="riddleIn" placeholder="Enter location name..." style="border-radius:8px;padding:7px 12px;font-size:12px;" />
              <button class="btn btn-coral btn-xs" onclick="checkRiddle()">Go ‚Üí</button>
            </div>
            <div style="font-size:11px;color:var(--text-3);margin-top:5px;">Reward: 150 ü™ô + Rare Badge</div>
          </div>
        </div>

        <div class="chain-row">
          <div class="chain-connector">
            <div class="chain-num lock">4</div>
            <div class="chain-line"></div>
          </div>
          <div class="chain-body lock">
            <div class="chain-title">CLUE 4 ‚Äî LOCKED üîí</div>
            <div class="chain-text">Solve clue 3 to reveal this.</div>
          </div>
        </div>

        <div class="chain-row">
          <div class="chain-connector">
            <div class="chain-num lock">5</div>
          </div>
          <div class="chain-body lock">
            <div class="chain-title">CLUE 5 ‚Äî LOCKED üîí</div>
            <div class="chain-text">Final destination. Rare loot awaits.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- CHAT -->
    <div class="card chat-card elevated">
      <div class="sec-label">üí¨ Proximity Chat <span style="font-size:10px;color:var(--rose);margin-left:4px;">‚óè LIVE</span></div>
      <div style="font-size:11px;color:var(--text-3);margin-bottom:10px;">8 hunters ¬∑ SM Street Zone ¬∑ Ephemeral</div>
      <div class="status-row">
        <div class="s-btn lfg active" onclick="setStatus(this)">üü¢ LFG</div>
        <div class="s-btn chat" onclick="setStatus(this)">üü° Open</div>
        <div class="s-btn ghost" onclick="setStatus(this)">‚ö´ Ghost</div>
      </div>
      <div class="chat-box" id="chatBox">
        <div class="chat-msg">
          <div class="chat-av" style="background:rgba(16,185,129,.1);border-color:rgba(16,185,129,.3);color:#065F46;">RK</div>
          <div class="chat-body-wrap">
            <div class="chat-nm">RaiderKnight ¬∑ LFG</div>
            <div class="chat-bubble">Anyone near SM Street? Found a riddle anchor üëÄ</div>
          </div>
        </div>
        <div class="chat-msg">
          <div class="chat-av" style="background:rgba(245,158,11,.1);border-color:rgba(245,158,11,.3);color:#92400E;">NX</div>
          <div class="chat-body-wrap">
            <div class="chat-nm">NightFoxKL ¬∑ Open</div>
            <div class="chat-bubble">3 crates near beach junction. ShadowReed camping north!</div>
          </div>
        </div>
        <div class="chat-msg">
          <div class="chat-av" style="background:rgba(244,63,94,.1);border-color:rgba(244,63,94,.3);color:var(--rose);">SR</div>
          <div class="chat-body-wrap">
            <div class="chat-nm">ShadowReed ¬∑ Ghost</div>
            <div class="chat-bubble">Not camping. Just watching üòà</div>
          </div>
        </div>
      </div>
      <div class="chat-input-row">
        <input class="inp" id="chatIn" placeholder="Message zone..." style="border-radius:8px;" onkeydown="if(event.key==='Enter')sendMsg()" />
        <button class="btn btn-primary btn-sm" onclick="sendMsg()">‚Üí</button>
      </div>
      <div style="font-size:10px;color:var(--text-3);margin-top:6px;">‚ö° Messages delete when you leave the zone</div>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ ROW 4: Bazaar + Leaderboard + Safety ‚îÄ‚îÄ -->
  <div class="row4">

    <!-- BAZAAR -->
    <div class="card bazaar-card elevated">
      <div class="sec-label">üè™ The Bazaar ‚Äî Local Vouchers</div>
      <div class="bazaar-grid">
        <div class="bz" onclick="redeem('üßã','Kada Chai','SM Street Stall',80)">
          <div class="bz-em">üßã</div><div class="bz-name">Kada Chai</div>
          <div class="bz-price">80 ü™ô</div><div class="bz-place">SM Street</div>
        </div>
        <div class="bz" onclick="redeem('üçö','Biryani Meal','Hotel Sagar',350)">
          <div class="bz-em">üçö</div><div class="bz-name">Biryani Meal</div>
          <div class="bz-price">350 ü™ô</div><div class="bz-place">Hotel Sagar</div>
        </div>
        <div class="bz" onclick="redeem('üç¶','Ice Cream','Mittai Kada',120)">
          <div class="bz-em">üç¶</div><div class="bz-name">Ice Cream</div>
          <div class="bz-price">120 ü™ô</div><div class="bz-place">Mittai Kada</div>
        </div>
        <div class="bz" onclick="redeem('üü´','Halwa Box','Sweet Corner',200)">
          <div class="bz-em">üü´</div><div class="bz-name">Halwa Box</div>
          <div class="bz-price">200 ü™ô</div><div class="bz-place">Sweet Corner</div>
        </div>
        <div class="bz" onclick="redeem('üêü','Fish Fry','Beach Kada',280)">
          <div class="bz-em">üêü</div><div class="bz-name">Fish Fry</div>
          <div class="bz-price">280 ü™ô</div><div class="bz-place">Beach Kada</div>
        </div>
        <div class="bz" onclick="redeem('ü••','Coconut Water','Beach Vendor',50)">
          <div class="bz-em">ü••</div><div class="bz-name">Coconut Water</div>
          <div class="bz-price">50 ü™ô</div><div class="bz-place">Beach</div>
        </div>
      </div>
    </div>

    <!-- LEADERBOARD -->
    <div class="card lb-card elevated">
      <div class="sec-label">üèÜ King of the Hill ¬∑ Calicut</div>
      <div class="lb-list">
        <div class="lb-row gold">
          <div class="lb-rank" style="color:var(--amber);">1</div>
          <div class="lb-av" style="background:rgba(245,158,11,.15);border-color:rgba(245,158,11,.35);color:#92400E;">NK</div>
          <div class="lb-info"><div class="lb-name">NightKingKozhikode</div><div class="lb-zone">SM Street</div></div>
          <div class="lb-score">9,840</div><span>üëë</span>
        </div>
        <div class="lb-row">
          <div class="lb-rank" style="color:#9CA3AF;">2</div>
          <div class="lb-av" style="background:#F3F4F6;border-color:#E5E7EB;color:#6B7280;">SF</div>
          <div class="lb-info"><div class="lb-name">ShadowFox_KL</div><div class="lb-zone">Kuttichira</div></div>
          <div class="lb-score">8,320</div>
        </div>
        <div class="lb-row">
          <div class="lb-rank" style="color:#D97706;">3</div>
          <div class="lb-av" style="background:rgba(180,83,9,.08);border-color:rgba(180,83,9,.2);color:#B45309;">RH</div>
          <div class="lb-info"><div class="lb-name">RaiderHawk22</div><div class="lb-zone">Mananchira</div></div>
          <div class="lb-score">7,100</div>
        </div>
        <div class="lb-row">
          <div class="lb-rank" style="color:var(--text-3);">4</div>
          <div class="lb-av" style="background:var(--sky-bg);border-color:rgba(14,165,233,.25);color:#0369A1;">NX</div>
          <div class="lb-info"><div class="lb-name">NightFoxKL</div><div class="lb-zone">All Zones</div></div>
          <div class="lb-score">6,880</div>
        </div>
        <div class="lb-row you-row">
          <div class="lb-rank" style="color:var(--indigo);">#47</div>
          <div class="lb-av" style="background:var(--indigo-bg);border-color:rgba(79,70,229,.3);color:var(--indigo);">AX</div>
          <div class="lb-info"><div class="lb-name" style="color:var(--indigo);">You (Archer_X)</div><div class="lb-zone">Zone-7</div></div>
          <div class="lb-score">2,840</div>
        </div>
      </div>
    </div>

    <!-- SAFETY -->
    <div class="card safety-card elevated">
      <div class="sec-label" style="color:var(--rose);">üõ° The Shield ¬∑ Safety</div>

      <div class="sos-btn-wrap">
        <div class="sos-btn" onclick="triggerSOS()">
          <div class="sos-pulse"></div>
          <div class="sos-inner">
            <div class="sos-txt">SOS</div>
            <div class="sos-sub">TAP TO BROADCAST</div>
          </div>
        </div>
      </div>

      <div style="display:flex;flex-direction:column;gap:6px;">
        <div class="shield-item"><span class="shield-lbl">Panic Gyro</span><span class="badge-pill badge-ok">Armed ‚úì</span></div>
        <div class="shield-item"><span class="shield-lbl">ID Verified</span><span class="badge-pill badge-ok">Tier 1 ‚úì</span></div>
        <div class="shield-item"><span class="shield-lbl">Govt ID</span><span class="badge-pill badge-warn">Pending</span></div>
      </div>

      <div style="display:flex;flex-direction:column;gap:8px;">
        <div class="toggle-row">
          <span class="toggle-lbl">üë© Lady-Guard Mode</span>
          <div class="tog on" onclick="this.classList.toggle('on');showToast(this.classList.contains('on')?'‚úÖ Lady-Guard enabled':'Lady-Guard disabled')"></div>
        </div>
        <div class="toggle-row">
          <span class="toggle-lbl">üó∫ Hide on heatmaps</span>
          <div class="tog on" onclick="this.classList.toggle('on')"></div>
        </div>
      </div>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ ROW 5: Offline Packs ‚îÄ‚îÄ -->
  <div class="row5">

    <div class="card pack-card">
      <div class="pack-top">
        <div class="pack-icon-wrap" style="background:rgba(14,165,233,0.12);">üèñ</div>
        <div><div class="pack-name">Calicut Beach</div><div class="pack-meta">3 hunts ¬∑ 2h ago</div></div>
      </div>
      <div class="pack-track"><div class="pack-fill" style="width:100%;"></div></div>
      <div class="pack-foot"><span class="pack-size">4.8 MB</span><span class="chip chip-emerald" style="font-size:10px;">‚úì Cached</span></div>
    </div>

    <div class="card pack-card">
      <div class="pack-top">
        <div class="pack-icon-wrap" style="background:var(--indigo-bg);">üèô</div>
        <div><div class="pack-name">SM Street District</div><div class="pack-meta">7 hunts ¬∑ Downloading</div></div>
      </div>
      <div class="pack-track"><div class="pack-fill" id="smFill" style="width:62%;"></div></div>
      <div class="pack-foot"><span class="pack-size">3.2 MB</span><span class="chip chip-amber" id="smLbl" style="font-size:10px;">62%</span></div>
    </div>

    <div class="card pack-card">
      <div class="pack-top">
        <div class="pack-icon-wrap" style="background:rgba(124,58,237,0.1);">üïå</div>
        <div><div class="pack-name">Kuttichira Heritage</div><div class="pack-meta">2 hunts ¬∑ Not cached</div></div>
      </div>
      <div class="pack-track"><div class="pack-fill" id="kuFill" style="width:0%;"></div></div>
      <div class="pack-foot"><span class="pack-size">2.1 MB</span><div id="kuCtrl"><button class="btn btn-outline btn-xs" onclick="dlPack('kuFill','kuLbl','kuCtrl')">Download</button></div><span id="kuLbl"></span></div>
    </div>

    <div class="card pack-card">
      <div class="pack-top">
        <div class="pack-icon-wrap" style="background:var(--emerald-bg);">üåø</div>
        <div><div class="pack-name">Thali Temple Zone</div><div class="pack-meta">1 hunt ¬∑ Not cached</div></div>
      </div>
      <div class="pack-track"><div class="pack-fill" id="thFill" style="width:0%;"></div></div>
      <div class="pack-foot"><span class="pack-size">1.9 MB</span><div id="thCtrl"><button class="btn btn-outline btn-xs" onclick="dlPack('thFill','thLbl','thCtrl')">Download</button></div><span id="thLbl"></span></div>
    </div>

  </div>

  <!-- ‚îÄ‚îÄ ROW 6: Admin ‚îÄ‚îÄ -->
  <div class="row6">

    <!-- MAP DROPPER -->
    <div class="card admin-map-card elevated">
      <div class="sec-label">‚öôÔ∏è Admin ¬∑ Map Dropper</div>
      <div class="admin-map-canvas" id="adminMap" onclick="dropLoot(event)">
        <svg viewBox="0 0 500 180" style="position:absolute;inset:0;width:100%;height:100%;" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="ag" width="28" height="28" patternUnits="userSpaceOnUse">
              <path d="M 28 0 L 0 0 0 28" fill="none" stroke="rgba(79,70,229,0.1)" stroke-width="1"/>
            </pattern>
          </defs>
          <rect width="500" height="180" fill="#1E2B47"/>
          <rect width="500" height="180" fill="url(#ag)"/>
          <line x1="0" y1="90" x2="500" y2="90" stroke="rgba(255,255,255,0.1)" stroke-width="6"/>
          <line x1="250" y1="0" x2="250" y2="180" stroke="rgba(255,255,255,0.1)" stroke-width="6"/>
          <text x="10" y="18" fill="rgba(79,70,229,0.6)" font-family="Fira Code" font-size="10">‚óé Click to drop loot ¬∑ Calicut Grid</text>
          <rect x="55" y="35" width="50" height="36" rx="4" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
          <rect x="285" y="22" width="65" height="42" rx="4" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
          <rect x="370" y="100" width="48" height="50" rx="4" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
          <rect x="145" y="105" width="70" height="50" rx="4" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.1)" stroke-width="1"/>
        </svg>
        <div class="drop-dot" id="dropDot"></div>
      </div>
      <div class="admin-tools">
        <select class="sel">
          <option>ü•â Bronze ‚Äî 20 ü™ô</option>
          <option selected>ü•á Gold ‚Äî 120 ü™ô</option>
          <option>üíé Diamond ‚Äî 500 ü™ô</option>
        </select>
        <input class="inp" style="width:130px;padding:7px 12px;font-size:12px;" value="30 min despawn" />
        <button class="btn btn-coral btn-sm" onclick="showToast('‚úÖ Loot queued for drop')">Queue Drop</button>
      </div>
    </div>

    <!-- BROADCAST -->
    <div class="card broadcast-card elevated">
      <div class="sec-label">üì° Geo-Broadcast</div>
      <div>
        <div style="display:flex;justify-content:space-between;font-size:11px;font-weight:600;color:var(--text-3);margin-bottom:5px;">
          <span>Radius</span><span style="color:var(--indigo);" id="radVal">2.0 km</span>
        </div>
        <input type="range" class="r-slider" min="1" max="10" value="2" oninput="document.getElementById('radVal').textContent=this.value+'.0 km'">
      </div>
      <input class="inp" placeholder="Broadcast title..." value="‚ö° Double Loot Event ‚Äî 30 min!" style="font-size:12px;" />
      <textarea class="inp" style="font-size:12px;">Rare Diamond crate dropped near SM Street. First to solve the riddle wins 1000 ü™ô!</textarea>
      <button class="btn btn-primary btn-sm" style="width:100%;" onclick="showToast('üì° Broadcast sent to 847 hunters in range')">üì° Send to Zone</button>
    </div>

    <!-- RIDDLE WRITE -->
    <div class="card rw-card elevated">
      <div class="sec-label">‚úçÔ∏è Riddle Writer</div>
      <textarea class="inp" style="font-size:12px;height:56px;">I stand where the salt wind meets the iron bridge, watched by crows and time...</textarea>
      <input class="inp" placeholder="Answer (hashed server-side)..." value="kallai bridge" style="font-size:12px;" />
      <div style="display:flex;gap:8px;">
        <input class="inp" style="flex:1;font-size:12px;" placeholder="ü™ô Reward" value="150" />
        <button class="btn btn-primary btn-sm" onclick="showToast('‚úÖ Riddle published to Chain #7')">Publish</button>
      </div>
      <div style="font-size:11px;color:var(--text-3);">Chain #7 ¬∑ Anchor: SM Street</div>
    </div>

  </div>

</div><!-- /shell -->

<!-- MOBILE BOTTOM NAV -->
<nav class="bottom-nav">
  <div class="bottom-nav-inner">
    <div class="bnav-item active"><div class="bnav-icon">üó∫</div><div class="bnav-lbl">Map</div></div>
    <div class="bnav-item"><div class="bnav-icon">üéØ</div><div class="bnav-lbl">Hunt</div></div>
    <div class="bnav-item"><div class="bnav-icon">üí¨</div><div class="bnav-lbl">Social</div></div>
    <div class="bnav-item"><div class="bnav-icon">üè™</div><div class="bnav-lbl">Bazaar</div></div>
    <div class="bnav-item"><div class="bnav-icon">üõ°</div><div class="bnav-lbl">Shield</div></div>
  </div>
</nav>

<script>
/* ‚îÄ‚îÄ SPARKLINE ‚îÄ‚îÄ */
const sparkData = [20, 45, 38, 62, 80, 58, 95];
const sp = document.getElementById('spark');
sparkData.forEach((v, i) => {
  const b = document.createElement('div');
  b.style.cssText = `flex:1;height:${v/100*24}px;background:${i===6?'var(--amber)':'rgba(245,158,11,0.3)'};border-radius:3px 3px 0 0;transition:background .3s;cursor:pointer;`;
  b.addEventListener('mouseenter', () => b.style.background = 'var(--amber)');
  b.addEventListener('mouseleave', () => { if(i!==6) b.style.background = 'rgba(245,158,11,0.3)'; });
  sp.appendChild(b);
});

/* ‚îÄ‚îÄ FEED ‚îÄ‚îÄ */
const feedData = [
  ['#F97316','<strong>RaiderKnight</strong> claimed Gold Crate #A7 ¬∑ SM Street','just now'],
  ['#10B981','<strong>NightFoxKL</strong> solved Riddle #2 in Chain 7','1m ago'],
  ['#F43F5E','<strong>ShadowReed</strong> entered Ghost Mode ¬∑ Zone-7','3m ago'],
  ['#F59E0B','New <strong>Gold Crate</strong> dropped near Mananchira','5m ago'],
  ['#10B981','<strong>ViperDash</strong> redeemed Kada Chai voucher','7m ago'],
  ['#4F46E5','<strong>ZephyrKL</strong> completed Chain 6 ‚Äî Full Clear!','9m ago'],
];
const feedEl = document.getElementById('feedList');
function renderFeed(rows) {
  feedEl.innerHTML = '';
  rows.forEach(([col, text, ago]) => {
    const d = document.createElement('div');
    d.className = 'feed-item';
    d.innerHTML = `<div class="feed-dot" style="background:${col};box-shadow:0 0 6px ${col}40"></div><div class="feed-text">${text}</div><div class="feed-ago">${ago}</div>`;
    feedEl.appendChild(d);
  });
}
renderFeed(feedData);
const liveFeed = [
  ['#F97316','<strong>Archer_X</strong> (You) joined Zone-7'],
  ['#10B981','<strong>ShadowFox_KL</strong> solved Riddle #4'],
  ['#F59E0B','Admin dropped <strong>Diamond Crate</strong> at Beach Road'],
  ['#4F46E5','<strong>RaiderHawk22</strong> climbed to rank #3'],
  ['#F43F5E','<strong>NightFoxKL</strong> activated Lady-Guard Mode'],
];
setInterval(() => {
  const [col, text] = liveFeed[Math.floor(Math.random()*liveFeed.length)];
  const d = document.createElement('div');
  d.className = 'feed-item';
  d.style.animation = 'msgIn .3s ease';
  d.innerHTML = `<div class="feed-dot" style="background:${col};box-shadow:0 0 6px ${col}40"></div><div class="feed-text">${text}</div><div class="feed-ago">just now</div>`;
  feedEl.insertBefore(d, feedEl.firstChild);
  if (feedEl.children.length > 7) feedEl.removeChild(feedEl.lastChild);
}, 5000);

/* ‚îÄ‚îÄ COMPASS ‚îÄ‚îÄ */
const proxStates = [
  {t:'‚ùÑ FREEZING',d:'500M',w:'8%'},
  {t:'COLD',d:'350M',w:'28%'},
  {t:'COOL',d:'220M',w:'46%'},
  {t:'WARM',d:'140M',w:'68%'},
  {t:'üî• HOT',d:'60M',w:'86%'},
  {t:'üî• BURNING',d:'15M',w:'96%'},
];
let pIdx = 3;
function simProx() {
  pIdx = (pIdx + 1) % proxStates.length;
  const s = proxStates[pIdx];
  document.getElementById('dTemp').textContent = s.t;
  document.getElementById('dDist').textContent = s.d;
  document.getElementById('proxFill').style.width = s.w;
}

/* ‚îÄ‚îÄ COINS ‚îÄ‚îÄ */
let coins = 2840;
function updateCoins() {
  document.getElementById('coinsDisplay').textContent = coins.toLocaleString();
  document.getElementById('topCoins').textContent = coins.toLocaleString();
}
function claimCrate() {
  coins += 120; updateCoins();
  showToast('‚ö° Crate #A7 claimed! +120 ü™ô');
  addFeedItem('#F59E0B','<strong>You</strong> claimed Gold Crate #A7 ¬∑ SM Street');
}
function addFeedItem(col, text) {
  const d = document.createElement('div');
  d.className = 'feed-item';
  d.style.animation = 'msgIn .3s ease';
  d.innerHTML = `<div class="feed-dot" style="background:${col};box-shadow:0 0 6px ${col}40"></div><div class="feed-text">${text}</div><div class="feed-ago">just now</div>`;
  feedEl.insertBefore(d, feedEl.firstChild);
  if (feedEl.children.length > 7) feedEl.removeChild(feedEl.lastChild);
}

/* ‚îÄ‚îÄ RIDDLE ‚îÄ‚îÄ */
function checkRiddle() {
  const v = document.getElementById('riddleIn').value.toLowerCase().trim();
  if (['bridge','kallai','calicut bridge','iron bridge'].some(a => v.includes(a.split(' ')[0]))) {
    coins += 150; updateCoins();
    showToast('üéâ Correct! +150 ü™ô ¬∑ Clue 4 unlocked!');
    addFeedItem('#10B981', '<strong>You</strong> solved Riddle #3 in Chain 7');
  } else {
    showToast('‚ùå Incorrect ‚Äî think of iron bridges near the sea.');
  }
}

/* ‚îÄ‚îÄ CHAT ‚îÄ‚îÄ */
const replies = [
  ['RK','RaiderKnight','#10B981','#065F46','On my way! Meet at the arch? üèÉ'],
  ['NX','NightFoxKL','#F59E0B','#92400E','Roger that hunter ü´°'],
  ['VD','ViperDash','#10B981','#065F46','Incoming from north side!'],
];
function sendMsg() {
  const inp = document.getElementById('chatIn');
  const msg = inp.value.trim(); if (!msg) return;
  const box = document.getElementById('chatBox');
  const d = document.createElement('div');
  d.className = 'chat-msg';
  d.innerHTML = `<div class="chat-av" style="background:var(--indigo-bg);border-color:rgba(79,70,229,.3);color:var(--indigo);">AX</div><div class="chat-body-wrap"><div class="chat-nm">You ¬∑ LFG</div><div class="chat-bubble mine">${msg}</div></div>`;
  box.appendChild(d); box.scrollTop = box.scrollHeight;
  inp.value = '';
  setTimeout(() => {
    const [id,name,bg,col,rep] = replies[Math.floor(Math.random()*replies.length)];
    const r = document.createElement('div');
    r.className = 'chat-msg';
    r.innerHTML = `<div class="chat-av" style="background:${bg}20;border-color:${bg}50;color:${col};">${id}</div><div class="chat-body-wrap"><div class="chat-nm">${name}</div><div class="chat-bubble">${rep}</div></div>`;
    box.appendChild(r); box.scrollTop = box.scrollHeight;
  }, 900 + Math.random()*600);
}
function setStatus(el) {
  document.querySelectorAll('.s-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
  showToast(`Status updated: ${el.textContent.trim()}`);
}

/* ‚îÄ‚îÄ REDEEM ‚îÄ‚îÄ */
let redeemI;
function redeem(emoji, name, place, cost) {
  if (coins < cost) { showToast(`‚ùå Need ${cost} ü™ô, you have ${coins}`); return; }
  coins -= cost; updateCoins();
  document.getElementById('mEmoji').textContent = emoji;
  document.getElementById('mName').textContent = `${name} ¬∑ ${place}`;
  document.getElementById('mCode').textContent = 'HNT-' + Math.random().toString(36).toUpperCase().slice(2,6);
  const qr = document.getElementById('mQr'); qr.innerHTML = '';
  for (let i=0;i<49;i++){const c=document.createElement('div');c.className='qc';c.style.background=Math.random()>.45?'#000':'#fff';qr.appendChild(c);}
  let s=299; clearInterval(redeemI);
  const tick=()=>{const m=Math.floor(s/60).toString().padStart(2,'0'),sc=(s%60).toString().padStart(2,'0');document.getElementById('mTimer').textContent=`‚è± Expires in: ${m}:${sc}`;if(s--<=0)clearInterval(redeemI);};
  tick(); redeemI=setInterval(tick,1000);
  document.getElementById('redeemBg').classList.add('open');
  addFeedItem('#F59E0B',`<strong>You</strong> redeemed ${name} voucher ¬∑ ${place}`);
}

/* ‚îÄ‚îÄ SOS ‚îÄ‚îÄ */
let sosI;
function triggerSOS() {
  document.getElementById('sosBg').classList.add('open');
  let s=0; clearInterval(sosI);
  sosI=setInterval(()=>{s++;const m=Math.floor(s/60).toString().padStart(2,'0'),sc=(s%60).toString().padStart(2,'0');document.getElementById('sosT').textContent=`Broadcasting: ${m}:${sc}`;},1000);
  addFeedItem('#F43F5E','<strong>SOS ACTIVE</strong> ‚Äî Live location shared with 3 contacts');
}
function closeSOS() {
  document.getElementById('sosBg').classList.remove('open');
  clearInterval(sosI); showToast('‚úÖ SOS cancelled. Stay safe!');
}
function closeModals() {
  document.getElementById('redeemBg').classList.remove('open');
  clearInterval(redeemI);
}

/* ‚îÄ‚îÄ ADMIN DROP ‚îÄ‚îÄ */
function dropLoot(e) {
  const r = e.currentTarget.getBoundingClientRect();
  const d = document.getElementById('dropDot');
  d.style.left = (e.clientX - r.left) + 'px';
  d.style.top = (e.clientY - r.top) + 'px';
  d.style.display = 'block'; d.style.animation = 'none';
  void d.offsetWidth; d.style.animation = 'dropPop .4s ease';
  showToast(`üì¶ Loot marked at grid position`);
  addFeedItem('#F59E0B','Admin dropped <strong>Gold Crate</strong> at new position');
  setTimeout(() => d.style.display = 'none', 3000);
}

/* ‚îÄ‚îÄ OFFLINE DOWNLOADS ‚îÄ‚îÄ */
function dlPack(fillId, lblId, ctrlId) {
  const fill = document.getElementById(fillId);
  const lbl = document.getElementById(lblId);
  const ctrl = document.getElementById(ctrlId);
  ctrl.innerHTML = '';
  lbl.style.cssText = 'font-size:10px;font-weight:700;color:var(--indigo);';
  let p = 0;
  const i = setInterval(() => {
    p += Math.random() * 10;
    if (p >= 100) {
      p = 100; fill.style.width = '100%';
      lbl.textContent = '‚úì'; lbl.style.color = 'var(--emerald)';
      clearInterval(i);
      showToast('‚úÖ Pack downloaded and cached!');
    } else {
      fill.style.width = p + '%';
      lbl.textContent = Math.round(p) + '%';
    }
  }, 280);
}
// SM Street auto-download
let smP = 62;
const smI = setInterval(() => {
  smP += Math.random() * 7;
  if (smP >= 100) {
    smP = 100;
    document.getElementById('smFill').style.width = '100%';
    document.getElementById('smLbl').textContent = '‚úì Cached';
    document.getElementById('smLbl').className = 'chip chip-emerald';
    document.getElementById('smLbl').style.fontSize = '10px';
    clearInterval(smI);
  } else {
    document.getElementById('smFill').style.width = smP + '%';
    document.getElementById('smLbl').textContent = Math.round(smP) + '%';
  }
}, 400);

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
let toastT;
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg; t.classList.add('vis');
  clearTimeout(toastT); toastT = setTimeout(() => t.classList.remove('vis'), 2800);
}

/* ‚îÄ‚îÄ MOBILE NAV ACTIVE ‚îÄ‚îÄ */
document.querySelectorAll('.bnav-item').forEach(item => {
  item.addEventListener('click', () => {
    document.querySelectorAll('.bnav-item').forEach(i => i.classList.remove('active'));
    item.classList.add('active');
  });
});

/* ‚îÄ‚îÄ CLOSE MODALS ‚îÄ‚îÄ */
['redeemBg','sosBg'].forEach(id => {
  document.getElementById(id).addEventListener('click', e => {
    if (e.target === e.currentTarget) { closeModals(); closeSOS(); }
  });
});
document.addEventListener('keydown', e => { if (e.key === 'Escape') { closeModals(); closeSOS(); } });
</script>
</body>
</html>
